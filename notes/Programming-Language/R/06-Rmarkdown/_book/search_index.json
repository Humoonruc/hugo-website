[["index.html", "Rmarkdown 文本文件的语法 参考文献", " Rmarkdown 文本文件的语法 黄蒙 ✉huangmeng@ucass.edu.cn 2022-03-26 Abstract 随着近年来R语言相关环境的功能越来越丰富，编写包含R代码的文本文件，再通过统一的R环境运算、编译和导出，成为了一种管理文件的新方法。这种方法的好处有：（1）节省了硬盘资源，使多种多样的文件都能以文本的方式保存；（2）使针对原始数据所做的一切整理和分析工作变得可复制，实践了“可重复性研究”的理念；（3）能让作者专注于文件内容和参数调整本身，而把调节格式、修改结果的工作全部交给R并实现自动化。本文通过对markdown, Rmarkdown, bookdown, Xaringan 语法的整理，便利了R文本文件的编写。 参考文献 R Markdown: The Definitive Guide Rmarkdown Cheatsheet.pdf Rmarkdown Reference Guide.pdf LaTeX-Table-in-pdf.pdf "],["html-语法.html", "1 html 语法 1.1 文字颜色 1.2 字号 1.3 图片", " 1 html 语法 html 语法大都可以在Rmarkdown中使用 1.1 文字颜色 代码：&lt;span style='color: blue'&gt; 蓝色文字。&lt;/span&gt; 效果：蓝色文字。 1.2 字号 代码：&lt;font size = 4&gt; 4号字。&lt;/font&gt; &lt;font size = 6&gt; 6号字。&lt;/font&gt; 效果： 4 号字。 6 号字。 1.3 图片 代码：&lt;center&gt;&lt;img src=\"地址\" width = \"50%\" height = '100'... /&gt;&lt;center/&gt; 代码：&lt;div align = center&gt; &lt;img src=\"地址\" ... /&gt; &lt;/div&gt; 效果： "],["markdown.html", "2 markdown基本语法 2.1 段内换行 2.2 增加段间距 2.3 注释 2.4 脚注 2.5 参考文献 2.6 引用 2.7 分隔线 2.8 链接 2.9 图片 2.10 列表 2.11 任务列表 2.12 管道表 2.13 代码 2.14 转义 2.15 删除线 2.16 公式 2.17 锚点 2.18 排版风格建议", " 2 markdown基本语法 2.1 段内换行 行末&lt;br/&gt;或两个以上空格 + 回车为段内换行，连续两个回车为新起一段 我是第一段第一行 我是第一段第二行 我是第二段，注意正常的行间距和段间距 2.2 增加段间距 用&lt;br/&gt;，每多一个就多一次换行；或&amp;nbsp;，表示一个空段落。 正常段间距 正常段间距 连续两次换行，虽然看上去行距很大，但仍在一段中   中间隔了一个空段落，空段落可以叠加 2.3 注释 用&lt;!-- --&gt;括住的内容会被注释掉，不显示在最终输出中。 2.4 脚注 markdown 脚注的标准格式为： 在需要加脚注处用 [^footnote] 标识。 在下文任意处新起一行，用 [^footnote]: blabla... 将脚注补全。 2.5 参考文献 markdown 其实并无格式化参考文献的语法，但可以利用 html 的脚注语法手动实现——只适合写简易文章的场合。 This is a test sentence.&lt;sup&gt;&lt;a href=&quot;#ref1&quot;&gt;[101]&lt;/a&gt;&lt;/sup&gt; This is a test sentence.&lt;sup&gt;&lt;a href=&quot;#ref2&quot;&gt;[102]&lt;/a&gt;&lt;/sup&gt; 最后在文章结尾处写： Reference &lt;a name=&quot;ref1&quot;&gt;[101] 文献引用1&lt;/font&gt;&lt;/a&gt; &lt;a name=&quot;ref2&quot;&gt;[102] 文献引用2&lt;/font&gt;&lt;/a&gt; 效果为： This is a test sentence.[101] This is a test sentence.[102] Reference [101] 文献引用1 [102] 文献引用2 2.6 引用 在引用中可以使用其他 Markdown 语法 2.6.1 单层和嵌套引用 张三说：李四这样说过 不想当将军的木匠不是好厨子。 2.6.2 多行引用 仍然是一段（推荐）： 第一行 第二行 第一行 第二行 变成了两段（不推荐）： 第一段 第二段 2.7 分隔线 三个以上的*/-/_ 2.8 链接 2.8.1 直接表示： 格式为&lt;地址&gt;或地址(仅限 http 和 www 开头，这是 GFM 扩展语法)。如：百度的网址是 http://www.baidu.com 或 www.baidu.com，我的邮箱是 humoonruc@126.com。 2.8.2 行内链接 格式为[链接名](地址)。如：点击超链接百度 2.8.3 引用式链接 当链接被重复使用时，最好使用引用链接形式。可以将链接标记理解为一个地址变量。 在某处（比如文章结尾）定义一些链接标识符，语法为：[链接标识符]:网址。定义语句不会显示在输出中。正文中使用时，语法为：[链接名][链接标识符]，如： 在Google 首页查询 IT 资料通常是第一步，虽然在中文搜索方面这个国际巨头的用户体验常常不如百度。 2.9 图片 行内图片： ![图片名称](\"图片地址或网址\") 不建议使用这种方法，编译pdf有时会报错。 引用式图片：与链接类似，也可以在文章某处定义图片的标识符，然后把行内图片引用中图片地址替换成图片标识符即可。 2.10 列表 2.10.1 列表嵌套 用Tab缩进表示下一级 第一级 第二级 第三级 第三级 第二级 2.10.2 列表缩进 若列表项无换行，一个空格即可；若列表项有换行，建议无序列表用三个空格如- xxx，有序列表用两个空格如1. xxx 这个列表项 有换行 这个没有 这个有序列表项 有换行 这个没有 2.10.3 列表项间空行 无换行的列表项之间不建议空行；有换行的列表项之间建议空一行；列表开始和末尾都空一行 无换行： 抽烟 喝酒 烫头 有换行： 抽很多的 烟 喝酒 烫头 2.11 任务列表 2019年读书计划 《R in Action》 《R for Data Science》 《Python 疯狂讲义》 2.12 管道表 Table 2.1: 管道表 Tables Are Cool col 3 is right-aligned $1600 col 2 is centered $12 zebra stripes are neat $1 注： 英文冒号 : 使列获得了某种对齐方式。 代码块和引用块不能插入表格。 管道表不允许输入单元格换行，单元格内容太宽时转换结果可能自动换行。 Table: (\\#tab:label) text，为markdown简易表自动加表编号和表名(text)，写在简易表的前后均可。 2.13 代码 markdown 中的代码，只是显示，不可执行。 2.13.1 行内代码 写在两个反引号之间，例： 在命令行中用cd命令切换目录 2.13.2 代码块 Tab或四个空格开头 pipenv shell 或使用成对的三个反引号包裹，并可以显示声明语言，这是 GFM 扩展语法 def print_name(): print(&quot;Markdown&quot;) 2.14 转义 \\ + 符号 转义时要使用 \\ 这个符号，比如美元符号 $，否则，$ 会表示嵌入行内的公式。 2.15 删除线 成对的双波浪线~~之间： 他是个天才疯子。 2.16 公式 2.16.1 行内公式 将公式包在$ $之间，如：\\(\\sin\\pi/2=1\\) 2.16.2 独立成行的公式 将公式包含在$$ $$之间，如： \\[ f(x)=\\frac{1}{2} \\sum_{j=1}^{\\infty} \\int_{0}^{1} \\sin ^{2}(j t x) d t \\] 为了产生对齐的公式，在独立公式中可使用 aligned 环境。 公式中的环境以\\begin{环境名}开始，以\\end{环境名}结束，用\\\\表示换行，用&amp;表示一个上下对齐位置。如： \\[ \\begin{aligned} f(x) =&amp; \\sum_{k=0}^\\infty \\frac{1}{k!} x^k \\\\ =&amp; e^x \\end{aligned} \\] 2.17 锚点 [锚点描述](#锚点名)，锚点名仅限完整的各级标题 跳转到引用 2.18 排版风格建议 中文字符和英文字符（不包括标点符号）之间加空格， 使用半角符号时，无论是中文还是英文，都要在两边加空格。 “/”表示路径时，前后都不加空格。 负号后面接数字不加空格。 "],["Rmarkdown.html", "3 R Markdown语法 3.1 基本语法 3.2 编译PDF 3.3 R 代码（可执行） 3.4 R表格 3.5 R图 3.6 公式 3.7 制表式截面 3.8 下载资源文件/文件夹", " 3 R Markdown语法 3.1 基本语法 上标 text^supscript^ a2 下标 text~subscript~ k1 脚注 text^[footnote] 某观点1 代码块设置，使块中文字右对齐，仅适用于 pdf 3.2 编译PDF install.packages(&quot;tinytex&quot;) tinytex::install_tinytex(dir = &quot;D:\\\\Tinytex&quot;, force = T) Rmd 文件的 metadata： --- output: pdf_document: latex_engine: xelatex extra_dependencies: ctex: UTF8 number_sections: yes df_print: kable toc: yes classoptions: &quot;hyperref, 12pt, a4paper&quot; --- 3.3 R 代码（可执行） 行内代码：2022-03-26 代码块 def print_name(): print(&quot;Markdown&quot;) sin(pi/2) #&gt; [1] 1 3.4 R表格 表格尽量使用代码块，便于统一编号 table &lt;- tibble::tibble(ID = 1:5, name = letters[1:5]) knitr::kable(table, caption = &#39;order of letters&#39;) # 用三线表格显示数据 Table 3.1: order of letters ID name 1 a 2 b 3 c 4 d 5 e 更优美的表格：https://haozhu233.github.io/kableExtra/ 3.5 R图 插图不用 markdown 语法，而使用 R 代码块，便于统一编号 # knitr::include_graphics(&quot;figs/myfig01.png&quot;) 3.6 公式 为公式手动编号 \\[ y = f(x) \\tag{label} \\] 显然，手动编号不是一个好主意。 3.7 制表式截面 仅适用于html格式 3.7.1 By Product (tab content) 3.7.2 By Region (tab content) 3.8 下载资源文件/文件夹 3.8.1 xfun package 在页面中显示一个下载链接。 该包理论上有三个函数，xfun::embed_file(), xfun::embed_files()和xfun::embed_dir()，但只有第一个能用，后两个似乎有bug. xfun::embed_file(path, name = basename(path), text = paste(\"Download\", name), ...)，后两个参数均可省略。 # a single file xfun::embed_file( path = &quot;./figure/resource.png&quot;, name = &quot;scatter&quot;, text = &quot;Download resource files&quot; ) Download resource files 3.8.2 downloadthis package 3.8.2.1 Data frames, lists, or any R object mtcars %&gt;% downloadthis::download_this( output_name = &quot;mtcars data set&quot;, output_extension = &quot;.csv&quot;, button_label = &quot;Download data: mtcars&quot;, button_type = &quot;success&quot; ) Download data: mtcars vector_example &lt;- 1:10 linear_model &lt;- lm(mpg ~ gear, data = mtcars) list(mtcars, iris, vector_example, linear_model) %&gt;% downloadthis::download_this( output_name = &quot;datasets, vector, and linear model&quot;, output_extension = &quot;.rds&quot;, button_label = &quot;Download data as rds&quot;, button_type = &quot;success&quot; ) Download data as rds 3.8.2.2 Web address downloadthis::download_link( link = &quot;https://github.com/fmmattioni/downloadthis/raw/master/inst/example/file_1.pdf&quot;, button_label = &quot;Download online pdf&quot;, button_type = &quot;warning&quot;, self_contained = FALSE ) Download online pdf 3.8.2.3 Local files and directory downloadthis::download_file( path = c(&quot;./figure/resource.png&quot;, &quot;./figure/resource.pdf&quot;), output_name = &quot;scatter&quot;, button_label = &quot;Download local files&quot;, button_type = &quot;danger&quot;, self_contained = FALSE ) Download local files downloadthis::download_dir( path = &quot;./figure&quot;, output_name = &quot;figures&quot;, button_label = &quot;Download figure dir&quot;, button_type = &quot;danger&quot;, self_contained = FALSE ) Download figure dir 文献题录。↩︎ "],["bookdown.html", "4 bookdown语法 4.1 章节编号和引用 4.2 图形自动编号 4.3 表格自动编号 4.4 数学公式编号 4.5 文献引用与文献列表 4.6 索引 4.7 编译", " 4 bookdown语法 bookdown 比 Rmarkdown 的主要升级之处在于自动编号和交叉引用。 4.1 章节编号和引用 4.1.1 编号 # (PART) 第一篇 {-} 部分（篇） # References {-} 参考文献 # (APPENDIX) 附录 {-} 附录 4.1.2 引用 {#tag},自动为标题编号，并定义标题的标签，便于引用。标签只能含字母、数字和连字符”-“，图、表标签同 {-},不为标题编号，也不定义标签 {#tag .unnumbered},设置标题的标签，但不为标题编号 \\@ref(tag),引用标题编号。如第4节是关于bookdown的。 4.2 图形自动编号 用R代码块生成的图形，只要具有代码块标签label，且提供代码段选项fig.cap=\"图题\"，就可对图形自动编号，并且可以用如\\@ref(fig:label)的格式引用图形。如： plot(1:10) Figure 4.1: 测试图 引用如：参见图4.1，其中的fig:是必须的。 4.3 表格自动编号 用R代码knitr::kable()生成的表格，只要具有代码块标签，并且在knitr::kable()调用时加选项caption=\"表题\"，就可以对表格自动编号，并且可以用如\\@ref(tab:label)的格式引用表格。如： d &lt;- data.frame(&quot;自变量&quot; = 1:10, &quot;因变量&quot; = (1:10)^2) knitr::kable(d, caption = &quot;1到10的平方&quot;, longtable = TRUE ) Table 4.1: 1到10的平方 自变量 因变量 1 1 2 4 3 9 4 16 5 25 6 36 7 49 8 64 9 81 10 100 引用如：参见表4.1，其中的tab:是必须的。 4.4 数学公式编号 不需要编号的公式，仍可以按照一般的Rmd文件使用行内的$ $或独立的$$ $$公式块。 需要编号的公式，写在\\begin{align}和\\end{align}之间。然后，对不需要编号的行在末尾用\\nonumber标注；对需要编号的行用(\\#eq:mylabel)添加自定义标签，在正文的引用中使用与上面相同的格式\\@ref(eq:mylable)。如： \\[\\begin{align} f(x) =&amp; \\sum_{k=0}^\\infty \\frac{1}{k!} x^k \\tag{4.1} \\\\ = e^x \\tag{4.2} \\end{align}\\] \\[\\begin{align} \\Sigma =&amp; (\\sigma_{ij})_{n\\times n} \\nonumber \\\\ =&amp; E[(\\boldsymbol{X} - \\boldsymbol{\\mu}) (\\boldsymbol{X} - \\boldsymbol{\\mu})^T ] \\tag{4.3} \\end{align}\\] 引用如：协方差定义见式(4.3)。 4.5 文献引用与文献列表 将所有文献用bib格式保存为一个.bib文献库，如模板中的样例文件mybib.bib。用@item和[@item]引用文献题录，如2: 源代码 效果 @MWP06-HighStat 茆诗松 et al. (2006) @Lin2018 [page. 33] 林毅夫 (2018, page. 33) [@Lin2018, page. 33] (林毅夫 2018, page. 33) [@Lin2018; @MWP06-HighStat] (林毅夫 2018; 茆诗松 et al. 2006) [see @Lin2018, page. 33-35; also @MWP06-HighStat, ch. 1] (see 林毅夫 2018, page. 33-35; also 茆诗松 et al. 2006, ch. 1) [-@Lin2018] (2018) 将 nocite:| @item1,@item2 写在YAML文件头中，表示某些文献不直接引用，只在末尾参考文献列表中出现。 被引用的文献将出现在一章末尾以及全书的末尾，对PDF输出则仅出现在全书末尾。 4.6 索引 \\index{索引词汇}，标记为索引，仅适用于pdf格式，输出在文末。 4.7 编译 bookdown::render_book('index.Rmd', 'bookdown::epub_book') bookdown::render_book('index.Rmd', 'bookdown::pdf_book') bookdown::render_book('index.Rmd', 'bookdown::gitbook') 只编译一章： bookdown::render_book('chapter1.rmd', 'bookdown::gitbook', preview = T) 参考文献 "],["Xaringan.html", "5 Xaringan 语法 5.1 特点 5.2 快捷键 5.3 语法 5.4 CSS and Themes", " 5 Xaringan 语法 本项目基于 remark.js，幻灯片的 markdown 书写语法可参考 Markdown · gnab/remark Wiki (github.com) Xaringan 官方文档：Chapter 7 xaringan Presentations | R Markdown: The Definitive Guide (bookdown.org) 5.1 特点 完全兼容 HTML 如果善于鼓捣 CSS 和 JS，可以做出极其强大的 Slides. 5.2 快捷键 h/? 显示快捷键列表 Home/End 跳转到第一页/最后一页 b 黑屏（比如你的当前页面上有测验答案暂时不想给观众看） f 全屏 p presenter mode c 打开克隆窗口。若有双屏，可以将一个窗口展示给观众；另一个窗口开 presenter mode，可以显示注释和下一页提示 5.3 语法 5.3.1 Slides and Properties &lt;!-- --&gt; 注释 --- 分隔页 -- 递增（incremental）显示分隔符，但该符号不能出现在 content classes 中 ??? presenter notes，仅出现在演讲者模式中，演讲者可见 在 presentation 中一个常见的错误，就是在幻灯片中塞进太多的内容。结果要么是演讲者上气不接下气地大声朗读这么多单词，要么是观众开始自己安静地阅读幻灯片，不听。幻灯片不是纸或书，所以你应该尽量在幻灯片的视觉内容上简短，但在口头叙述上冗长。如果你对一张幻灯片有很多要说的，但不能记住所有的内容，你可以考虑使用 presenter notes 页属性，写在每页的开头，均兼容标准 css 语法 class: 定义本页类，然后再 css 中可以定义具体类的实现 left/center/right，水平对齐方式 top/middle/bottom，竖直对齐方式 class: bottom与递增显示分隔符--连用，即可创建逐行上升的动画效果 inverse，颜色反转 background-image: url()，定义背景图片 background-position:，背景图片位置 50%, 80%，图片中心在屏幕中的位置，横向左起，纵向上起 background-size:，背景图片大小 contain cover 200px 15% layout: true，定义一页为母版，该页本身不会显示，但其后的幻灯片都会继承母版的属性 false，停止继承母版 name: xxx，定义一页为模板，该页本身不会显示，后面可以引用该名称多次使用 {{content}}在模板中定义占位符，使用模板时，所写的 markdown 内容会出现在占位符处 template: xxx，使用定义好的 slide 5.3.2 YAML title: &quot;幻灯忍者&quot; subtitle: &quot;写轮眼&quot; author: &quot;黄蒙 &amp;#9993;huangmeng@ucass.edu.cn&quot; institute: &quot;RStudio, PBC&quot; date: &quot;2016/12/12&quot; output: xaringan::moon_reader: css: - default # 提供了几个默认类，所以这行必须有，哪怕用了别的主题 - default-fonts - fc - fc-fonts - zh-CN.css - &quot;https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.0/animate.min.css&quot; # animation in transition, https://github.com/yihui/xaringan/issues/184 self_contained: no # Whether to produce a self-contained HTML file by embedding all external resources into the HTML file.（可能需要科学上网，才能将Xaringan所依赖的js脚本、谷歌字体等文件嵌入本地 html） lib_dir: libs seal: true # 是否根据 YAML 信息自动生成首页 nature: ratio: &#39;16:9&#39; # 默认4:3 # titleSlideClass: [&quot;center&quot;, &#39;inverse&#39;,&quot;middle&quot;] # 默认首页的样式 highlightStyle: github highlightLines: true # 当一行 R 代码被 {{ }} 包裹时，允许其高亮 countIncrementalSlides: yes # beforeInit: &quot;macro/macro.js&quot; # 在 remark.js 渲染前插入js脚本，例如该脚本可以快捷定义图片的size autoplay: interval: 60000 # 自动播放一页时间间隔（单位：毫秒） loop: false # 是否循环 countdown: 60000 # 每页的倒计时 5.3.3 Content Classes ramark.js 一个非常强大的功能，是 markdown 中的任何内容都可以用一个 CSS 类来规范，语法为 .className[content]. 甚至可以连用，如.center.red[] default 主题提供的默认类包括：.left[], .center[], .right[], .left-column[ ], .right-column[ ]（宽度为20%-75%）, .pull-left[], .pull-right[]（宽度为 50%-50%）, .footnote[]（出现于屏幕左下角） 其他类需要自己在 CSS 文件中设置。 https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.0/animate.min.css 提供了一些动画类，如 .animated, .zoomIn, zoomInDown 5.4 CSS and Themes 已有的内置主题（均为 .css 文件） default fc, fc-fonts. 橙色主题 metropolis, metropolis-fonts. 每页最上方都有深色标题栏，放置一级标题。很规整，但有点死板 "],["参考文献-2.html", "参考文献", " 参考文献 "],["404.html", "Page not found", " Page not found The page you requested cannot be found (perhaps it was moved or renamed). You may want to try searching to find the page's new location, or use the table of contents to find the page you are looking for. "]]
