<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Humoon" />

<meta name="date" content="2022-04-21" />

<title>组合型数据结构</title>

<script src="libs/header-attrs-2.13/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="libs/bootstrap-3.3.5/css/united.min.css" rel="stylesheet" />
<script src="libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="libs/navigation-1.1/tabsets.js"></script>
<script src="libs/navigation-1.1/codefolding.js"></script>
<script src="libs/navigation-1.1/sourceembed.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>



<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; } /* Alert */
code span.an { color: #008000; } /* Annotation */
code span.at { } /* Attribute */
code span.bu { } /* BuiltIn */
code span.cf { color: #0000ff; } /* ControlFlow */
code span.ch { color: #008080; } /* Char */
code span.cn { } /* Constant */
code span.co { color: #008000; } /* Comment */
code span.cv { color: #008000; } /* CommentVar */
code span.do { color: #008000; } /* Documentation */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.im { } /* Import */
code span.in { color: #008000; } /* Information */
code span.kw { color: #0000ff; } /* Keyword */
code span.op { } /* Operator */
code span.ot { color: #ff4000; } /* Other */
code span.pp { color: #ff4000; } /* Preprocessor */
code span.sc { color: #008080; } /* SpecialChar */
code span.ss { color: #008080; } /* SpecialString */
code span.st { color: #008080; } /* String */
code span.va { } /* Variable */
code span.vs { color: #008080; } /* VerbatimString */
code span.wa { color: #008000; font-weight: bold; } /* Warning */

.sourceCode .row {
  width: 100%;
}
.sourceCode {
  overflow-x: auto;
}
.code-folding-btn {
  margin-right: -30px;
}
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>


<style type="text/css">
#rmd-source-code {
  display: none;
}
</style>


<link rel="stylesheet" href="../css/style.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>



<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
<li role="separator" class="divider"></li>
<li><a id="rmd-download-source" href="#">Download Rmd</a></li>
</ul>
</div>



<h1 class="title toc-ignore">组合型数据结构</h1>
<h3 class="subtitle">Vector, Matrix, List and Dataframe</h3>
<h4 class="author">Humoon</h4>
<h4 class="date">2022-04-21</h4>

</div>


<div id="组合型数据结构的分类" class="section level2">
<h2>组合型数据结构的分类</h2>
<ol style="list-style-type: decimal">
<li>向量、矩阵、数组都要求单一数据类型 (homogeneous data types)。根基是
<code>c()</code> 向量</li>
<li>列表、数据框可以装载不同数据类型 (heterogeneous data
types)。根基是<code>list()</code> 列表
<ol style="list-style-type: decimal">
<li>列表提高了存储的灵活性，但降低了存储效率和运行效率。</li>
<li>数据框是一种特殊的列表。</li>
</ol></li>
<li>不同类型的数据结合成一个向量时，会被强制转换为兼容的、更灵活的数据类型
<ol style="list-style-type: decimal">
<li>一般顺序为：logical&lt;integer&lt;numeric&lt;complex&lt;character&lt;list</li>
</ol></li>
<li>这两大类的 common 属性：
<ol style="list-style-type: decimal">
<li>类型，<code>typeof()</code></li>
<li>长度，<code>length()</code></li>
<li>属性，<code>attributes()</code>，即附加的任意 metadata</li>
</ol></li>
</ol>
</div>
<div id="vector" class="section level2">
<h2>Vector</h2>
<p><strong>注意</strong></p>
<ol style="list-style-type: decimal">
<li>R中无标量，标量被默认为长度为1的向量，所以在控制台显示一个数时，前面仍会有表示向量维度的
<code>[1]</code></li>
<li>R中的向量默认为列向量，不存在行向量。对列向量转置，得到的是一个<span
class="math inline">\(1\times n\)</span>的矩阵</li>
<li>R中的基础运算都是向量化的</li>
</ol>
<div id="数据类型" class="section level3">
<h3>数据类型</h3>
<p>由于向量是 R 中最基本的数据类型（R
中无标量），因此向量根据元素的数据类型被分为几种：</p>
<div id="logical" class="section level4">
<h4>logical</h4>
</div>
<div id="numeric" class="section level4">
<h4>numeric</h4>
<p>统称数值型</p>
<ul>
<li>整数，integer</li>
<li>双精度浮点数，double</li>
</ul>
<p>三种特殊情况：</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">exp</span>(<span class="dv">1000</span>) <span class="co"># Inf 正无穷</span></span></code></pre></div>
<pre><code>#&gt; [1] Inf</code></pre>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="sc">-</span><span class="dv">10</span> <span class="sc">/</span> <span class="dv">0</span> <span class="co"># -Inf 负无穷</span></span></code></pre></div>
<pre><code>#&gt; [1] -Inf</code></pre>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">exp</span>(<span class="dv">1000</span>) <span class="sc">/</span> <span class="fu">exp</span>(<span class="dv">990</span>) <span class="co"># NaN, not a number</span></span></code></pre></div>
<pre><code>#&gt; [1] NaN</code></pre>
<ol style="list-style-type: decimal">
<li>R 中数字的上限为 1.8*10^38，超过这个规模就会出现 Inf</li>
<li>只要表达式中有正负无穷的子项出现，结果就很可能为 Inf, -Inf, NaN</li>
</ol>
</div>
<div id="charactor" class="section level4">
<h4>charactor</h4>
</div>
<div id="null和na" class="section level4">
<h4><code>NULL</code>和<code>NA</code></h4>
<p>NA，长度为1的逻辑向量，表示数据的缺失值</p>
<p>NULL，零长向量，一般表示参数未被赋值，以及函数没有明确返回值时的返回</p>
</div>
</div>
<div id="create" class="section level3">
<h3>Create</h3>
<div id="c2-4-6" class="section level4">
<h4><code>c(2, 4, 6)</code></h4>
<p>创建和拼接向量，其他语言一般用<code>[]</code></p>
<p>向量定义时即使嵌套，也会被自动展开</p>
</div>
<div id="mn" class="section level4">
<h4><code>m:n</code></h4>
<p>连续整数向量</p>
</div>
<div id="seqfrom-to-by1-length.out" class="section level4">
<h4><code>seq(from, to, by=1, length.out)</code></h4>
<p>等差数列。四个参数有三个即可。by为步长，length.out 为向量 size</p>
</div>
<div id="seq_lenn" class="section level4">
<h4><code>seq_len(n)</code></h4>
<p>等价于<code>1:n</code></p>
</div>
<div id="seq_alongx" class="section level4">
<h4><code>seq_along(x)</code></h4>
<p>等价于 <code>length(x) %&gt;% seq_len()</code></p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">seq_along</span>(LETTERS)</span></code></pre></div>
<pre><code>#&gt;  [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25
#&gt; [26] 26</code></pre>
</div>
<div id="repx-times-each" class="section level4">
<h4><code>rep(x, times, each)</code></h4>
<p>元素复用，重复对象x times次。</p>
<p>若x与times都是向量且长度一致，则为对应元素重复对应次数。</p>
</div>
<div id="numericn-logicaln" class="section level4">
<h4><code>numeric(N)</code>, <code>logical(N)</code></h4>
<p>生成长度为 N, 每项为 0 的特定类型向量</p>
</div>
<div id="vectordouble-n" class="section level4">
<h4><code>vector('double', N)</code></h4>
<p>生成长度为N的特定类型向量</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="dv">2</span>)</span></code></pre></div>
<pre><code>#&gt; [1] 1 2 3 1 2 3</code></pre>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="at">each =</span> <span class="dv">2</span>)</span></code></pre></div>
<pre><code>#&gt; [1] 1 1 2 2 3 3</code></pre>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="fu">rep</span>(<span class="dv">2</span>, <span class="dv">1</span>)) <span class="co"># 即rep(1:3, 2)</span></span></code></pre></div>
<pre><code>#&gt; [1] 1 2 3 1 2 3</code></pre>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="fu">rep</span>(<span class="dv">2</span>, <span class="dv">3</span>)) <span class="co"># 即rep(1:3, c(2, 2, 2))</span></span></code></pre></div>
<pre><code>#&gt; [1] 1 1 2 2 3 3</code></pre>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">1</span>))</span></code></pre></div>
<pre><code>#&gt; [1] 1 1 2 2 2 2 3</code></pre>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">numeric</span>(<span class="dv">6</span>) <span class="sc">+</span> <span class="dv">1</span> <span class="co"># 全 1 向量的另一种写法</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>y</span></code></pre></div>
<pre><code>#&gt; [1] 1 1 1 1 1 1</code></pre>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>z <span class="ot">&lt;-</span> <span class="fu">logical</span>(<span class="dv">7</span>)</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>z</span></code></pre></div>
<pre><code>#&gt; [1] FALSE FALSE FALSE FALSE FALSE FALSE FALSE</code></pre>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>w <span class="ot">&lt;-</span> <span class="fu">character</span>(<span class="dv">2</span>)</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>w</span></code></pre></div>
<pre><code>#&gt; [1] &quot;&quot; &quot;&quot;</code></pre>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>w <span class="ot">&lt;-</span> <span class="fu">c</span>(w, <span class="st">&quot;a&quot;</span>)</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>w</span></code></pre></div>
<pre><code>#&gt; [1] &quot;&quot;  &quot;&quot;  &quot;a&quot;</code></pre>
</div>
</div>
<div id="type" class="section level3">
<h3>Type</h3>
<ul>
<li><code>class()</code> 查看类型</li>
<li><code>is.*()</code> 判断类型</li>
<li><code>as.*()</code> 转换类型</li>
</ul>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)</span></code></pre></div>
<pre><code>#&gt; [1] &quot;integer&quot;</code></pre>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(<span class="fu">c</span>(T, F, T))</span></code></pre></div>
<pre><code>#&gt; [1] &quot;logical&quot;</code></pre>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.character</span>(<span class="fu">c</span>(<span class="st">&quot;h&quot;</span>, <span class="st">&quot;e&quot;</span>, <span class="st">&quot;l&quot;</span>, <span class="st">&quot;l&quot;</span>, <span class="st">&quot;o&quot;</span>))</span></code></pre></div>
<pre><code>#&gt; [1] TRUE</code></pre>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as.character</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)</span></code></pre></div>
<pre><code>#&gt; [1] &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;4&quot; &quot;5&quot;</code></pre>
</div>
<div id="size" class="section level3">
<h3>Size</h3>
<p><code>length()</code></p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(w)</span></code></pre></div>
<pre><code>#&gt; [1] 3</code></pre>
</div>
<div id="label" class="section level3">
<h3>Label</h3>
<ul>
<li><code>names(x)</code>，返回标签组成的向量</li>
<li><code>names(x) &lt;- c(...)</code>，标签赋值</li>
</ul>
</div>
<div id="subset" class="section level3">
<h3>Subset</h3>
<div id="选择器和提取器" class="section level4">
<h4>选择器<code>[]</code>和提取器<code>[[]]</code></h4>
<p><code>[]</code>为子集选择器，返回的是原数据的一个切片，不改变数据结构，<strong>就像
JS 中的 <code>.filter()</code></strong>，即 R
中需要按照一定条件筛选数列时，用<code>[condition]</code>即可</p>
<p><code>[[]]</code>为元素提取器，返回的是原数据一个<strong>长度为1的切片</strong>中装载的内容，就像
JS 中的 <code>.filter()[]</code></p>
<p>对向量操作，<code>[]</code>和<code>[[]]</code>没有差别，都返回一维的向量。但对更复杂的数据类型，二者的差别就很明显：</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(iris) <span class="co"># 数据框</span></span></code></pre></div>
<pre><code>#&gt; &#39;data.frame&#39;:    150 obs. of  5 variables:
#&gt;  $ Sepal.Length: num  5.1 4.9 4.7 4.6 5 5.4 4.6 5 4.4 4.9 ...
#&gt;  $ Sepal.Width : num  3.5 3 3.2 3.1 3.6 3.9 3.4 3.4 2.9 3.1 ...
#&gt;  $ Petal.Length: num  1.4 1.4 1.3 1.5 1.4 1.7 1.4 1.5 1.4 1.5 ...
#&gt;  $ Petal.Width : num  0.2 0.2 0.2 0.2 0.2 0.4 0.3 0.2 0.2 0.1 ...
#&gt;  $ Species     : Factor w/ 3 levels &quot;setosa&quot;,&quot;versicolor&quot;,..: 1 1 1 1 1 1 1 1 1 1 ...</code></pre>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(iris[<span class="dv">1</span>]) <span class="co"># 只含一个变量的数据框</span></span></code></pre></div>
<pre><code>#&gt; &#39;data.frame&#39;:    150 obs. of  1 variable:
#&gt;  $ Sepal.Length: num  5.1 4.9 4.7 4.6 5 5.4 4.6 5 4.4 4.9 ...</code></pre>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(iris[[<span class="dv">1</span>]]) <span class="co"># 向量</span></span></code></pre></div>
<pre><code>#&gt;  num [1:150] 5.1 4.9 4.7 4.6 5 5.4 4.6 5 4.4 4.9 ...</code></pre>
</div>
<div id="选取的三种方式" class="section level4">
<h4><code>[]</code>选取的三种方式</h4>
<ul>
<li>index <code>x[4]; x[-2:4]; x[c(1, 3)]</code></li>
<li>condition <code>x[x == 10]; x[x %in% c(1, 2, 5)]</code></li>
<li>标签 <code>x["apple"]</code></li>
</ul>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">7</span>)</span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>x[<span class="dv">3</span><span class="sc">:</span><span class="dv">5</span>] <span class="co"># x向量中的第3-5个元素</span></span></code></pre></div>
<pre><code>#&gt; [1] 3 4 5</code></pre>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>x[<span class="sc">-</span><span class="dv">2</span>] <span class="co"># 除了第二个以外的元素</span></span></code></pre></div>
<pre><code>#&gt; [1] 1 3 4 5 7</code></pre>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>x[<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">4</span>)] <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">9</span>, <span class="dv">11</span>)</span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>x <span class="co"># a中第1个和第4个元素</span></span></code></pre></div>
<pre><code>#&gt; [1]  9  2  3 11  5  7</code></pre>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>x[x <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">5</span>)]</span></code></pre></div>
<pre><code>#&gt; [1] 2 5</code></pre>
</div>
</div>
<div id="index" class="section level3">
<h3>Index</h3>
<div id="which" class="section level4">
<h4><code>which*</code></h4>
<ul>
<li><code>which(逻辑表达式)</code></li>
<li><code>which.min()</code></li>
<li><code>which.max()</code></li>
</ul>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>#&gt; [1]  9  2  3 11  5  7</code></pre>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="fu">which.max</span>(x)</span></code></pre></div>
<pre><code>#&gt; [1] 4</code></pre>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="fu">which.min</span>(x)</span></code></pre></div>
<pre><code>#&gt; [1] 2</code></pre>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="fu">which</span>(x <span class="sc">==</span> <span class="dv">2</span>)</span></code></pre></div>
<pre><code>#&gt; [1] 2</code></pre>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="fu">which</span>(x <span class="sc">&gt;</span> <span class="dv">4</span>)</span></code></pre></div>
<pre><code>#&gt; [1] 1 4 5 6</code></pre>
</div>
<div id="match" class="section level4">
<h4><code>*match</code></h4>
<ul>
<li><p><code>match(vector1, vector2)</code>返回第一个向量中各元素在第二个向量中的位置序列，每一个都从头开始匹配，只要匹配到就结束。</p></li>
<li><p><code>pmatch(vector1, vector2)</code>，若第一个向量中某元素在第二个向量中匹配上了，则认为第二个向量中相应元素已被占用，再匹配第一个向量中的下一个元素时，跳过第二个向量中曾被匹配过的元素。</p></li>
</ul>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="fu">match</span>(<span class="fu">rep</span>(<span class="dv">1</span>, <span class="dv">3</span>), <span class="fu">rep</span>(<span class="dv">1</span>, <span class="dv">5</span>))</span></code></pre></div>
<pre><code>#&gt; [1] 1 1 1</code></pre>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="fu">pmatch</span>(<span class="fu">rep</span>(<span class="dv">1</span>, <span class="dv">3</span>), <span class="fu">rep</span>(<span class="dv">1</span>, <span class="dv">5</span>))</span></code></pre></div>
<pre><code>#&gt; [1] 1 2 3</code></pre>
</div>
</div>
<div id="operation" class="section level3">
<h3>Operation</h3>
<p>R
对向量的操作都要在原向量的拷贝上进行，不改变原向量（只有直接赋值能改变原向量）。好处是安全，坏处是慢。</p>
<div id="增删改" class="section level4">
<h4>增删改</h4>
<ul>
<li><code>append()</code> 返回插入元素后的拷贝. <span
style="color:red"><strong>注意，R
中一般不直接修改原对象，所以如果要保留这个操作，一定要记得赋值给原变量。</strong></span></li>
<li><code>[-index]</code> 排除选集整体赋值</li>
<li><code>replace()</code> 批量替换</li>
</ul>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">7</span>)</span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">replace</span>(x, <span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">4</span>), <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">5</span>)) <span class="co"># 替换：将x向量中第3个和第4个元素替换为5</span></span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>#&gt; [1] 1 2 5 5 5 7</code></pre>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="fu">append</span>(x, <span class="dv">100</span>, <span class="at">after =</span> <span class="dv">2</span>)</span></code></pre></div>
<pre><code>#&gt; [1]   1   2 100   5   5   5   7</code></pre>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>#&gt; [1] 1 2 5 5 5 7</code></pre>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">0</span>, <span class="dv">3</span>) <span class="co"># 删除0项</span></span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a>b <span class="ot">&lt;-</span> <span class="fu">which</span>(a <span class="sc">==</span> <span class="dv">0</span>)</span>
<span id="cb71-3"><a href="#cb71-3" aria-hidden="true" tabindex="-1"></a>b</span></code></pre></div>
<pre><code>#&gt; [1] 1 2 5</code></pre>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> a[<span class="sc">-</span>b]</span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a>a</span></code></pre></div>
<pre><code>#&gt; [1] 1 2 3</code></pre>
</div>
<div id="sort" class="section level4">
<h4>Sort</h4>
<ul>
<li><code>rank()</code>返回向量中各元素相对大小的排序（默认升序）</li>
<li><code>sort()</code>返回排序后的向量</li>
<li><code>rev()</code>逆序排列</li>
</ul>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>#&gt; [1] 1 2 5 5 5 7</code></pre>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rank</span>(x)</span></code></pre></div>
<pre><code>#&gt; [1] 1 2 4 4 4 6</code></pre>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sort</span>(x, <span class="at">decreasing =</span> F) <span class="co"># 默认升序排序</span></span></code></pre></div>
<pre><code>#&gt; [1] 1 2 5 5 5 7</code></pre>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>#&gt; [1] 1 2 5 5 5 7</code></pre>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rev</span>(x) <span class="co"># 逆序</span></span></code></pre></div>
<pre><code>#&gt; [1] 7 5 5 5 2 1</code></pre>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>#&gt; [1] 1 2 5 5 5 7</code></pre>
</div>
<div id="去重偏移差分" class="section level4">
<h4>去重、偏移、差分</h4>
<ul>
<li><code>unique()</code> 去重</li>
<li><code>lead(x, n=1)</code>, <code>lag(x, n=1)</code>
偏移，返回一个序列的领先序列和滞后序列</li>
<li><code>diff(x, lag=1)</code> 差分，lag 用以指定滞后几项。默认的 lag
值为 1</li>
</ul>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="fu">unique</span>(x)</span></code></pre></div>
<pre><code>#&gt; [1] 1 2 5 7</code></pre>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>#&gt; [1] 1 2 5 5 5 7</code></pre>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a><span class="fu">lead</span>(x, <span class="dv">2</span>)</span></code></pre></div>
<pre><code>#&gt; [1]  5  5  5  7 NA NA</code></pre>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>#&gt; [1] 1 2 5 5 5 7</code></pre>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="fu">diff</span>(x)</span></code></pre></div>
<pre><code>#&gt; [1] 1 3 0 0 2</code></pre>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>#&gt; [1] 1 2 5 5 5 7</code></pre>
</div>
<div id="交叉循环遍历" class="section level4">
<h4>交叉循环遍历</h4>
<p><code>expand.grid(x, y)</code>，参数 x, y
为向量，效果为<strong>对二元数值对 (x, y)
所有可能取值的遍历（返回数据框）</strong>。</p>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span></span>
<span id="cb99-2"><a href="#cb99-2" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> letters[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>]</span>
<span id="cb99-3"><a href="#cb99-3" aria-hidden="true" tabindex="-1"></a>z <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span></span>
<span id="cb99-4"><a href="#cb99-4" aria-hidden="true" tabindex="-1"></a><span class="fu">expand.grid</span>(x, y)</span></code></pre></div>
<pre><code>#&gt;   Var1 Var2
#&gt; 1    1    a
#&gt; 2    2    a
#&gt; 3    3    a
#&gt; 4    1    b
#&gt; 5    2    b
#&gt; 6    3    b
#&gt; 7    1    c
#&gt; 8    2    c
#&gt; 9    3    c</code></pre>
<div class="sourceCode" id="cb101"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a><span class="fu">expand.grid</span>(x, z)</span></code></pre></div>
<pre><code>#&gt;   Var1 Var2
#&gt; 1    1    1
#&gt; 2    2    1
#&gt; 3    3    1
#&gt; 4    1    2
#&gt; 5    2    2
#&gt; 6    3    2
#&gt; 7    1    3
#&gt; 8    2    3
#&gt; 9    3    3</code></pre>
</div>
<div id="算数运算" class="section level4">
<h4>算数运算</h4>
<p>四则运算(+-*/)、幂(^)、取整(%/%)、取余(%%)</p>
<div class="sourceCode" id="cb103"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> <span class="sc">/</span> (<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>) <span class="co"># 自动将标量（长度为 1 的向量）扩展为长度为 6 的向量后再运算</span></span></code></pre></div>
<pre><code>#&gt; [1] 1.0000000 0.5000000 0.3333333 0.2500000 0.2000000 0.1666667</code></pre>
<div class="sourceCode" id="cb105"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> <span class="sc">/</span> <span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="at">nrow =</span> <span class="dv">2</span>) <span class="co"># 自动将标量扩展为对应维度的矩阵后再运算</span></span></code></pre></div>
<pre><code>#&gt;      [,1]      [,2]
#&gt; [1,]  1.0 0.3333333
#&gt; [2,]  0.5 0.2500000</code></pre>
<div class="sourceCode" id="cb107"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span></span>
<span id="cb107-2"><a href="#cb107-2" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="dv">2</span><span class="sc">:</span><span class="dv">6</span></span>
<span id="cb107-3"><a href="#cb107-3" aria-hidden="true" tabindex="-1"></a>x <span class="sc">*</span> y <span class="co"># 哈达马积</span></span></code></pre></div>
<pre><code>#&gt; [1]  2  6 12 20 30</code></pre>
<div class="sourceCode" id="cb109"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 向量内积（以下写法等价）</span></span>
<span id="cb109-2"><a href="#cb109-2" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span> <span class="sc">*</span> <span class="dv">2</span> <span class="sc">+</span> <span class="dv">2</span> <span class="sc">*</span> <span class="dv">3</span> <span class="sc">+</span> <span class="dv">3</span> <span class="sc">*</span> <span class="dv">4</span> <span class="sc">+</span> <span class="dv">4</span> <span class="sc">*</span> <span class="dv">5</span> <span class="sc">+</span> <span class="dv">5</span> <span class="sc">*</span> <span class="dv">6</span></span></code></pre></div>
<pre><code>#&gt; [1] 70</code></pre>
<div class="sourceCode" id="cb111"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(x <span class="sc">*</span> y)</span></code></pre></div>
<pre><code>#&gt; [1] 70</code></pre>
<div class="sourceCode" id="cb113"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a><span class="fu">t</span>(x) <span class="sc">%*%</span> y <span class="co"># 利用矩阵乘法，注意 R 中向量默认为列向量</span></span></code></pre></div>
<pre><code>#&gt;      [,1]
#&gt; [1,]   70</code></pre>
<div class="sourceCode" id="cb115"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb115-1"><a href="#cb115-1" aria-hidden="true" tabindex="-1"></a><span class="fu">crossprod</span>(x, y) <span class="co"># 利用矩阵乘法，得到一个 1*1 矩阵</span></span></code></pre></div>
<pre><code>#&gt;      [,1]
#&gt; [1,]   70</code></pre>
<div class="sourceCode" id="cb117"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb117-1"><a href="#cb117-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 向量外积（以下写法等价）</span></span>
<span id="cb117-2"><a href="#cb117-2" aria-hidden="true" tabindex="-1"></a>x <span class="sc">%*%</span> <span class="fu">t</span>(y)</span></code></pre></div>
<pre><code>#&gt;      [,1] [,2] [,3] [,4] [,5]
#&gt; [1,]    2    3    4    5    6
#&gt; [2,]    4    6    8   10   12
#&gt; [3,]    6    9   12   15   18
#&gt; [4,]    8   12   16   20   24
#&gt; [5,]   10   15   20   25   30</code></pre>
<div class="sourceCode" id="cb119"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a>x <span class="sc">%o%</span> y</span></code></pre></div>
<pre><code>#&gt;      [,1] [,2] [,3] [,4] [,5]
#&gt; [1,]    2    3    4    5    6
#&gt; [2,]    4    6    8   10   12
#&gt; [3,]    6    9   12   15   18
#&gt; [4,]    8   12   16   20   24
#&gt; [5,]   10   15   20   25   30</code></pre>
<div class="sourceCode" id="cb121"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true" tabindex="-1"></a><span class="fu">kronecker</span>(x, <span class="fu">t</span>(y)) <span class="co"># 克罗内克积</span></span></code></pre></div>
<pre><code>#&gt;      [,1] [,2] [,3] [,4] [,5]
#&gt; [1,]    2    3    4    5    6
#&gt; [2,]    4    6    8   10   12
#&gt; [3,]    6    9   12   15   18
#&gt; [4,]    8   12   16   20   24
#&gt; [5,]   10   15   20   25   30</code></pre>
<div class="sourceCode" id="cb123"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb123-1"><a href="#cb123-1" aria-hidden="true" tabindex="-1"></a><span class="fu">outer</span>(x, y)</span></code></pre></div>
<pre><code>#&gt;      [,1] [,2] [,3] [,4] [,5]
#&gt; [1,]    2    3    4    5    6
#&gt; [2,]    4    6    8   10   12
#&gt; [3,]    6    9   12   15   18
#&gt; [4,]    8   12   16   20   24
#&gt; [5,]   10   15   20   25   30</code></pre>
<div class="sourceCode" id="cb125"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb125-1"><a href="#cb125-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tcrossprod</span>(x, y)</span></code></pre></div>
<pre><code>#&gt;      [,1] [,2] [,3] [,4] [,5]
#&gt; [1,]    2    3    4    5    6
#&gt; [2,]    4    6    8   10   12
#&gt; [3,]    6    9   12   15   18
#&gt; [4,]    8   12   16   20   24
#&gt; [5,]   10   15   20   25   30</code></pre>
</div>
<div id="逻辑运算" class="section level4">
<h4>逻辑运算</h4>
<div class="sourceCode" id="cb127"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb127-1"><a href="#cb127-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">6</span></span>
<span id="cb127-2"><a href="#cb127-2" aria-hidden="true" tabindex="-1"></a>x <span class="sc">&lt;</span> <span class="dv">4</span></span></code></pre></div>
<pre><code>#&gt; [1]  TRUE  TRUE  TRUE FALSE FALSE FALSE</code></pre>
<div class="sourceCode" id="cb129"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb129-1"><a href="#cb129-1" aria-hidden="true" tabindex="-1"></a><span class="fu">all</span>(x <span class="sc">&gt;</span> <span class="dv">5</span>) <span class="co"># 一个向量的所有元素是否满足某条件</span></span></code></pre></div>
<pre><code>#&gt; [1] FALSE</code></pre>
<div class="sourceCode" id="cb131"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb131-1"><a href="#cb131-1" aria-hidden="true" tabindex="-1"></a><span class="fu">any</span>(x <span class="sc">&gt;</span> <span class="dv">5</span>) <span class="co"># 一个向量的部分元素是否满足某条件</span></span></code></pre></div>
<pre><code>#&gt; [1] TRUE</code></pre>
<div class="sourceCode" id="cb133"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb133-1"><a href="#cb133-1" aria-hidden="true" tabindex="-1"></a><span class="fu">matrix</span>(x, <span class="dv">2</span>, <span class="at">byrow =</span> T) <span class="sc">&lt;</span> <span class="dv">4</span></span></code></pre></div>
<pre><code>#&gt;       [,1]  [,2]  [,3]
#&gt; [1,]  TRUE  TRUE  TRUE
#&gt; [2,] FALSE FALSE FALSE</code></pre>
</div>
<div id="集合运算" class="section level4">
<h4>集合运算</h4>
<div class="sourceCode" id="cb135"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb135-1"><a href="#cb135-1" aria-hidden="true" tabindex="-1"></a><span class="fu">intersect</span>(<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">3</span>, <span class="dv">12</span>, <span class="dv">4</span>, <span class="dv">123</span>, <span class="dv">12</span>), <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)) <span class="co"># 交</span></span></code></pre></div>
<pre><code>#&gt; [1] 1 2 3</code></pre>
<div class="sourceCode" id="cb137"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb137-1"><a href="#cb137-1" aria-hidden="true" tabindex="-1"></a><span class="fu">union</span>(<span class="fu">c</span>(<span class="st">&quot;狗熊会&quot;</span>, <span class="st">&quot;聚数据英才&quot;</span>), <span class="fu">c</span>(<span class="st">&quot;狗熊会&quot;</span>, <span class="st">&quot;助产业振兴&quot;</span>)) <span class="co"># 并</span></span></code></pre></div>
<pre><code>#&gt; [1] &quot;狗熊会&quot;     &quot;聚数据英才&quot; &quot;助产业振兴&quot;</code></pre>
<div class="sourceCode" id="cb139"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb139-1"><a href="#cb139-1" aria-hidden="true" tabindex="-1"></a><span class="fu">setdiff</span>(<span class="dv">10</span><span class="sc">:</span><span class="dv">2</span>, <span class="dv">5</span><span class="sc">:</span><span class="dv">3</span>) <span class="co"># 差</span></span></code></pre></div>
<pre><code>#&gt; [1] 10  9  8  7  6  2</code></pre>
</div>
</div>
</div>
<div id="matrix" class="section level2">
<h2>Matrix</h2>
<div id="create-1" class="section level3">
<h3>Create</h3>
<div id="向量转化为矩阵" class="section level4">
<h4>向量转化为矩阵</h4>
<ol style="list-style-type: decimal">
<li><p><code>matrix(vector, nrow, ncol, byrow = FALSE)</code>直接创建，默认
byrow = FALSE，优先按列填充矩阵，设为 TRUE 可按行</p></li>
<li><p><code>dim(vector) = c(nrow,ncol)</code>设定维度</p></li>
</ol>
<div class="sourceCode" id="cb141"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb141-1"><a href="#cb141-1" aria-hidden="true" tabindex="-1"></a><span class="do">## 生成 3*3 的全 1 矩阵</span></span>
<span id="cb141-2"><a href="#cb141-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb141-3"><a href="#cb141-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 第一种</span></span>
<span id="cb141-4"><a href="#cb141-4" aria-hidden="true" tabindex="-1"></a><span class="fu">rep</span>(<span class="dv">1</span>, <span class="dv">9</span>) <span class="sc">%&gt;%</span> <span class="fu">matrix</span>(<span class="at">nrow =</span> <span class="dv">3</span>)</span></code></pre></div>
<pre><code>#&gt;      [,1] [,2] [,3]
#&gt; [1,]    1    1    1
#&gt; [2,]    1    1    1
#&gt; [3,]    1    1    1</code></pre>
<div class="sourceCode" id="cb143"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb143-1"><a href="#cb143-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 第二种</span></span>
<span id="cb143-2"><a href="#cb143-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">1</span>, <span class="dv">9</span>)</span>
<span id="cb143-3"><a href="#cb143-3" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(x) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">3</span>) </span>
<span id="cb143-4"><a href="#cb143-4" aria-hidden="true" tabindex="-1"></a>x <span class="co"># 这种方式改变了变量 x 的值，不是很推荐，还是第一种更好</span></span></code></pre></div>
<pre><code>#&gt;      [,1] [,2] [,3]
#&gt; [1,]    1    1    1
#&gt; [2,]    1    1    1
#&gt; [3,]    1    1    1</code></pre>
</div>
<div id="创建对角矩阵" class="section level4">
<h4>创建对角矩阵</h4>
<p><code>diag(n)</code> 生成 n 阶单位阵 <span
class="math inline">\(I_n\)</span></p>
<p><code>diag(vector)</code>，参数为对角元</p>
</div>
<div id="矩阵转化为向量" class="section level4">
<h4>矩阵转化为向量</h4>
<p><code>as.vector()</code> 按照一列一列地顺序将矩阵展开为向量</p>
</div>
</div>
<div id="size-1" class="section level3">
<h3>Size</h3>
<p><code>nrow(A)</code> <code>ncol(A)</code>
<code>dim(A)</code>，返回长度为 2 的向量</p>
</div>
<div id="label-1" class="section level3">
<h3>Label</h3>
<p><code>rownames() [&lt;-]</code></p>
<p><code>colnames() [&lt;-]</code></p>
</div>
<div id="subset-1" class="section level3">
<h3>Subset</h3>
<p><code>[行选择器, 列选择器]</code> 每个选择器都可以是index、condition
和 name</p>
<p><strong>矩阵的<code>[]</code>选择器会返回维度尽可能低的结果</strong>，因此<code>A[2, ]</code>返回的是向量而非<span
class="math inline">\(1\times n\)</span>的矩阵</p>
<div class="sourceCode" id="cb145"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb145-1"><a href="#cb145-1" aria-hidden="true" tabindex="-1"></a>A <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">16</span>, <span class="dv">4</span>)</span>
<span id="cb145-2"><a href="#cb145-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb145-3"><a href="#cb145-3" aria-hidden="true" tabindex="-1"></a>A[<span class="dv">2</span>, ] <span class="co"># A的第2行</span></span></code></pre></div>
<pre><code>#&gt; [1]  2  6 10 14</code></pre>
<div class="sourceCode" id="cb147"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb147-1"><a href="#cb147-1" aria-hidden="true" tabindex="-1"></a>A[, <span class="sc">-</span><span class="dv">2</span>] <span class="co"># A排除第2列</span></span></code></pre></div>
<pre><code>#&gt;      [,1] [,2] [,3]
#&gt; [1,]    1    9   13
#&gt; [2,]    2   10   14
#&gt; [3,]    3   11   15
#&gt; [4,]    4   12   16</code></pre>
<div class="sourceCode" id="cb149"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb149-1"><a href="#cb149-1" aria-hidden="true" tabindex="-1"></a>A[<span class="dv">3</span>, <span class="dv">2</span>] <span class="co"># A的第3行第2列</span></span></code></pre></div>
<pre><code>#&gt; [1] 7</code></pre>
<div class="sourceCode" id="cb151"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb151-1"><a href="#cb151-1" aria-hidden="true" tabindex="-1"></a>A[<span class="dv">3</span>, <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">4</span>)] <span class="co"># A的第3行第2列和第4列</span></span></code></pre></div>
<pre><code>#&gt; [1]  7 15</code></pre>
<p>矩阵本质上是一个向量，所以适用向量的一维选择器</p>
<div class="sourceCode" id="cb153"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb153-1"><a href="#cb153-1" aria-hidden="true" tabindex="-1"></a>A <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">9</span>, <span class="dv">3</span>)</span>
<span id="cb153-2"><a href="#cb153-2" aria-hidden="true" tabindex="-1"></a>A[A <span class="sc">&gt;</span> <span class="dv">3</span>]</span></code></pre></div>
<pre><code>#&gt; [1] 4 5 6 7 8 9</code></pre>
</div>
<div id="index-1" class="section level3">
<h3>Index</h3>
<p><code>row(A)</code>, <code>col(A)</code>
返回两个矩阵，元素分别为行列下标。</p>
<div class="sourceCode" id="cb155"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb155-1"><a href="#cb155-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 提取下三角矩阵算法</span></span>
<span id="cb155-2"><a href="#cb155-2" aria-hidden="true" tabindex="-1"></a>A <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">16</span>, <span class="dv">4</span>)</span>
<span id="cb155-3"><a href="#cb155-3" aria-hidden="true" tabindex="-1"></a>A</span></code></pre></div>
<pre><code>#&gt;      [,1] [,2] [,3] [,4]
#&gt; [1,]    1    5    9   13
#&gt; [2,]    2    6   10   14
#&gt; [3,]    3    7   11   15
#&gt; [4,]    4    8   12   16</code></pre>
<div class="sourceCode" id="cb157"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb157-1"><a href="#cb157-1" aria-hidden="true" tabindex="-1"></a>A[<span class="fu">row</span>(A) <span class="sc">&lt;</span> <span class="fu">col</span>(A)] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb157-2"><a href="#cb157-2" aria-hidden="true" tabindex="-1"></a>A</span></code></pre></div>
<pre><code>#&gt;      [,1] [,2] [,3] [,4]
#&gt; [1,]    1    0    0    0
#&gt; [2,]    2    6    0    0
#&gt; [3,]    3    7   11    0
#&gt; [4,]    4    8   12   16</code></pre>
</div>
<div id="operation-1" class="section level3">
<h3>Operation</h3>
<div id="转置-ta" class="section level4">
<h4>转置 <code>t(A)</code></h4>
<p>注：向量没有维度概念，向量不是 <span class="math inline">\(n \times
1\)</span>
矩阵。要用<code>t(x)</code>和<code>t(t(x))</code>才能把向量转化为 <span
class="math inline">\(1 \times n\)</span> 和 <span
class="math inline">\(n \times 1\)</span> 的矩阵。</p>
<div class="sourceCode" id="cb159"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb159-1"><a href="#cb159-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">6</span></span>
<span id="cb159-2"><a href="#cb159-2" aria-hidden="true" tabindex="-1"></a><span class="fu">t</span>(x)</span></code></pre></div>
<pre><code>#&gt;      [,1] [,2] [,3] [,4] [,5] [,6]
#&gt; [1,]    1    2    3    4    5    6</code></pre>
<div class="sourceCode" id="cb161"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb161-1"><a href="#cb161-1" aria-hidden="true" tabindex="-1"></a><span class="fu">t</span>(<span class="fu">t</span>(x))</span></code></pre></div>
<pre><code>#&gt;      [,1]
#&gt; [1,]    1
#&gt; [2,]    2
#&gt; [3,]    3
#&gt; [4,]    4
#&gt; [5,]    5
#&gt; [6,]    6</code></pre>
</div>
<div id="矩阵乘法" class="section level4">
<h4>矩阵乘法</h4>
<ul>
<li><code>A%*%B</code>
<ul>
<li>一个例外：若 A 和 B 均为列向量，则运算时自动对 A 转置<a href="#fn1"
class="footnote-ref" id="fnref1"><sup>1</sup></a>，执行
<code>t(A)%*%B</code>，返回 A 与 B 的内积</li>
<li><code>crossprod(A, B)</code> 是 <code>t(A) %*% B</code> 的简写</li>
<li><code>tcrossprod(A, B)</code> 是 <code>A %*% t(B)</code> 的简写</li>
</ul></li>
<li><code>*</code>, 哈达马积</li>
<li><code>kronecker()</code>, 克罗内克积</li>
</ul>
<div class="sourceCode" id="cb163"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb163-1"><a href="#cb163-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 矩阵乘法</span></span>
<span id="cb163-2"><a href="#cb163-2" aria-hidden="true" tabindex="-1"></a>m1 <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">9</span>, <span class="dv">3</span>)</span>
<span id="cb163-3"><a href="#cb163-3" aria-hidden="true" tabindex="-1"></a>m1 <span class="sc">%*%</span> m1 </span></code></pre></div>
<pre><code>#&gt;      [,1] [,2] [,3]
#&gt; [1,]   30   66  102
#&gt; [2,]   36   81  126
#&gt; [3,]   42   96  150</code></pre>
</div>
<div id="对角元素" class="section level4">
<h4>对角元素</h4>
<p><code>diag(A)</code> 返回对角元素组成的向量</p>
</div>
<div id="矩阵的逆线性方程组的解" class="section level4">
<h4>矩阵的逆；线性方程组的解</h4>
<ul>
<li><code>solve(A, B)</code>, 返回<code>A %*% X = B</code>的解。</li>
<li><code>solve(A)</code>,
返回矩阵A的逆，即<code>Solve(A, I)</code></li>
</ul>
</div>
<div id="特征值和特征向量" class="section level4">
<h4>特征值和特征向量</h4>
<p><code>A.eigen &lt;- eigen(A, symmetric=T)</code></p>
</div>
<div id="行列式" class="section level4">
<h4>行列式</h4>
<p><code>det(A)</code></p>
</div>
<div id="提取上下三角矩阵" class="section level4">
<h4>提取上、下三角矩阵</h4>
<p><code>lower.tri(A,diag=T/F)</code>和<code>upper.tri(A,diag=T/F)</code>，这两个函数返回逻辑矩阵</p>
<div class="sourceCode" id="cb165"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb165-1"><a href="#cb165-1" aria-hidden="true" tabindex="-1"></a>A <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">16</span>, <span class="dv">4</span>)</span>
<span id="cb165-2"><a href="#cb165-2" aria-hidden="true" tabindex="-1"></a>A</span></code></pre></div>
<pre><code>#&gt;      [,1] [,2] [,3] [,4]
#&gt; [1,]    1    5    9   13
#&gt; [2,]    2    6   10   14
#&gt; [3,]    3    7   11   15
#&gt; [4,]    4    8   12   16</code></pre>
<div class="sourceCode" id="cb167"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb167-1"><a href="#cb167-1" aria-hidden="true" tabindex="-1"></a>A[<span class="fu">lower.tri</span>(A)] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb167-2"><a href="#cb167-2" aria-hidden="true" tabindex="-1"></a>A</span></code></pre></div>
<pre><code>#&gt;      [,1] [,2] [,3] [,4]
#&gt; [1,]    1    5    9   13
#&gt; [2,]    0    6   10   14
#&gt; [3,]    0    0   11   15
#&gt; [4,]    0    0    0   16</code></pre>
</div>
<div id="正定矩阵的choleskey分解" class="section level4">
<h4>正定矩阵的Choleskey分解</h4>
<p><code>chol(A)</code></p>
<p>即返回满足 <span class="math inline">\(A=P{^T}P\)</span>
的P，其中P为上三角矩阵</p>
</div>
<div id="矩阵合并" class="section level4">
<h4>矩阵合并</h4>
<div class="sourceCode" id="cb169"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb169-1"><a href="#cb169-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rbind</span>(A, B)</span>
<span id="cb169-2"><a href="#cb169-2" aria-hidden="true" tabindex="-1"></a><span class="fu">cbind</span>(A, B)</span>
<span id="cb169-3"><a href="#cb169-3" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">bind_rows</span>(A, B)</span>
<span id="cb169-4"><a href="#cb169-4" aria-hidden="true" tabindex="-1"></a>dplyr<span class="sc">::</span><span class="fu">bind_cols</span>(A, B)</span></code></pre></div>
</div>
<div id="对行列分别操作" class="section level4">
<h4>对行、列分别操作</h4>
<ul>
<li><code>apply(matrix, 1, f)</code> 将行依次传递给 f</li>
<li><code>apply(matrix, 2, f)</code> 将列依次传递给 f</li>
<li><code>rowSums()</code></li>
<li><code>rowMeans()</code></li>
<li><code>colSums()</code></li>
<li><code>colMeans()</code></li>
</ul>
<div class="sourceCode" id="cb170"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb170-1"><a href="#cb170-1" aria-hidden="true" tabindex="-1"></a>A <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">16</span>, <span class="dv">4</span>)</span>
<span id="cb170-2"><a href="#cb170-2" aria-hidden="true" tabindex="-1"></a>A</span></code></pre></div>
<pre><code>#&gt;      [,1] [,2] [,3] [,4]
#&gt; [1,]    1    5    9   13
#&gt; [2,]    2    6   10   14
#&gt; [3,]    3    7   11   15
#&gt; [4,]    4    8   12   16</code></pre>
<div class="sourceCode" id="cb172"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb172-1"><a href="#cb172-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rowSums</span>(A)</span></code></pre></div>
<pre><code>#&gt; [1] 28 32 36 40</code></pre>
<div class="sourceCode" id="cb174"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb174-1"><a href="#cb174-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apply</span>(A, <span class="dv">1</span>, sum)</span></code></pre></div>
<pre><code>#&gt; [1] 28 32 36 40</code></pre>
<div class="sourceCode" id="cb176"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb176-1"><a href="#cb176-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colMeans</span>(A)</span></code></pre></div>
<pre><code>#&gt; [1]  2.5  6.5 10.5 14.5</code></pre>
<div class="sourceCode" id="cb178"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb178-1"><a href="#cb178-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apply</span>(A, <span class="dv">2</span>, mean)</span></code></pre></div>
<pre><code>#&gt; [1]  2.5  6.5 10.5 14.5</code></pre>
</div>
</div>
</div>
<div id="array" class="section level2">
<h2>Array</h2>
<p>张量，或更高维度的向量</p>
<div id="create-2" class="section level3">
<h3>Create</h3>
<p><code>z&lt;-array(vector, dimensions, dimnames = list(v1, v2, v3, ...))</code></p>
</div>
<div id="label-2" class="section level3">
<h3>Label</h3>
<p><code>dimnames() [&lt;-]</code></p>
<div class="sourceCode" id="cb180"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb180-1"><a href="#cb180-1" aria-hidden="true" tabindex="-1"></a>z <span class="ot">&lt;-</span> <span class="fu">array</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">24</span>, <span class="at">dim =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>), <span class="at">dimnames =</span> <span class="fu">list</span>(<span class="fu">c</span>(<span class="st">&quot;r1&quot;</span>, <span class="st">&quot;r2&quot;</span>), <span class="fu">c</span>(<span class="st">&quot;c1&quot;</span>, <span class="st">&quot;c2&quot;</span>, <span class="st">&quot;c3&quot;</span>), <span class="fu">c</span>(<span class="st">&quot;p1&quot;</span>, <span class="st">&quot;p2&quot;</span>, <span class="st">&quot;p3&quot;</span>, <span class="st">&quot;p4&quot;</span>)))</span>
<span id="cb180-2"><a href="#cb180-2" aria-hidden="true" tabindex="-1"></a>z</span></code></pre></div>
<pre><code>#&gt; , , p1
#&gt; 
#&gt;    c1 c2 c3
#&gt; r1  1  3  5
#&gt; r2  2  4  6
#&gt; 
#&gt; , , p2
#&gt; 
#&gt;    c1 c2 c3
#&gt; r1  7  9 11
#&gt; r2  8 10 12
#&gt; 
#&gt; , , p3
#&gt; 
#&gt;    c1 c2 c3
#&gt; r1 13 15 17
#&gt; r2 14 16 18
#&gt; 
#&gt; , , p4
#&gt; 
#&gt;    c1 c2 c3
#&gt; r1 19 21 23
#&gt; r2 20 22 24</code></pre>
<div class="sourceCode" id="cb182"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb182-1"><a href="#cb182-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dimnames</span>(z)</span></code></pre></div>
<pre><code>#&gt; [[1]]
#&gt; [1] &quot;r1&quot; &quot;r2&quot;
#&gt; 
#&gt; [[2]]
#&gt; [1] &quot;c1&quot; &quot;c2&quot; &quot;c3&quot;
#&gt; 
#&gt; [[3]]
#&gt; [1] &quot;p1&quot; &quot;p2&quot; &quot;p3&quot; &quot;p4&quot;</code></pre>
</div>
</div>
<div id="list" class="section level2">
<h2>List</h2>
<p>广义向量，大致相当于 JS
中的对象，本质上是一组<span style = 'color: orangered'><strong>有序</span>键值对</strong>的集合。</p>
<p>遍历list，就是遍历它的键值对。</p>
<p>灵活使用 list 才能成为 R 编程高手。</p>
<div id="create-3" class="section level3">
<h3>Create</h3>
<p><code>list(key1 = value1, key2 = value2, ...)</code></p>
<p>可以简写为 <code>list(value1, value2, ...)</code>，此时使用从 1
开始的自然数列作为缺省的 keys</p>
</div>
<div id="type-1" class="section level3">
<h3>Type</h3>
<ul>
<li><p><code>is.list()</code> 判断</p></li>
<li><p><code>as.list()</code> 转换</p></li>
<li><p><code>unlist()</code> 将列表强制转换为向量</p>
<ul>
<li>按分量顺序依次排列，强制不再嵌套！</li>
<li>自动保证同样的数据类型。比如，强制转换混合了数值和文本的列表，会得到字符串向量</li>
</ul></li>
</ul>
</div>
<div id="label-3" class="section level3">
<h3>Label</h3>
<p><code>names(list) [&lt;-]</code></p>
</div>
<div id="subset-2" class="section level3">
<h3>Subset</h3>
<p>第一种语法，用<code>[]</code>符号，里面可以是 index/condition/key</p>
<p>第二种语法，用 `[`() 或 <code>magrittr::extract()</code>函数</p>
<div class="sourceCode" id="cb184"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb184-1"><a href="#cb184-1" aria-hidden="true" tabindex="-1"></a>l <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="st">&quot;a&quot;</span>, <span class="dv">2</span>, <span class="cn">TRUE</span>)</span>
<span id="cb184-2"><a href="#cb184-2" aria-hidden="true" tabindex="-1"></a>l[<span class="dv">1</span>]</span></code></pre></div>
<pre><code>#&gt; [[1]]
#&gt; [1] &quot;a&quot;</code></pre>
<div class="sourceCode" id="cb186"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb186-1"><a href="#cb186-1" aria-hidden="true" tabindex="-1"></a><span class="st">`</span><span class="at">[</span><span class="st">`</span>(l, <span class="dv">1</span>)</span></code></pre></div>
<pre><code>#&gt; [[1]]
#&gt; [1] &quot;a&quot;</code></pre>
<div class="sourceCode" id="cb188"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb188-1"><a href="#cb188-1" aria-hidden="true" tabindex="-1"></a>magrittr<span class="sc">::</span><span class="fu">extract</span>(l, <span class="dv">1</span>)</span></code></pre></div>
<pre><code>#&gt; [[1]]
#&gt; [1] &quot;a&quot;</code></pre>
</div>
<div id="extract" class="section level3">
<h3>Extract</h3>
<p>第一种语法，用<code>[[]]</code>符号，里面可以是
index/condition/key</p>
<p>第二种语法，用<code>$</code>符号+key，<code>list$key</code>，是<code>list[['key']]</code>的简写</p>
<p>第三种语法，用 `[[`() 或 <code>magrittr::extract2()</code>函数</p>
<div class="sourceCode" id="cb190"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb190-1"><a href="#cb190-1" aria-hidden="true" tabindex="-1"></a>l[[<span class="dv">1</span>]]</span></code></pre></div>
<pre><code>#&gt; [1] &quot;a&quot;</code></pre>
<div class="sourceCode" id="cb192"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb192-1"><a href="#cb192-1" aria-hidden="true" tabindex="-1"></a><span class="st">`</span><span class="at">[[</span><span class="st">`</span>(l, <span class="dv">1</span>)</span></code></pre></div>
<pre><code>#&gt; [1] &quot;a&quot;</code></pre>
<div class="sourceCode" id="cb194"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb194-1"><a href="#cb194-1" aria-hidden="true" tabindex="-1"></a>magrittr<span class="sc">::</span><span class="fu">extract2</span>(l, <span class="dv">1</span>)</span></code></pre></div>
<pre><code>#&gt; [1] &quot;a&quot;</code></pre>
</div>
<div id="operation-2" class="section level3">
<h3>Operation</h3>
<div id="添加元素" class="section level4">
<h4>添加元素</h4>
<p>第一种语法，直接赋值。</p>
<p>第二种语法，<code>append(list, value, after = length(list))</code>，默认加到列表的末尾。但若插入的元素本身是一个列表（很多对象本质上都是一个列表），则会<strong>破坏层级结构，将所有的元素依次插入到前一个列表</strong>。所以若要保存列表的层级结构，还是第一种语法更保险。</p>
<div class="sourceCode" id="cb196"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb196-1"><a href="#cb196-1" aria-hidden="true" tabindex="-1"></a>l[[<span class="dv">4</span>]] <span class="ot">&lt;-</span> <span class="fu">data.table</span>(<span class="at">x =</span> <span class="dv">1</span>, <span class="at">y =</span> <span class="dv">2</span>)</span>
<span id="cb196-2"><a href="#cb196-2" aria-hidden="true" tabindex="-1"></a>l<span class="sc">$</span>z <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;one&quot;</span>, <span class="st">&quot;two&quot;</span>, <span class="st">&quot;three&quot;</span>)</span>
<span id="cb196-3"><a href="#cb196-3" aria-hidden="true" tabindex="-1"></a>l</span></code></pre></div>
<pre><code>#&gt; [[1]]
#&gt; [1] &quot;a&quot;
#&gt; 
#&gt; [[2]]
#&gt; [1] 2
#&gt; 
#&gt; [[3]]
#&gt; [1] TRUE
#&gt; 
#&gt; [[4]]
#&gt;    x y
#&gt; 1: 1 2
#&gt; 
#&gt; $z
#&gt; [1] &quot;one&quot;   &quot;two&quot;   &quot;three&quot;</code></pre>
<div class="sourceCode" id="cb198"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb198-1"><a href="#cb198-1" aria-hidden="true" tabindex="-1"></a>l <span class="ot">&lt;-</span> <span class="fu">append</span>(l, <span class="dv">6</span>)</span>
<span id="cb198-2"><a href="#cb198-2" aria-hidden="true" tabindex="-1"></a>l</span></code></pre></div>
<pre><code>#&gt; [[1]]
#&gt; [1] &quot;a&quot;
#&gt; 
#&gt; [[2]]
#&gt; [1] 2
#&gt; 
#&gt; [[3]]
#&gt; [1] TRUE
#&gt; 
#&gt; [[4]]
#&gt;    x y
#&gt; 1: 1 2
#&gt; 
#&gt; $z
#&gt; [1] &quot;one&quot;   &quot;two&quot;   &quot;three&quot;
#&gt; 
#&gt; [[6]]
#&gt; [1] 6</code></pre>
<div class="sourceCode" id="cb200"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb200-1"><a href="#cb200-1" aria-hidden="true" tabindex="-1"></a>l <span class="ot">&lt;-</span> <span class="fu">append</span>(l, <span class="fu">list</span>(<span class="dv">7</span>, <span class="dv">8</span>))</span>
<span id="cb200-2"><a href="#cb200-2" aria-hidden="true" tabindex="-1"></a>l</span></code></pre></div>
<pre><code>#&gt; [[1]]
#&gt; [1] &quot;a&quot;
#&gt; 
#&gt; [[2]]
#&gt; [1] 2
#&gt; 
#&gt; [[3]]
#&gt; [1] TRUE
#&gt; 
#&gt; [[4]]
#&gt;    x y
#&gt; 1: 1 2
#&gt; 
#&gt; $z
#&gt; [1] &quot;one&quot;   &quot;two&quot;   &quot;three&quot;
#&gt; 
#&gt; [[6]]
#&gt; [1] 6
#&gt; 
#&gt; [[7]]
#&gt; [1] 7
#&gt; 
#&gt; [[8]]
#&gt; [1] 8</code></pre>
<div class="sourceCode" id="cb202"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb202-1"><a href="#cb202-1" aria-hidden="true" tabindex="-1"></a>l[[<span class="dv">9</span>]] <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="dv">9</span>, <span class="dv">10</span>)</span>
<span id="cb202-2"><a href="#cb202-2" aria-hidden="true" tabindex="-1"></a>l</span></code></pre></div>
<pre><code>#&gt; [[1]]
#&gt; [1] &quot;a&quot;
#&gt; 
#&gt; [[2]]
#&gt; [1] 2
#&gt; 
#&gt; [[3]]
#&gt; [1] TRUE
#&gt; 
#&gt; [[4]]
#&gt;    x y
#&gt; 1: 1 2
#&gt; 
#&gt; $z
#&gt; [1] &quot;one&quot;   &quot;two&quot;   &quot;three&quot;
#&gt; 
#&gt; [[6]]
#&gt; [1] 6
#&gt; 
#&gt; [[7]]
#&gt; [1] 7
#&gt; 
#&gt; [[8]]
#&gt; [1] 8
#&gt; 
#&gt; [[9]]
#&gt; [[9]][[1]]
#&gt; [1] 9
#&gt; 
#&gt; [[9]][[2]]
#&gt; [1] 10</code></pre>
<p>添加元素的最佳写法，无需知道 index</p>
<div class="sourceCode" id="cb204"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb204-1"><a href="#cb204-1" aria-hidden="true" tabindex="-1"></a>l <span class="ot">&lt;-</span> <span class="fu">list</span>(...)</span>
<span id="cb204-2"><a href="#cb204-2" aria-hidden="true" tabindex="-1"></a>l[[<span class="fu">length</span>(l) <span class="sc">+</span> <span class="dv">1</span>]] <span class="ot">&lt;-</span> new_element</span></code></pre></div>
</div>
<div id="删除元素" class="section level4">
<h4>删除元素</h4>
<p>赋值为 <code>NULL</code> 即为删除</p>
</div>
</div>
</div>
<div id="data.frame" class="section level2">
<h2>Data.Frame</h2>
<p>data.frame 是长度相同的列向量组成的 List（可以按照这个思路去构建 JS
中的数据框）。R 原生支持向量化操作，因此 R 操作数据框有先天优势。</p>
<p>data.frame 可以像矩阵一样，以二维表方式呈现。因此，<strong>R
中操作矩阵的一些函数兼容了 data.frame
对象</strong>，即可以像操作矩阵一样操作 data.frame</p>
<div id="create-4" class="section level3">
<h3>Create</h3>
<p><code>data.frame(var1 = col1, var2 = col2, …, row.names = , check.names = T, stringsAsFactors = F)</code></p>
<ol style="list-style-type: decimal">
<li><p>R 4.0 之前，构建R的原生数据框时，参数 stringsAsFactors 的默认值为
TRUE，字符向量默认被转换成因子（因子的 level
相比字符串节省储存空间），数据类型变为
numeric，无法再用字符串函数处理。4.0 后更改了这一默认值。</p></li>
<li><p>check.names 默认为 TRUE，建立数据框时默认使用函数
<code>make.names()</code> 检查变量名，将 R
不允许出现在变量名中的特殊字符转换为<code>.</code></p>
<ol style="list-style-type: decimal">
<li>若选 FALSE，会最大限度地保留原本的列名。但访问这些在 R
中本为非法的列时，必须用反引号将列名括起来。</li>
</ol></li>
</ol>
</div>
<div id="type-2" class="section level3">
<h3>Type</h3>
<ul>
<li><p><code>as.data.frame()</code> 将矩阵、列表强制转换为数据框</p>
<ul>
<li>如果矩阵已有行、列名，会在转换过程中保留</li>
</ul></li>
</ul>
</div>
<div id="label-4" class="section level3">
<h3>Label</h3>
<p>适用于 matrix
的<code>rownames()</code>和<code>colnames()</code>也适用于数据框。</p>
<div class="sourceCode" id="cb205"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb205-1"><a href="#cb205-1" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">id =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, <span class="at">lower =</span> letters[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>], <span class="at">upper =</span> LETTERS[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>])</span>
<span id="cb205-2"><a href="#cb205-2" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(a)</span></code></pre></div>
<pre><code>#&gt; [1] &quot;list&quot;</code></pre>
<div class="sourceCode" id="cb207"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb207-1"><a href="#cb207-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(a)</span></code></pre></div>
<pre><code>#&gt; NULL</code></pre>
<div class="sourceCode" id="cb209"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb209-1"><a href="#cb209-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(a)</span></code></pre></div>
<pre><code>#&gt; NULL</code></pre>
<div class="sourceCode" id="cb211"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb211-1"><a href="#cb211-1" aria-hidden="true" tabindex="-1"></a>b <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(a)</span>
<span id="cb211-2"><a href="#cb211-2" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(b)</span></code></pre></div>
<pre><code>#&gt; [1] &quot;data.frame&quot;</code></pre>
<div class="sourceCode" id="cb213"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb213-1"><a href="#cb213-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(b)</span></code></pre></div>
<pre><code>#&gt; [1] &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;4&quot; &quot;5&quot;</code></pre>
<div class="sourceCode" id="cb215"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb215-1"><a href="#cb215-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(b)</span></code></pre></div>
<pre><code>#&gt; [1] &quot;id&quot;    &quot;lower&quot; &quot;upper&quot;</code></pre>
</div>
<div id="subset-3" class="section level3">
<h3>Subset</h3>
<p>既可以用列表风格的<code>[]</code>，也可以用矩阵风格的<code>[rowSelector, columnSelector]</code></p>
<ol style="list-style-type: decimal">
<li>矩阵风格选择器的好处在于，可以灵活地筛选行</li>
</ol>
<div class="sourceCode" id="cb217"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb217-1"><a href="#cb217-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb217-2"><a href="#cb217-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">id =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>,</span>
<span id="cb217-3"><a href="#cb217-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">lower =</span> letters[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>],</span>
<span id="cb217-4"><a href="#cb217-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">upper =</span> LETTERS[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>]</span>
<span id="cb217-5"><a href="#cb217-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb217-6"><a href="#cb217-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-7"><a href="#cb217-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 矩阵风格的选择器</span></span>
<span id="cb217-8"><a href="#cb217-8" aria-hidden="true" tabindex="-1"></a>df[df<span class="sc">$</span>id <span class="sc">&gt;</span> <span class="dv">3</span>, <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">3</span>)]</span></code></pre></div>
<pre><code>#&gt;   lower upper
#&gt; 4     d     D
#&gt; 5     e     E</code></pre>
<ol start="2" style="list-style-type: decimal">
<li>用矩阵风格的二维选择器时，跟矩阵一样会尽可能降维。如果纵向只取了一列，则返回值会自动简化为向量，而非数据框。若要避免降维，保留数据框结构，可以结合两种风格的选择器，也可以增加选项<code>drop = FALSE</code>（推荐，利于代码风格的统一）。</li>
</ol>
<div class="sourceCode" id="cb219"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb219-1"><a href="#cb219-1" aria-hidden="true" tabindex="-1"></a>df[<span class="dv">2</span><span class="sc">:</span><span class="dv">3</span>, <span class="dv">2</span>]</span></code></pre></div>
<pre><code>#&gt; [1] &quot;b&quot; &quot;c&quot;</code></pre>
<div class="sourceCode" id="cb221"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb221-1"><a href="#cb221-1" aria-hidden="true" tabindex="-1"></a>df[<span class="dv">2</span><span class="sc">:</span><span class="dv">3</span>, <span class="dv">2</span>, drop <span class="ot">=</span> <span class="cn">FALSE</span>]</span></code></pre></div>
<pre><code>#&gt;   lower
#&gt; 2     b
#&gt; 3     c</code></pre>
<div class="sourceCode" id="cb223"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb223-1"><a href="#cb223-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 混合两种选择器</span></span>
<span id="cb223-2"><a href="#cb223-2" aria-hidden="true" tabindex="-1"></a>df[<span class="dv">2</span><span class="sc">:</span><span class="dv">3</span>, ][<span class="dv">2</span>]</span></code></pre></div>
<pre><code>#&gt;   lower
#&gt; 2     b
#&gt; 3     c</code></pre>
<ol start="3" style="list-style-type: decimal">
<li><code>subset(df, conditions, select)</code></li>
</ol>
<p><strong>函数而非操作符，便利 Pipeline 的连续操作</strong></p>
<p>第一个参数为数据集，第二个参数选择符合条件的行，第三个参数select选择列，可以在列名前加’-’删除之</p>
<div class="sourceCode" id="cb225"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb225-1"><a href="#cb225-1" aria-hidden="true" tabindex="-1"></a><span class="fu">subset</span>(leadership, age <span class="sc">&gt;=</span> <span class="dv">35</span> <span class="sc">|</span> age <span class="sc">&lt;</span> <span class="dv">24</span>, <span class="at">select =</span> <span class="fu">c</span>(q1, q2, q3, q4))</span></code></pre></div>
</div>
<div id="extract-1" class="section level3">
<h3>Extract</h3>
<ul>
<li><code>df$key</code></li>
<li><code>df[[index]]</code></li>
<li><code>df[[colname]]</code></li>
<li>矩阵风格选择器，选择一列</li>
</ul>
<div class="sourceCode" id="cb226"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb226-1"><a href="#cb226-1" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>lower</span></code></pre></div>
<pre><code>#&gt; [1] &quot;a&quot; &quot;b&quot; &quot;c&quot; &quot;d&quot; &quot;e&quot;</code></pre>
<div class="sourceCode" id="cb228"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb228-1"><a href="#cb228-1" aria-hidden="true" tabindex="-1"></a>df[[<span class="dv">2</span>]]</span></code></pre></div>
<pre><code>#&gt; [1] &quot;a&quot; &quot;b&quot; &quot;c&quot; &quot;d&quot; &quot;e&quot;</code></pre>
<div class="sourceCode" id="cb230"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb230-1"><a href="#cb230-1" aria-hidden="true" tabindex="-1"></a>df[[<span class="st">&quot;lower&quot;</span>]]</span></code></pre></div>
<pre><code>#&gt; [1] &quot;a&quot; &quot;b&quot; &quot;c&quot; &quot;d&quot; &quot;e&quot;</code></pre>
<div class="sourceCode" id="cb232"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb232-1"><a href="#cb232-1" aria-hidden="true" tabindex="-1"></a>df[, <span class="dv">2</span>]</span></code></pre></div>
<pre><code>#&gt; [1] &quot;a&quot; &quot;b&quot; &quot;c&quot; &quot;d&quot; &quot;e&quot;</code></pre>
</div>
<div id="operation-3" class="section level3">
<h3>Operation</h3>
<p>对数据框的操作是 R 最核心的内容，故单独说明。</p>
</div>
</div>
<div id="tibble" class="section level2">
<h2>tibble</h2>
<p>数据框的替代类型。</p>
<p>在R Markdown里两者区别不大，但在console中，区别很明显的：</p>
<ul>
<li>列出了变量的类型</li>
<li>只列出10行</li>
<li>只列出有限的列数（与屏幕适应的）</li>
<li>高亮 <code>NAs</code></li>
</ul>
<div id="create-5" class="section level3">
<h3>Create</h3>
<p>tibble
有一个很突出的优点：创建时，写在后面的变量可以立即使用前面的变量</p>
<div class="sourceCode" id="cb234"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb234-1"><a href="#cb234-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 这种写法如果用 data.table，会报错，表示不知道 b 定义式中的 a 是什么</span></span>
<span id="cb234-2"><a href="#cb234-2" aria-hidden="true" tabindex="-1"></a><span class="fu">tibble</span>(</span>
<span id="cb234-3"><a href="#cb234-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">a =</span> <span class="fu">runif</span>(<span class="dv">1000</span>, <span class="dv">0</span>, <span class="dv">5</span>),</span>
<span id="cb234-4"><a href="#cb234-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">b =</span> <span class="dv">4</span> <span class="sc">+</span> <span class="fu">rnorm</span>(<span class="dv">1000</span>, <span class="at">mean =</span> <span class="fl">3.2</span> <span class="sc">*</span> a, <span class="at">sd =</span> <span class="dv">1</span>)</span>
<span id="cb234-5"><a href="#cb234-5" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code></pre></div>
<pre><code>#&gt; # A tibble: 6 x 2
#&gt;       a     b
#&gt;   &lt;dbl&gt; &lt;dbl&gt;
#&gt; 1 2.21  12.6 
#&gt; 2 0.721  4.78
#&gt; 3 4.88  20.0 
#&gt; 4 2.98  14.3 
#&gt; 5 0.973  6.06
#&gt; 6 0.682  6.92</code></pre>
<p>Create tibble 时，字符向量不会被自动转换为因子</p>
<div class="sourceCode" id="cb236"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb236-1"><a href="#cb236-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">id =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="at">lower =</span> letters[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>])</span>
<span id="cb236-2"><a href="#cb236-2" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> <span class="fu">class</span>()</span></code></pre></div>
<pre><code>#&gt; [1] &quot;tbl_df&quot;     &quot;tbl&quot;        &quot;data.frame&quot;</code></pre>
<p>数据量不大时，可以用<code>tribble()</code>创建</p>
<div class="sourceCode" id="cb238"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb238-1"><a href="#cb238-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">tribble</span>(</span>
<span id="cb238-2"><a href="#cb238-2" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span>x, <span class="sc">~</span>y, <span class="sc">~</span>z,</span>
<span id="cb238-3"><a href="#cb238-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;a&quot;</span>, <span class="dv">2</span>, <span class="fl">3.6</span>,</span>
<span id="cb238-4"><a href="#cb238-4" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;b&quot;</span>, <span class="dv">1</span>, <span class="fl">8.5</span></span>
<span id="cb238-5"><a href="#cb238-5" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
</div>
<div id="transfer" class="section level3">
<h3>Transfer</h3>
<p><code>as_tibble()</code></p>
</div>
<div id="subset-4" class="section level3">
<h3>Subset</h3>
<p>subset 时，即使选取单行或单列，结果也不会降维，仍然是 tibble</p>
</div>
<div id="operation-4" class="section level3">
<h3>Operation</h3>
<div class="sourceCode" id="cb239"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb239-1"><a href="#cb239-1" aria-hidden="true" tabindex="-1"></a><span class="fu">add_column</span>(df, <span class="at">w =</span> <span class="dv">0</span><span class="sc">:</span><span class="dv">1</span>) <span class="co"># 增加一列</span></span></code></pre></div>
<pre><code>#&gt; # A tibble: 2 x 4
#&gt;   x         y     z     w
#&gt;   &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt;
#&gt; 1 a         2   3.6     0
#&gt; 2 b         1   8.5     1</code></pre>
<div class="sourceCode" id="cb241"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb241-1"><a href="#cb241-1" aria-hidden="true" tabindex="-1"></a><span class="fu">add_row</span>(df, <span class="at">x =</span> <span class="st">&quot;c&quot;</span>, <span class="at">y =</span> <span class="dv">9</span>, <span class="at">z =</span> <span class="fl">2.1</span>) <span class="co"># 增加一行</span></span></code></pre></div>
<pre><code>#&gt; # A tibble: 3 x 3
#&gt;   x         y     z
#&gt;   &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt;
#&gt; 1 a         2   3.6
#&gt; 2 b         1   8.5
#&gt; 3 c         9   2.1</code></pre>
<div class="sourceCode" id="cb243"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb243-1"><a href="#cb243-1" aria-hidden="true" tabindex="-1"></a><span class="fu">add_row</span>(df, <span class="at">x =</span> <span class="st">&quot;c&quot;</span>, <span class="at">y =</span> <span class="dv">9</span>, <span class="at">z =</span> <span class="fl">2.1</span>, <span class="at">.before =</span> <span class="dv">2</span>) <span class="co"># 在第二行，增加一行</span></span></code></pre></div>
<pre><code>#&gt; # A tibble: 3 x 3
#&gt;   x         y     z
#&gt;   &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt;
#&gt; 1 a         2   3.6
#&gt; 2 c         9   2.1
#&gt; 3 b         1   8.5</code></pre>
<ol style="list-style-type: decimal">
<li><code>print(tibble, n = 10, width = Inf)</code>可以自定义打印的长度和宽度。默认只显示10行，避免输出太长.
<ol style="list-style-type: decimal">
<li>也可以用<code>options(tibble.print_max=n, tibble.print_min=m)</code>进行全局性设置：如果多于m行，则最多打印出n行。</li>
</ol></li>
<li>对于很大的数据表，也可以用<code>%&gt;% View()</code>或<code>%T&gt;% View()</code>查看</li>
<li>tibble
不支持行名。<code>tibble::rownames_to_column(df, var = "rowname")</code>可以将行名转化为一列，<code>tibble::rowid_to_column(df, var = "rowid")</code>将行
index 转化为一列。</li>
</ol>
</div>
</div>
<div class="footnotes footnotes-end-of-document">
<hr />
<ol>
<li id="fn1"><p>若不转置，这个运算根本无法进行。<a href="#fnref1"
class="footnote-back">↩︎</a></p></li>
</ol>
</div>

<div id="rmd-source-code">LS0tDQp0aXRsZTogIue7hOWQiOWei+aVsOaNrue7k+aehCINCnN1YnRpdGxlOiAnVmVjdG9yLCBNYXRyaXgsIExpc3QgYW5kIERhdGFmcmFtZScNCmF1dGhvcjogIkh1bW9vbiINCmRhdGU6ICJgciBTeXMuRGF0ZSgpYCINCm91dHB1dDogaHRtbF9kb2N1bWVudA0KZG9jdW1lbnRjbGFzczogY3RleGFydA0KY2xhc3NvcHRpb246IGh5cGVycmVmLA0KLS0tDQoNCmBgYHtyIHNldHVwLCBpbmNsdWRlID0gRkFMU0V9DQpzb3VyY2UoIi4uL1JtYXJrZG93bi10ZW1wbGF0ZS9SbWFya2Rvd25fY29uZmlnLlIiKQ0KDQojIyBnbG9iYWwgb3B0aW9ucyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0Ka25pdHI6Om9wdHNfY2h1bmskc2V0KA0KICB3aWR0aCA9IGNvbmZpZyR3aWR0aCwNCiAgZmlnLndpZHRoID0gY29uZmlnJGZpZy53aWR0aCwNCiAgZmlnLmFzcCA9IGNvbmZpZyRmaWcuYXNwLA0KICBvdXQud2lkdGggPSBjb25maWckb3V0LndpZHRoLA0KICBmaWcuYWxpZ24gPSBjb25maWckZmlnLmFsaWduLA0KICBmaWcucGF0aCA9IGNvbmZpZyRmaWcucGF0aCwNCiAgZmlnLnNob3cgPSBjb25maWckZmlnLnNob3csDQogIHdhcm4gPSBjb25maWckd2FybiwNCiAgd2FybmluZyA9IGNvbmZpZyR3YXJuaW5nLA0KICBtZXNzYWdlID0gY29uZmlnJG1lc3NhZ2UsDQogIGVjaG8gPSBjb25maWckZWNobywNCiAgZXZhbCA9IGNvbmZpZyRldmFsLA0KICB0aWR5ID0gY29uZmlnJHRpZHksDQogIGNvbW1lbnQgPSBjb25maWckY29tbWVudCwNCiAgY29sbGFwc2UgPSBjb25maWckY29sbGFwc2UsDQogIGNhY2hlID0gY29uZmlnJGNhY2hlLA0KICBjYWNoZS5jb21tZW50cyA9IGNvbmZpZyRjYWNoZS5jb21tZW50cywNCiAgYXV0b2RlcCA9IGNvbmZpZyRhdXRvZGVwDQopDQoNCiMjIHVzZSBuZWNlc3NhcnkgcGFja2FnZXMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQpsaWJyYXJ5KHRpZHl2ZXJzZSkNCmxpYnJhcnkoZGF0YS50YWJsZSkNCmxpYnJhcnkobWFncml0dHIpDQpsaWJyYXJ5KHBsb3RseSkNCmxpYnJhcnkoaHRtbHdpZGdldHMpDQpgYGANCg0KDQoNCiMjIOe7hOWQiOWei+aVsOaNrue7k+aehOeahOWIhuexuw0KDQoxLiDlkJHph4/jgIHnn6npmLXjgIHmlbDnu4Tpg73opoHmsYLljZXkuIDmlbDmja7nsbvlnosgKGhvbW9nZW5lb3VzIGRhdGEgdHlwZXMp44CC5qC55Z+65pivIGBjKClgIOWQkemHjw0KMi4g5YiX6KGo44CB5pWw5o2u5qGG5Y+v5Lul6KOF6L295LiN5ZCM5pWw5o2u57G75Z6LIChoZXRlcm9nZW5lb3VzIGRhdGEgdHlwZXMp44CC5qC55Z+65pivYCBsaXN0KClgIOWIl+ihqA0KICAgMS4g5YiX6KGo5o+Q6auY5LqG5a2Y5YKo55qE54G15rS75oCn77yM5L2G6ZmN5L2O5LqG5a2Y5YKo5pWI546H5ZKM6L+Q6KGM5pWI546H44CCDQogICAyLiDmlbDmja7moYbmmK/kuIDnp43nibnmrornmoTliJfooajjgIINCjMuIOS4jeWQjOexu+Wei+eahOaVsOaNrue7k+WQiOaIkOS4gOS4quWQkemHj+aXtu+8jOS8muiiq+W8uuWItui9rOaNouS4uuWFvOWuueeahOOAgeabtOeBtea0u+eahOaVsOaNruexu+Weiw0KICAgMS4g5LiA6Iis6aG65bqP5Li677yabG9naWNhbDxpbnRlZ2VyPG51bWVyaWM8Y29tcGxleDxjaGFyYWN0ZXI8bGlzdA0KNC4g6L+Z5Lik5aSn57G755qEIGNvbW1vbiDlsZ7mgKfvvJoNCiAgIDEuIOexu+Wei++8jGB0eXBlb2YoKWANCiAgIDIuIOmVv+W6pu+8jGBsZW5ndGgoKWANCiAgIDMuIOWxnuaAp++8jGBhdHRyaWJ1dGVzKClg77yM5Y2z6ZmE5Yqg55qE5Lu75oSPIG1ldGFkYXRhDQoNCg0KIyMgVmVjdG9yDQoNCioq5rOo5oSPKioNCg0KMS4gIFLkuK3ml6DmoIfph4/vvIzmoIfph4/ooqvpu5jorqTkuLrplb/luqbkuLox55qE5ZCR6YeP77yM5omA5Lul5Zyo5o6n5Yi25Y+w5pi+56S65LiA5Liq5pWw5pe277yM5YmN6Z2i5LuN5Lya5pyJ6KGo56S65ZCR6YeP57u05bqm55qEIGBbMV1gDQoyLiAgUuS4reeahOWQkemHj+m7mOiupOS4uuWIl+WQkemHj++8jOS4jeWtmOWcqOihjOWQkemHj+OAguWvueWIl+WQkemHj+i9rOe9ru+8jOW+l+WIsOeahOaYr+S4gOS4qiQxXHRpbWVzIG4k55qE55+p6Zi1DQozLiBS5Lit55qE5Z+656GA6L+Q566X6YO95piv5ZCR6YeP5YyW55qEDQoNCiMjIyDmlbDmja7nsbvlnosNCg0K55Sx5LqO5ZCR6YeP5pivIFIg5Lit5pyA5Z+65pys55qE5pWw5o2u57G75Z6L77yIUiDkuK3ml6DmoIfph4/vvInvvIzlm6DmraTlkJHph4/moLnmja7lhYPntKDnmoTmlbDmja7nsbvlnovooqvliIbkuLrlh6Dnp43vvJoNCg0KIyMjIyBsb2dpY2FsDQoNCiMjIyMgbnVtZXJpYw0KDQrnu5/np7DmlbDlgLzlnosNCg0KLSDmlbTmlbDvvIxpbnRlZ2VyDQotIOWPjOeyvuW6pua1rueCueaVsO+8jGRvdWJsZQ0KDQrkuInnp43nibnmrormg4XlhrXvvJoNCg0KYGBge3J9DQpleHAoMTAwMCkgIyBJbmYg5q2j5peg56m3DQotMTAgLyAwICMgLUluZiDotJ/ml6DnqbcNCmV4cCgxMDAwKSAvIGV4cCg5OTApICMgTmFOLCBub3QgYSBudW1iZXINCmBgYA0KDQoxLiBSIOS4reaVsOWtl+eahOS4iumZkOS4uiAxLjgqMTBeMzjvvIzotoXov4fov5nkuKrop4TmqKHlsLHkvJrlh7rnjrAgSW5mIA0KMi4g5Y+q6KaB6KGo6L6+5byP5Lit5pyJ5q2j6LSf5peg56m355qE5a2Q6aG55Ye6546w77yM57uT5p6c5bCx5b6I5Y+v6IO95Li6IEluZiwgLUluZiwgTmFODQoNCiMjIyMgY2hhcmFjdG9yDQoNCg0KIyMjIyBgTlVMTGDlkoxgTkFgDQoNCk5B77yM6ZW/5bqm5Li6MeeahOmAu+i+keWQkemHj++8jOihqOekuuaVsOaNrueahOe8uuWkseWAvA0KDQpOVUxM77yM6Zu26ZW/5ZCR6YeP77yM5LiA6Iis6KGo56S65Y+C5pWw5pyq6KKr6LWL5YC877yM5Lul5Y+K5Ye95pWw5rKh5pyJ5piO56Gu6L+U5Zue5YC85pe255qE6L+U5ZueDQoNCiMjIyBDcmVhdGUNCg0KIyMjIyBgYygyLCA0LCA2KWANCg0K5Yib5bu65ZKM5ou85o6l5ZCR6YeP77yM5YW25LuW6K+t6KiA5LiA6Iis55SoYFtdYA0KDQrlkJHph4/lrprkuYnml7bljbPkvb/ltYzlpZfvvIzkuZ/kvJrooqvoh6rliqjlsZXlvIANCg0KIyMjIyBgbTpuYA0KDQrov57nu63mlbTmlbDlkJHph48NCg0KIyMjIyBgc2VxKGZyb20sIHRvLCBieT0xLCBsZW5ndGgub3V0KWANCg0K562J5beu5pWw5YiX44CC5Zub5Liq5Y+C5pWw5pyJ5LiJ5Liq5Y2z5Y+v44CCYnnkuLrmraXplb/vvIxsZW5ndGgub3V0IOS4uuWQkemHjyBzaXplDQoNCiMjIyMgYHNlcV9sZW4obilgDQoNCuetieS7t+S6jmAxOm5gDQoNCiMjIyMgYHNlcV9hbG9uZyh4KWANCg0K562J5Lu35LqOIGBsZW5ndGgoeCkgJT4lIHNlcV9sZW4oKWANCg0KYGBge3J9DQpzZXFfYWxvbmcoTEVUVEVSUykNCmBgYA0KDQojIyMjIGByZXAoeCwgdGltZXMsIGVhY2gpYA0KDQrlhYPntKDlpI3nlKjvvIzph43lpI3lr7nosaF4IHRpbWVz5qyh44CCDQoNCuiLpXjkuI50aW1lc+mDveaYr+WQkemHj+S4lOmVv+W6puS4gOiHtO+8jOWImeS4uuWvueW6lOWFg+e0oOmHjeWkjeWvueW6lOasoeaVsOOAgg0KDQojIyMjIGBudW1lcmljKE4pYCwgYGxvZ2ljYWwoTilgDQoNCueUn+aIkOmVv+W6puS4uiBOLCDmr4/pobnkuLogMCDnmoTnibnlrprnsbvlnovlkJHph48NCg0KIyMjIyBgdmVjdG9yKCdkb3VibGUnLCBOKWANCg0K55Sf5oiQ6ZW/5bqm5Li6TueahOeJueWumuexu+Wei+WQkemHjw0KDQpgYGB7cn0NCnJlcCgxOjMsIDIpDQpyZXAoMTozLCBlYWNoID0gMikNCnJlcCgxOjMsIHJlcCgyLCAxKSkgIyDljbNyZXAoMTozLCAyKQ0KcmVwKDE6MywgcmVwKDIsIDMpKSAjIOWNs3JlcCgxOjMsIGMoMiwgMiwgMikpDQpyZXAoMTozLCBjKDIsIDQsIDEpKQ0KDQp5IDwtIG51bWVyaWMoNikgKyAxICMg5YWoIDEg5ZCR6YeP55qE5Y+m5LiA56eN5YaZ5rOVDQp5DQp6IDwtIGxvZ2ljYWwoNykNCnoNCncgPC0gY2hhcmFjdGVyKDIpDQp3DQp3IDwtIGModywgImEiKQ0Kdw0KYGBgDQoNCiMjIyBUeXBlDQoNCi0gICBgY2xhc3MoKWAg5p+l55yL57G75Z6LDQotICAgYGlzLiooKWAg5Yik5pat57G75Z6LDQotICAgYGFzLiooKWAg6L2s5o2i57G75Z6LDQoNCmBgYHtyfQ0KY2xhc3MoMTo1KQ0KDQpjbGFzcyhjKFQsIEYsIFQpKQ0KDQppcy5jaGFyYWN0ZXIoYygiaCIsICJlIiwgImwiLCAibCIsICJvIikpDQoNCmFzLmNoYXJhY3RlcigxOjUpDQpgYGANCg0KIyMjIFNpemUNCg0KYGxlbmd0aCgpYA0KDQpgYGB7cn0NCmxlbmd0aCh3KQ0KYGBgDQoNCiMjIyBMYWJlbA0KDQotICAgYG5hbWVzKHgpYO+8jOi/lOWbnuagh+etvue7hOaIkOeahOWQkemHjw0KLSAgIGBuYW1lcyh4KSA8LSBjKC4uLilg77yM5qCH562+6LWL5YC8DQoNCiMjIyBTdWJzZXQNCg0KIyMjIyDpgInmi6nlmahgW11g5ZKM5o+Q5Y+W5ZmoYFtbXV1gDQoNCmBbXWDkuLrlrZDpm4bpgInmi6nlmajvvIzov5Tlm57nmoTmmK/ljp/mlbDmja7nmoTkuIDkuKrliIfniYfvvIzkuI3mlLnlj5jmlbDmja7nu5PmnoTvvIwqKuWwseWDjyBKUyDkuK3nmoQgYC5maWx0ZXIoKWAqKu+8jOWNsyBSIOS4remcgOimgeaMieeFp+S4gOWumuadoeS7tuetm+mAieaVsOWIl+aXtu+8jOeUqGBbY29uZGl0aW9uXWDljbPlj68NCg0KYFtbXV1g5Li65YWD57Sg5o+Q5Y+W5Zmo77yM6L+U5Zue55qE5piv5Y6f5pWw5o2u5LiA5LiqKirplb/luqbkuLox55qE5YiH54mHKirkuK3oo4Xovb3nmoTlhoXlrrnvvIzlsLHlg48gSlMg5Lit55qEIGAuZmlsdGVyKClbXWANCg0K5a+55ZCR6YeP5pON5L2c77yMYFtdYOWSjGBbW11dYOayoeacieW3ruWIq++8jOmDvei/lOWbnuS4gOe7tOeahOWQkemHj+OAguS9huWvueabtOWkjeadgueahOaVsOaNruexu+Wei++8jOS6jOiAheeahOW3ruWIq+WwseW+iOaYjuaYvu+8mg0KDQpgYGB7cn0NCnN0cihpcmlzKSAjIOaVsOaNruahhg0KDQpzdHIoaXJpc1sxXSkgIyDlj6rlkKvkuIDkuKrlj5jph4/nmoTmlbDmja7moYYNCg0Kc3RyKGlyaXNbWzFdXSkgIyDlkJHph48NCmBgYA0KDQojIyMjIGBbXWDpgInlj5bnmoTkuInnp43mlrnlvI8NCg0KLSAgIGluZGV4IGB4WzRdOyB4Wy0yOjRdOyB4W2MoMSwgMyldYA0KLSAgIGNvbmRpdGlvbiBgeFt4ID09IDEwXTsgeFt4ICVpbiUgYygxLCAyLCA1KV1gDQotICAg5qCH562+IGB4WyJhcHBsZSJdYA0KDQpgYGB7cn0NCnggPC0gYygxLCAyLCAzLCA0LCA1LCA3KQ0KeFszOjVdICMgeOWQkemHj+S4reeahOesrDMtNeS4quWFg+e0oA0KeFstMl0gIyDpmaTkuobnrKzkuozkuKrku6XlpJbnmoTlhYPntKANCg0KeFtjKDEsIDQpXSA8LSBjKDksIDExKQ0KeCAjIGHkuK3nrKwx5Liq5ZKM56ysNOS4quWFg+e0oA0KDQp4W3ggJWluJSBjKDEsIDIsIDUpXQ0KYGBgDQoNCiMjIyBJbmRleA0KDQojIyMjIGB3aGljaCpgDQoNCi0gICBgd2hpY2go6YC76L6R6KGo6L6+5byPKWANCi0gICBgd2hpY2gubWluKClgDQotICAgYHdoaWNoLm1heCgpYA0KDQpgYGB7cn0NCngNCndoaWNoLm1heCh4KQ0Kd2hpY2gubWluKHgpDQp3aGljaCh4ID09IDIpDQp3aGljaCh4ID4gNCkNCmBgYA0KDQojIyMjIGAqbWF0Y2hgDQoNCi0gICBgbWF0Y2godmVjdG9yMSwgdmVjdG9yMilg6L+U5Zue56ys5LiA5Liq5ZCR6YeP5Lit5ZCE5YWD57Sg5Zyo56ys5LqM5Liq5ZCR6YeP5Lit55qE5L2N572u5bqP5YiX77yM5q+P5LiA5Liq6YO95LuO5aS05byA5aeL5Yy56YWN77yM5Y+q6KaB5Yy56YWN5Yiw5bCx57uT5p2f44CCDQoNCi0gICBgcG1hdGNoKHZlY3RvcjEsIHZlY3RvcjIpYO+8jOiLpeesrOS4gOS4quWQkemHj+S4reafkOWFg+e0oOWcqOesrOS6jOS4quWQkemHj+S4reWMuemFjeS4iuS6hu+8jOWImeiupOS4uuesrOS6jOS4quWQkemHj+S4reebuOW6lOWFg+e0oOW3suiiq+WNoOeUqO+8jOWGjeWMuemFjeesrOS4gOS4quWQkemHj+S4reeahOS4i+S4gOS4quWFg+e0oOaXtu+8jOi3s+i/h+esrOS6jOS4quWQkemHj+S4reabvuiiq+WMuemFjei/h+eahOWFg+e0oOOAgg0KDQpgYGB7cn0NCm1hdGNoKHJlcCgxLCAzKSwgcmVwKDEsIDUpKQ0KcG1hdGNoKHJlcCgxLCAzKSwgcmVwKDEsIDUpKQ0KYGBgDQoNCiMjIyBPcGVyYXRpb24NCg0KUiDlr7nlkJHph4/nmoTmk43kvZzpg73opoHlnKjljp/lkJHph4/nmoTmi7fotJ3kuIrov5vooYzvvIzkuI3mlLnlj5jljp/lkJHph4/vvIjlj6rmnInnm7TmjqXotYvlgLzog73mlLnlj5jljp/lkJHph4/vvInjgILlpb3lpITmmK/lronlhajvvIzlnY/lpITmmK/mhaLjgIINCg0KIyMjIyDlop7liKDmlLkNCg0KLSAgIGBhcHBlbmQoKWAg6L+U5Zue5o+S5YWl5YWD57Sg5ZCO55qE5ou36LSdLiA8c3BhbiBzdHlsZT0nY29sb3I6cmVkJz4qKuazqOaEj++8jFIg5Lit5LiA6Iis5LiN55u05o6l5L+u5pS55Y6f5a+56LGh77yM5omA5Lul5aaC5p6c6KaB5L+d55WZ6L+Z5Liq5pON5L2c77yM5LiA5a6a6KaB6K6w5b6X6LWL5YC857uZ5Y6f5Y+Y6YeP44CCKio8L3NwYW4+DQotICAgYFstaW5kZXhdYCDmjpLpmaTpgInpm4bmlbTkvZPotYvlgLwNCi0gICBgcmVwbGFjZSgpYCDmibnph4/mm7/mjaINCg0KYGBge3J9DQp4IDwtIGMoMSwgMiwgMywgNCwgNSwgNykNCnggPC0gcmVwbGFjZSh4LCBjKDMsIDQpLCBjKDUsIDUpKSAjIOabv+aNou+8muWwhnjlkJHph4/kuK3nrKwz5Liq5ZKM56ysNOS4quWFg+e0oOabv+aNouS4ujUNCngNCg0KYXBwZW5kKHgsIDEwMCwgYWZ0ZXIgPSAyKQ0KeA0KDQphIDwtIGMoMCwgMCwgMSwgMiwgMCwgMykgIyDliKDpmaQw6aG5DQpiIDwtIHdoaWNoKGEgPT0gMCkNCmINCmEgPC0gYVstYl0NCmENCmBgYA0KDQojIyMjIFNvcnQNCg0KLSAgIGByYW5rKClg6L+U5Zue5ZCR6YeP5Lit5ZCE5YWD57Sg55u45a+55aSn5bCP55qE5o6S5bqP77yI6buY6K6k5Y2H5bqP77yJDQotICAgYHNvcnQoKWDov5Tlm57mjpLluo/lkI7nmoTlkJHph48NCi0gICBgcmV2KClg6YCG5bqP5o6S5YiXDQoNCmBgYHtyfQ0KeA0KcmFuayh4KQ0KDQpzb3J0KHgsIGRlY3JlYXNpbmcgPSBGKSAjIOm7mOiupOWNh+W6j+aOkuW6jw0KeA0KDQpyZXYoeCkgIyDpgIbluo8NCngNCmBgYA0KDQojIyMjIOWOu+mHjeOAgeWBj+enu+OAgeW3ruWIhg0KDQotICAgYHVuaXF1ZSgpYCDljrvph40NCi0gICBgbGVhZCh4LCBuPTEpYCwgYGxhZyh4LCBuPTEpYCDlgY/np7vvvIzov5Tlm57kuIDkuKrluo/liJfnmoTpooblhYjluo/liJflkozmu57lkI7luo/liJcNCi0gICBgZGlmZih4LCBsYWc9MSlgIOW3ruWIhu+8jGxhZyDnlKjku6XmjIflrprmu57lkI7lh6DpobnjgILpu5jorqTnmoQgbGFnIOWAvOS4uiAxDQoNCmBgYHtyfQ0KdW5pcXVlKHgpDQp4DQoNCmxlYWQoeCwgMikNCngNCg0KZGlmZih4KQ0KeA0KYGBgDQoNCiMjIyMg5Lqk5Y+J5b6q546v6YGN5Y6GDQoNCmBleHBhbmQuZ3JpZCh4LCB5KWDvvIzlj4LmlbAgeCwgeSDkuLrlkJHph4/vvIzmlYjmnpzkuLoqKuWvueS6jOWFg+aVsOWAvOWvuSAoeCwgeSkg5omA5pyJ5Y+v6IO95Y+W5YC855qE6YGN5Y6G77yI6L+U5Zue5pWw5o2u5qGG77yJKirjgIINCg0KYGBge3J9DQp4IDwtIDE6Mw0KeSA8LSBsZXR0ZXJzWzE6M10NCnogPC0gMTozDQpleHBhbmQuZ3JpZCh4LCB5KQ0KZXhwYW5kLmdyaWQoeCwgeikNCmBgYA0KDQojIyMjIOeul+aVsOi/kOeulw0KDQrlm5vliJnov5DnrpcoKy1cKi8p44CB5bmCKFxeKeOAgeWPluaVtCglLyUp44CB5Y+W5L2ZKCUlKQ0KDQpgYGB7cn0NCjEgLyAoMTo2KSAjIOiHquWKqOWwhuagh+mHj++8iOmVv+W6puS4uiAxIOeahOWQkemHj++8ieaJqeWxleS4uumVv+W6puS4uiA2IOeahOWQkemHj+WQjuWGjei/kOeulw0KMSAvIG1hdHJpeCgxOjQsIG5yb3cgPSAyKSAjIOiHquWKqOWwhuagh+mHj+aJqeWxleS4uuWvueW6lOe7tOW6pueahOefqemYteWQjuWGjei/kOeulw0KDQp4IDwtIDE6NQ0KeSA8LSAyOjYNCnggKiB5ICMg5ZOI6L6+6ams56evDQoNCg0KIyDlkJHph4/lhoXnp6/vvIjku6XkuIvlhpnms5XnrYnku7fvvIkNCjEgKiAyICsgMiAqIDMgKyAzICogNCArIDQgKiA1ICsgNSAqIDYNCnN1bSh4ICogeSkNCnQoeCkgJSolIHkgIyDliKnnlKjnn6npmLXkuZjms5XvvIzms6jmhI8gUiDkuK3lkJHph4/pu5jorqTkuLrliJflkJHph48NCmNyb3NzcHJvZCh4LCB5KSAjIOWIqeeUqOefqemYteS5mOazle+8jOW+l+WIsOS4gOS4qiAxKjEg55+p6Zi1DQoNCg0KIyDlkJHph4/lpJbnp6/vvIjku6XkuIvlhpnms5XnrYnku7fvvIkNCnggJSolIHQoeSkNCnggJW8lIHkNCmtyb25lY2tlcih4LCB0KHkpKSAjIOWFi+e9l+WGheWFi+enrw0Kb3V0ZXIoeCwgeSkNCnRjcm9zc3Byb2QoeCwgeSkNCmBgYA0KDQojIyMjIOmAu+i+kei/kOeulw0KDQpgYGB7cn0NCnggPC0gMTo2DQp4IDwgNA0KYWxsKHggPiA1KSAjIOS4gOS4quWQkemHj+eahOaJgOacieWFg+e0oOaYr+WQpua7oei2s+afkOadoeS7tg0KYW55KHggPiA1KSAjIOS4gOS4quWQkemHj+eahOmDqOWIhuWFg+e0oOaYr+WQpua7oei2s+afkOadoeS7tg0KDQptYXRyaXgoeCwgMiwgYnlyb3cgPSBUKSA8IDQNCmBgYA0KDQojIyMjIOmbhuWQiOi/kOeulw0KDQpgYGB7cn0NCmludGVyc2VjdChjKDEsIDIsIDMsIDMsIDEyLCA0LCAxMjMsIDEyKSwgYygxLCAyLCAzKSkgIyDkuqQNCg0KdW5pb24oYygi54uX54aK5LyaIiwgIuiBmuaVsOaNruiLseaJjSIpLCBjKCLni5fnhorkvJoiLCAi5Yqp5Lqn5Lia5oyv5YW0IikpICMg5bm2DQoNCnNldGRpZmYoMTA6MiwgNTozKSAjIOW3rg0KYGBgDQoNCiMjIE1hdHJpeA0KDQojIyMgQ3JlYXRlDQoNCiMjIyMg5ZCR6YeP6L2s5YyW5Li655+p6Zi1DQoNCjEuIGBtYXRyaXgodmVjdG9yLCBucm93LCBuY29sLCBieXJvdyA9IEZBTFNFKWDnm7TmjqXliJvlu7rvvIzpu5jorqQgYnlyb3cgPSBGQUxTRe+8jOS8mOWFiOaMieWIl+Whq+WFheefqemYte+8jOiuvuS4uiBUUlVFIOWPr+aMieihjA0KDQoNCjIuICBgZGltKHZlY3RvcikgPSBjKG5yb3csbmNvbClg6K6+5a6a57u05bqmDQoNCmBgYHtyfQ0KIyMg55Sf5oiQIDMqMyDnmoTlhaggMSDnn6npmLUNCg0KIyDnrKzkuIDnp40NCnJlcCgxLCA5KSAlPiUgbWF0cml4KG5yb3cgPSAzKQ0KDQojIOesrOS6jOenjQ0KeCA8LSByZXAoMSwgOSkNCmRpbSh4KSA8LSBjKDMsIDMpIA0KeCAjIOi/meenjeaWueW8j+aUueWPmOS6huWPmOmHjyB4IOeahOWAvO+8jOS4jeaYr+W+iOaOqOiNkO+8jOi/mOaYr+esrOS4gOenjeabtOWlvQ0KYGBgDQoNCiMjIyMg5Yib5bu65a+56KeS55+p6Zi1DQoNCmBkaWFnKG4pYCDnlJ/miJAgbiDpmLbljZXkvY3pmLUgJElfbiQNCg0KYGRpYWcodmVjdG9yKWDvvIzlj4LmlbDkuLrlr7nop5LlhYMNCg0KIyMjIyDnn6npmLXovazljJbkuLrlkJHph48NCg0KYGFzLnZlY3RvcigpYCDmjInnhafkuIDliJfkuIDliJflnLDpobrluo/lsIbnn6npmLXlsZXlvIDkuLrlkJHph48NCg0KIyMjIFNpemUNCg0KYG5yb3coQSlgDQpgbmNvbChBKWANCmBkaW0oQSlg77yM6L+U5Zue6ZW/5bqm5Li6IDIg55qE5ZCR6YePDQoNCiMjIyBMYWJlbA0KDQpgcm93bmFtZXMoKSBbPC1dYA0KDQpgY29sbmFtZXMoKSBbPC1dYA0KDQojIyMgU3Vic2V0DQoNCmBb6KGM6YCJ5oup5ZmoLCDliJfpgInmi6nlmahdYCDmr4/kuKrpgInmi6nlmajpg73lj6/ku6XmmK9pbmRleOOAgWNvbmRpdGlvbiDlkowgbmFtZQ0KDQoqKuefqemYteeahGBbXWDpgInmi6nlmajkvJrov5Tlm57nu7TluqblsL3lj6/og73kvY7nmoTnu5PmnpwqKu+8jOWboOatpGBBWzIsIF1g6L+U5Zue55qE5piv5ZCR6YeP6ICM6Z2eJDFcdGltZXMgbiTnmoTnn6npmLUNCg0KYGBge3J9DQpBIDwtIG1hdHJpeCgxOjE2LCA0KQ0KDQpBWzIsIF0gIyBB55qE56ysMuihjA0KDQpBWywgLTJdICMgQeaOkumZpOesrDLliJcNCg0KQVszLCAyXSAjIEHnmoTnrKwz6KGM56ysMuWIlw0KDQpBWzMsIGMoMiwgNCldICMgQeeahOesrDPooYznrKwy5YiX5ZKM56ysNOWIlw0KYGBgDQoNCuefqemYteacrOi0qOS4iuaYr+S4gOS4quWQkemHj++8jOaJgOS7pemAgueUqOWQkemHj+eahOS4gOe7tOmAieaLqeWZqA0KDQpgYGB7cn0NCkEgPC0gbWF0cml4KDE6OSwgMykNCkFbQSA+IDNdDQpgYGANCg0KIyMjIEluZGV4DQoNCmByb3coQSlgLCBgY29sKEEpYCDov5Tlm57kuKTkuKrnn6npmLXvvIzlhYPntKDliIbliKvkuLrooYzliJfkuIvmoIfjgIINCg0KYGBge3J9DQojIOaPkOWPluS4i+S4ieinkuefqemYteeul+azlQ0KQSA8LSBtYXRyaXgoMToxNiwgNCkNCkENCg0KQVtyb3coQSkgPCBjb2woQSldIDwtIDANCkENCmBgYA0KDQojIyMgT3BlcmF0aW9uDQoNCiMjIyMg6L2s572uIGB0KEEpYA0KDQrms6jvvJrlkJHph4/msqHmnInnu7TluqbmpoLlv7XvvIzlkJHph4/kuI3mmK8gJG4gXHRpbWVzIDEkIOefqemYteOAguimgeeUqGB0KHgpYOWSjGB0KHQoeCkpYOaJjeiDveaKiuWQkemHj+i9rOWMluS4uiAkMSBcdGltZXMgbiQg5ZKMICRuIFx0aW1lcyAxJCDnmoTnn6npmLXjgIINCg0KYGBge3J9DQp4IDwtIDE6Ng0KdCh4KQ0KdCh0KHgpKQ0KYGBgDQoNCiMjIyMg55+p6Zi15LmY5rOVDQoNCi0gICBgQSUqJUJgDQogICAgLSAgIOS4gOS4quS+i+Wklu+8muiLpSBBIOWSjCBCIOWdh+S4uuWIl+WQkemHj++8jOWImei/kOeul+aXtuiHquWKqOWvuSBBIOi9rOe9rlte6L2s572uXe+8jOaJp+ihjCBgdChBKSUqJUJg77yM6L+U5ZueIEEg5LiOIEIg55qE5YaF56evDQogICAgLSBgY3Jvc3Nwcm9kKEEsIEIpYCDmmK8gYHQoQSkgJSolIEJgIOeahOeugOWGmQ0KICAgIC0gYHRjcm9zc3Byb2QoQSwgQilgIOaYryBgQSAlKiUgdChCKWAg55qE566A5YaZDQotIGAqYCwg5ZOI6L6+6ams56evDQotIGBrcm9uZWNrZXIoKWAsIOWFi+e9l+WGheWFi+enrw0KDQoNCmBgYHtyfQ0KIyDnn6npmLXkuZjms5UNCm0xIDwtIG1hdHJpeCgxOjksIDMpDQptMSAlKiUgbTEgDQpgYGANCg0KW17ovaznva5dOiDoi6XkuI3ovaznva7vvIzov5nkuKrov5DnrpfmoLnmnKzml6Dms5Xov5vooYzjgIINCg0KIyMjIyDlr7nop5LlhYPntKANCg0KYGRpYWcoQSlgIOi/lOWbnuWvueinkuWFg+e0oOe7hOaIkOeahOWQkemHjw0KDQojIyMjIOefqemYteeahOmAhu+8m+e6v+aAp+aWueeoi+e7hOeahOinow0KDQotICAgYHNvbHZlKEEsIEIpYCwg6L+U5ZueYEEgJSolIFggPSBCYOeahOino+OAgg0KLSAgIGBzb2x2ZShBKWAsIOi/lOWbnuefqemYtUHnmoTpgIbvvIzljbNgU29sdmUoQSwgSSlgDQoNCiMjIyMg54m55b6B5YC85ZKM54m55b6B5ZCR6YePDQoNCmBBLmVpZ2VuIDwtIGVpZ2VuKEEsIHN5bW1ldHJpYz1UKWANCg0KIyMjIyDooYzliJflvI8NCg0KYGRldChBKWANCg0KIyMjIyDmj5Dlj5bkuIrjgIHkuIvkuInop5Lnn6npmLUNCg0KYGxvd2VyLnRyaShBLGRpYWc9VC9GKWDlkoxgdXBwZXIudHJpKEEsZGlhZz1UL0YpYO+8jOi/meS4pOS4quWHveaVsOi/lOWbnumAu+i+keefqemYtQ0KDQpgYGB7cn0NCkEgPC0gbWF0cml4KDE6MTYsIDQpDQpBDQpBW2xvd2VyLnRyaShBKV0gPC0gMA0KQQ0KYGBgDQoNCiMjIyMg5q2j5a6a55+p6Zi155qEQ2hvbGVza2V55YiG6KejDQoNCmBjaG9sKEEpYA0KDQrljbPov5Tlm57mu6HotrMgJEE9UHteVH1QJCDnmoRQ77yM5YW25LitUOS4uuS4iuS4ieinkuefqemYtQ0KDQojIyMjIOefqemYteWQiOW5tg0KDQpgYGB7ciwgZXZhbD1GQUxTRX0NCnJiaW5kKEEsIEIpDQpjYmluZChBLCBCKQ0KZHBseXI6OmJpbmRfcm93cyhBLCBCKQ0KZHBseXI6OmJpbmRfY29scyhBLCBCKQ0KYGBgDQoNCiMjIyMg5a+56KGM44CB5YiX5YiG5Yir5pON5L2cDQoNCi0gYGFwcGx5KG1hdHJpeCwgMSwgZilgIOWwhuihjOS+neasoeS8oOmAkue7mSBmDQotIGBhcHBseShtYXRyaXgsIDIsIGYpYCDlsIbliJfkvp3mrKHkvKDpgJLnu5kgZg0KLSBgcm93U3VtcygpYA0KLSBgcm93TWVhbnMoKWANCi0gYGNvbFN1bXMoKWANCi0gYGNvbE1lYW5zKClgDQoNCmBgYHtyfQ0KQSA8LSBtYXRyaXgoMToxNiwgNCkNCkENCg0Kcm93U3VtcyhBKQ0KYXBwbHkoQSwgMSwgc3VtKQ0KDQpjb2xNZWFucyhBKQ0KYXBwbHkoQSwgMiwgbWVhbikNCmBgYA0KDQojIyBBcnJheQ0KDQrlvKDph4/vvIzmiJbmm7Tpq5jnu7TluqbnmoTlkJHph48NCg0KIyMjIENyZWF0ZQ0KDQpgejwtYXJyYXkodmVjdG9yLCBkaW1lbnNpb25zLCBkaW1uYW1lcyA9IGxpc3QodjEsIHYyLCB2MywgLi4uKSlgDQoNCiMjIyBMYWJlbA0KDQpgZGltbmFtZXMoKSBbPC1dYA0KDQpgYGB7cn0NCnogPC0gYXJyYXkoMToyNCwgZGltID0gYygyLCAzLCA0KSwgZGltbmFtZXMgPSBsaXN0KGMoInIxIiwgInIyIiksIGMoImMxIiwgImMyIiwgImMzIiksIGMoInAxIiwgInAyIiwgInAzIiwgInA0IikpKQ0Keg0KZGltbmFtZXMoeikNCmBgYA0KDQojIyBMaXN0DQoNCuW5v+S5ieWQkemHj++8jOWkp+iHtOebuOW9k+S6jiBKUyDkuK3nmoTlr7nosaHvvIzmnKzotKjkuIrmmK/kuIDnu4Q8c3BhbiBzdHlsZSA9ICdjb2xvcjogb3JhbmdlcmVkJz4qKuacieW6jzwvc3Bhbj7plK7lgLzlr7kqKueahOmbhuWQiOOAgg0KDQrpgY3ljoZsaXN077yM5bCx5piv6YGN5Y6G5a6D55qE6ZSu5YC85a+544CCDQoNCueBtea0u+S9v+eUqCBsaXN0IOaJjeiDveaIkOS4uiBSIOe8lueoi+mrmOaJi+OAgg0KDQojIyMgQ3JlYXRlDQoNCmBsaXN0KGtleTEgPSB2YWx1ZTEsIGtleTIgPSB2YWx1ZTIsIC4uLilgDQoNCuWPr+S7peeugOWGmeS4uiBgbGlzdCh2YWx1ZTEsIHZhbHVlMiwgLi4uKWDvvIzmraTml7bkvb/nlKjku44gMSDlvIDlp4vnmoToh6rnhLbmlbDliJfkvZzkuLrnvLrnnIHnmoQga2V5cw0KDQojIyMgVHlwZQ0KDQotICAgYGlzLmxpc3QoKWAg5Yik5patDQoNCi0gICBgYXMubGlzdCgpYCDovazmjaINCg0KLSAgIGB1bmxpc3QoKWAg5bCG5YiX6KGo5by65Yi26L2s5o2i5Li65ZCR6YePDQoNCiAgICAtICAg5oyJ5YiG6YeP6aG65bqP5L6d5qyh5o6S5YiX77yM5by65Yi25LiN5YaN5bWM5aWX77yBDQogICAgLSAgIOiHquWKqOS/neivgeWQjOagt+eahOaVsOaNruexu+Wei+OAguavlOWmgu+8jOW8uuWItui9rOaNoua3t+WQiOS6huaVsOWAvOWSjOaWh+acrOeahOWIl+ihqO+8jOS8muW+l+WIsOWtl+espuS4suWQkemHjw0KDQojIyMgTGFiZWwNCg0KYG5hbWVzKGxpc3QpIFs8LV1gDQoNCiMjIyBTdWJzZXQNCg0K56ys5LiA56eN6K+t5rOV77yM55SoYFtdYOespuWPt++8jOmHjOmdouWPr+S7peaYryBpbmRleC9jb25kaXRpb24va2V5DQoNCuesrOS6jOenjeivreazle+8jOeUqCBcYFtcYCgpICDmiJYgYG1hZ3JpdHRyOjpleHRyYWN0KClg5Ye95pWwDQoNCmBgYHtyfQ0KbCA8LSBsaXN0KCJhIiwgMiwgVFJVRSkNCmxbMV0NCmBbYChsLCAxKQ0KbWFncml0dHI6OmV4dHJhY3QobCwgMSkNCmBgYA0KDQojIyMgRXh0cmFjdA0KDQrnrKzkuIDnp43or63ms5XvvIznlKhgW1tdXWDnrKblj7fvvIzph4zpnaLlj6/ku6XmmK8gaW5kZXgvY29uZGl0aW9uL2tleQ0KDQrnrKzkuoznp43or63ms5XvvIznlKhgJGDnrKblj7cra2V577yMYGxpc3Qka2V5YO+8jOaYr2BsaXN0W1sna2V5J11dYOeahOeugOWGmQ0KDQrnrKzkuInnp43or63ms5XvvIznlKggXGBbW1xgKCkgIOaIliBgbWFncml0dHI6OmV4dHJhY3QyKClg5Ye95pWwDQoNCmBgYHtyfQ0KbFtbMV1dDQpgW1tgKGwsIDEpDQptYWdyaXR0cjo6ZXh0cmFjdDIobCwgMSkNCmBgYA0KDQojIyMgT3BlcmF0aW9uDQoNCiMjIyMg5re75Yqg5YWD57SgDQoNCuesrOS4gOenjeivreazle+8jOebtOaOpei1i+WAvOOAgg0KDQrnrKzkuoznp43or63ms5XvvIxgYXBwZW5kKGxpc3QsIHZhbHVlLCBhZnRlciA9IGxlbmd0aChsaXN0KSlg77yM6buY6K6k5Yqg5Yiw5YiX6KGo55qE5pyr5bC+44CC5L2G6Iul5o+S5YWl55qE5YWD57Sg5pys6Lqr5piv5LiA5Liq5YiX6KGo77yI5b6I5aSa5a+56LGh5pys6LSo5LiK6YO95piv5LiA5Liq5YiX6KGo77yJ77yM5YiZ5LyaKirnoLTlnY/lsYLnuqfnu5PmnoTvvIzlsIbmiYDmnInnmoTlhYPntKDkvp3mrKHmj5LlhaXliLDliY3kuIDkuKrliJfooagqKuOAguaJgOS7peiLpeimgeS/neWtmOWIl+ihqOeahOWxgue6p+e7k+aehO+8jOi/mOaYr+esrOS4gOenjeivreazleabtOS/nemZqeOAgg0KDQpgYGB7cn0NCmxbWzRdXSA8LSBkYXRhLnRhYmxlKHggPSAxLCB5ID0gMikNCmwkeiA8LSBjKCJvbmUiLCAidHdvIiwgInRocmVlIikNCmwNCmwgPC0gYXBwZW5kKGwsIDYpDQpsDQpsIDwtIGFwcGVuZChsLCBsaXN0KDcsIDgpKQ0KbA0KbFtbOV1dIDwtIGxpc3QoOSwgMTApDQpsDQpgYGANCg0K5re75Yqg5YWD57Sg55qE5pyA5L2z5YaZ5rOV77yM5peg6ZyA55+l6YGTIGluZGV4DQoNCmBgYFINCmwgPC0gbGlzdCguLi4pDQpsW1tsZW5ndGgobCkgKyAxXV0gPC0gbmV3X2VsZW1lbnQNCmBgYA0KDQoNCg0KIyMjIyDliKDpmaTlhYPntKANCg0K6LWL5YC85Li6IGBOVUxMYCDljbPkuLrliKDpmaQNCg0KIyMgRGF0YS5GcmFtZQ0KDQpkYXRhLmZyYW1lIOaYr+mVv+W6puebuOWQjOeahOWIl+WQkemHj+e7hOaIkOeahCBMaXN077yI5Y+v5Lul5oyJ54Wn6L+Z5Liq5oCd6Lev5Y675p6E5bu6IEpTIOS4reeahOaVsOaNruahhu+8ieOAglIg5Y6f55Sf5pSv5oyB5ZCR6YeP5YyW5pON5L2c77yM5Zug5q2kIFIg5pON5L2c5pWw5o2u5qGG5pyJ5YWI5aSp5LyY5Yq/44CCDQoNCmRhdGEuZnJhbWUg5Y+v5Lul5YOP55+p6Zi15LiA5qC377yM5Lul5LqM57u06KGo5pa55byP5ZGI546w44CC5Zug5q2k77yMKipSIOS4reaTjeS9nOefqemYteeahOS4gOS6m+WHveaVsOWFvOWuueS6hiBkYXRhLmZyYW1lIOWvueixoSoq77yM5Y2z5Y+v5Lul5YOP5pON5L2c55+p6Zi15LiA5qC35pON5L2cIGRhdGEuZnJhbWUNCg0KIyMjIENyZWF0ZQ0KDQpgZGF0YS5mcmFtZSh2YXIxID0gY29sMSwgdmFyMiA9IGNvbDIsIOKApiwgcm93Lm5hbWVzID0gLCBjaGVjay5uYW1lcyA9IFQsIHN0cmluZ3NBc0ZhY3RvcnMgPSBGKWANCg0KMS4gUiA0LjAg5LmL5YmN77yM5p6E5bu6UueahOWOn+eUn+aVsOaNruahhuaXtu+8jOWPguaVsCBzdHJpbmdzQXNGYWN0b3JzIOeahOm7mOiupOWAvOS4uiBUUlVF77yM5a2X56ym5ZCR6YeP6buY6K6k6KKr6L2s5o2i5oiQ5Zug5a2Q77yI5Zug5a2Q55qEIGxldmVsIOebuOavlOWtl+espuS4suiKguecgeWCqOWtmOepuumXtO+8ie+8jOaVsOaNruexu+Wei+WPmOS4uiBudW1lcmlj77yM5peg5rOV5YaN55So5a2X56ym5Liy5Ye95pWw5aSE55CG44CCNC4wIOWQjuabtOaUueS6hui/meS4gOm7mOiupOWAvOOAgg0KDQoyLiBjaGVjay5uYW1lcyDpu5jorqTkuLogVFJVRe+8jOW7uueri+aVsOaNruahhuaXtum7mOiupOS9v+eUqOWHveaVsCBgbWFrZS5uYW1lcygpYCDmo4Dmn6Xlj5jph4/lkI3vvIzlsIYgUiDkuI3lhYHorrjlh7rnjrDlnKjlj5jph4/lkI3kuK3nmoTnibnmrorlrZfnrKbovazmjaLkuLpgLmANCiAgIDEuIOiLpemAiSBGQUxTRe+8jOS8muacgOWkp+mZkOW6puWcsOS/neeVmeWOn+acrOeahOWIl+WQjeOAguS9huiuv+mXrui/meS6m+WcqCBSIOS4reacrOS4uumdnuazleeahOWIl+aXtu+8jOW/hemhu+eUqOWPjeW8leWPt+WwhuWIl+WQjeaLrOi1t+adpeOAgg0KDQojIyMgVHlwZQ0KDQotICAgYGFzLmRhdGEuZnJhbWUoKWAg5bCG55+p6Zi144CB5YiX6KGo5by65Yi26L2s5o2i5Li65pWw5o2u5qGGDQoNCiAgICAtICAg5aaC5p6c55+p6Zi15bey5pyJ6KGM44CB5YiX5ZCN77yM5Lya5Zyo6L2s5o2i6L+H56iL5Lit5L+d55WZDQoNCiMjIyBMYWJlbA0KDQrpgILnlKjkuo4gbWF0cml4IOeahGByb3duYW1lcygpYOWSjGBjb2xuYW1lcygpYOS5n+mAgueUqOS6juaVsOaNruahhuOAgg0KDQpgYGB7cn0NCmEgPC0gbGlzdChpZCA9IDE6NSwgbG93ZXIgPSBsZXR0ZXJzWzE6NV0sIHVwcGVyID0gTEVUVEVSU1sxOjVdKQ0KY2xhc3MoYSkNCg0Kcm93bmFtZXMoYSkNCg0KY29sbmFtZXMoYSkNCg0KYiA8LSBhcy5kYXRhLmZyYW1lKGEpDQpjbGFzcyhiKQ0KDQpyb3duYW1lcyhiKQ0KDQpjb2xuYW1lcyhiKQ0KYGBgDQoNCiMjIyBTdWJzZXQNCg0K5pei5Y+v5Lul55So5YiX6KGo6aOO5qC855qEYFtdYO+8jOS5n+WPr+S7peeUqOefqemYtemjjuagvOeahGBbcm93U2VsZWN0b3IsIGNvbHVtblNlbGVjdG9yXWANCg0KMS4gIOefqemYtemjjuagvOmAieaLqeWZqOeahOWlveWkhOWcqOS6ju+8jOWPr+S7peeBtea0u+WcsOetm+mAieihjA0KDQpgYGB7cn0NCmRmIDwtIGRhdGEuZnJhbWUoDQogIGlkID0gMTo1LA0KICBsb3dlciA9IGxldHRlcnNbMTo1XSwNCiAgdXBwZXIgPSBMRVRURVJTWzE6NV0NCikNCg0KIyDnn6npmLXpo47moLznmoTpgInmi6nlmagNCmRmW2RmJGlkID4gMywgYygyLCAzKV0NCmBgYA0KDQoyLiAg55So55+p6Zi16aOO5qC855qE5LqM57u06YCJ5oup5Zmo5pe277yM6Lef55+p6Zi15LiA5qC35Lya5bC95Y+v6IO96ZmN57u044CC5aaC5p6c57q15ZCR5Y+q5Y+W5LqG5LiA5YiX77yM5YiZ6L+U5Zue5YC85Lya6Ieq5Yqo566A5YyW5Li65ZCR6YeP77yM6ICM6Z2e5pWw5o2u5qGG44CC6Iul6KaB6YG/5YWN6ZmN57u077yM5L+d55WZ5pWw5o2u5qGG57uT5p6E77yM5Y+v5Lul57uT5ZCI5Lik56eN6aOO5qC855qE6YCJ5oup5Zmo77yM5Lmf5Y+v5Lul5aKe5Yqg6YCJ6aG5YGRyb3AgPSBGQUxTRWDvvIjmjqjojZDvvIzliKnkuo7ku6PnoIHpo47moLznmoTnu5/kuIDvvInjgIINCg0KYGBge3J9DQpkZlsyOjMsIDJdDQoNCmRmWzI6MywgMiwgZHJvcCA9IEZBTFNFXQ0KDQojIOa3t+WQiOS4pOenjemAieaLqeWZqA0KZGZbMjozLCBdWzJdDQpgYGANCg0KMy4gIGBzdWJzZXQoZGYsIGNvbmRpdGlvbnMsIHNlbGVjdClgDQoNCioq5Ye95pWw6ICM6Z2e5pON5L2c56ym77yM5L6/5YipIFBpcGVsaW5lIOeahOi/nue7reaTjeS9nCoqDQoNCuesrOS4gOS4quWPguaVsOS4uuaVsOaNrumbhu+8jOesrOS6jOS4quWPguaVsOmAieaLqeespuWQiOadoeS7tueahOihjO+8jOesrOS4ieS4quWPguaVsHNlbGVjdOmAieaLqeWIl++8jOWPr+S7peWcqOWIl+WQjeWJjeWKoCctJ+WIoOmZpOS5iw0KDQpgYGB7ciwgZXZhbD1GQUxTRX0NCnN1YnNldChsZWFkZXJzaGlwLCBhZ2UgPj0gMzUgfCBhZ2UgPCAyNCwgc2VsZWN0ID0gYyhxMSwgcTIsIHEzLCBxNCkpDQpgYGANCg0KIyMjIEV4dHJhY3QNCg0KLSAgIGBkZiRrZXlgDQotICAgYGRmW1tpbmRleF1dYA0KLSAgIGBkZltbY29sbmFtZV1dYA0KLSAgIOefqemYtemjjuagvOmAieaLqeWZqO+8jOmAieaLqeS4gOWIlw0KDQpgYGB7cn0NCmRmJGxvd2VyDQoNCmRmW1syXV0NCg0KZGZbWyJsb3dlciJdXQ0KDQpkZlssIDJdDQpgYGANCg0KIyMjIE9wZXJhdGlvbg0KDQrlr7nmlbDmja7moYbnmoTmk43kvZzmmK8gUiDmnIDmoLjlv4PnmoTlhoXlrrnvvIzmlYXljZXni6zor7TmmI7jgIINCg0KIyMgdGliYmxlDQoNCuaVsOaNruahhueahOabv+S7o+exu+Wei+OAgg0KDQrlnKhSIE1hcmtkb3du6YeM5Lik6ICF5Yy65Yir5LiN5aSn77yM5L2G5ZyoY29uc29sZeS4re+8jOWMuuWIq+W+iOaYjuaYvueahO+8mg0KDQotIOWIl+WHuuS6huWPmOmHj+eahOexu+Weiw0KLSDlj6rliJflh7oxMOihjA0KLSDlj6rliJflh7rmnInpmZDnmoTliJfmlbDvvIjkuI7lsY/luZXpgILlupTnmoTvvIkNCi0g6auY5LquIGBOQXNgDQoNCiMjIyBDcmVhdGUNCg0KdGliYmxlIOacieS4gOS4quW+iOeqgeWHuueahOS8mOeCue+8muWIm+W7uuaXtu+8jOWGmeWcqOWQjumdoueahOWPmOmHj+WPr+S7peeri+WNs+S9v+eUqOWJjemdoueahOWPmOmHjw0KDQpgYGB7cn0NCiMg6L+Z56eN5YaZ5rOV5aaC5p6c55SoIGRhdGEudGFibGXvvIzkvJrmiqXplJnvvIzooajnpLrkuI3nn6XpgZMgYiDlrprkuYnlvI/kuK3nmoQgYSDmmK/ku4DkuYgNCnRpYmJsZSgNCiAgYSA9IHJ1bmlmKDEwMDAsIDAsIDUpLA0KICBiID0gNCArIHJub3JtKDEwMDAsIG1lYW4gPSAzLjIgKiBhLCBzZCA9IDEpDQopICU+JSBoZWFkKCkNCmBgYA0KDQpDcmVhdGUgdGliYmxlIOaXtu+8jOWtl+espuWQkemHj+S4jeS8muiiq+iHquWKqOi9rOaNouS4uuWboOWtkA0KDQpgYGB7cn0NCmRmIDwtIHRpYmJsZShpZCA9IDE6MTAsIGxvd2VyID0gbGV0dGVyc1sxOjEwXSkNCmRmICU+JSBjbGFzcygpDQpgYGANCg0K5pWw5o2u6YeP5LiN5aSn5pe277yM5Y+v5Lul55SoYHRyaWJibGUoKWDliJvlu7oNCg0KYGBge3J9DQpkZiA8LSB0cmliYmxlKA0KICB+eCwgfnksIH56LA0KICAiYSIsIDIsIDMuNiwNCiAgImIiLCAxLCA4LjUNCikNCmBgYA0KDQojIyMgVHJhbnNmZXINCg0KYGFzX3RpYmJsZSgpYA0KDQojIyMgU3Vic2V0DQoNCnN1YnNldCDml7bvvIzljbPkvb/pgInlj5bljZXooYzmiJbljZXliJfvvIznu5PmnpzkuZ/kuI3kvJrpmY3nu7TvvIzku43nhLbmmK8gdGliYmxlDQoNCiMjIyBPcGVyYXRpb24NCg0KYGBge3J9DQphZGRfY29sdW1uKGRmLCB3ID0gMDoxKSAjIOWinuWKoOS4gOWIlw0KYWRkX3JvdyhkZiwgeCA9ICJjIiwgeSA9IDksIHogPSAyLjEpICMg5aKe5Yqg5LiA6KGMDQphZGRfcm93KGRmLCB4ID0gImMiLCB5ID0gOSwgeiA9IDIuMSwgLmJlZm9yZSA9IDIpICMg5Zyo56ys5LqM6KGM77yM5aKe5Yqg5LiA6KGMDQpgYGANCg0KMS4gYHByaW50KHRpYmJsZSwgbiA9IDEwLCB3aWR0aCA9IEluZilg5Y+v5Lul6Ieq5a6a5LmJ5omT5Y2w55qE6ZW/5bqm5ZKM5a695bqm44CC6buY6K6k5Y+q5pi+56S6MTDooYzvvIzpgb/lhY3ovpPlh7rlpKrplb8uDQogICAxLiDkuZ/lj6/ku6XnlKhgb3B0aW9ucyh0aWJibGUucHJpbnRfbWF4PW4sIHRpYmJsZS5wcmludF9taW49bSlg6L+b6KGM5YWo5bGA5oCn6K6+572u77ya5aaC5p6c5aSa5LqObeihjO+8jOWImeacgOWkmuaJk+WNsOWHum7ooYzjgIINCjIuIOWvueS6juW+iOWkp+eahOaVsOaNruihqO+8jOS5n+WPr+S7peeUqGAlPiUgVmlldygpYOaIlmAlVD4lIFZpZXcoKWDmn6XnnIsNCjMuIHRpYmJsZSDkuI3mlK/mjIHooYzlkI3jgIJgdGliYmxlOjpyb3duYW1lc190b19jb2x1bW4oZGYsIHZhciA9ICJyb3duYW1lIilg5Y+v5Lul5bCG6KGM5ZCN6L2s5YyW5Li65LiA5YiX77yMYHRpYmJsZTo6cm93aWRfdG9fY29sdW1uKGRmLCB2YXIgPSAicm93aWQiKWDlsIbooYwgaW5kZXgg6L2s5YyW5Li65LiA5YiX44CCDQo=</div>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeSourceEmbed("0202-Combined-Data-Structure.Rmd");
  window.initializeCodeFolding("show" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3,h4",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
