<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Humoon" />

<meta name="date" content="2022-04-16" />

<title>R Basic Grammar</title>

<script src="libs/header-attrs-2.13/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="libs/bootstrap-3.3.5/css/united.min.css" rel="stylesheet" />
<script src="libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="libs/navigation-1.1/tabsets.js"></script>
<script src="libs/navigation-1.1/codefolding.js"></script>
<script src="libs/navigation-1.1/sourceembed.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>



<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; } /* Alert */
code span.an { color: #008000; } /* Annotation */
code span.at { } /* Attribute */
code span.bu { } /* BuiltIn */
code span.cf { color: #0000ff; } /* ControlFlow */
code span.ch { color: #008080; } /* Char */
code span.cn { } /* Constant */
code span.co { color: #008000; } /* Comment */
code span.cv { color: #008000; } /* CommentVar */
code span.do { color: #008000; } /* Documentation */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.im { } /* Import */
code span.in { color: #008000; } /* Information */
code span.kw { color: #0000ff; } /* Keyword */
code span.op { } /* Operator */
code span.ot { color: #ff4000; } /* Other */
code span.pp { color: #ff4000; } /* Preprocessor */
code span.sc { color: #008080; } /* SpecialChar */
code span.ss { color: #008080; } /* SpecialString */
code span.st { color: #008080; } /* String */
code span.va { } /* Variable */
code span.vs { color: #008080; } /* VerbatimString */
code span.wa { color: #008000; font-weight: bold; } /* Warning */

.sourceCode .row {
  width: 100%;
}
.sourceCode {
  overflow-x: auto;
}
.code-folding-btn {
  margin-right: -30px;
}
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>


<style type="text/css">
#rmd-source-code {
  display: none;
}
</style>


<link rel="stylesheet" href="../css/style.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>



<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
<li role="separator" class="divider"></li>
<li><a id="rmd-download-source" href="#">Download Rmd</a></li>
</ul>
</div>



<h1 class="title toc-ignore">R Basic Grammar</h1>
<h3 class="subtitle">Variable, Condition, Loop and Debug</h3>
<h4 class="author">Humoon</h4>
<h4 class="date">2022-04-16</h4>

</div>


<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lobstr)</span></code></pre></div>
<p><a href="../pdf/cheatsheet-base-r.pdf"><em>R base
cheatsheet.pdf</em></a></p>
<object data="../pdf/cheatsheet-base-r.pdf" type="application/pdf" width="100%" height="100%">
</object>
<div id="r-变量" class="section level2">
<h2>R 变量</h2>
<div id="查看变量属性" class="section level3">
<h3>查看变量属性</h3>
<table>
<colgroup>
<col width="24%" />
<col width="75%" />
</colgroup>
<thead>
<tr class="header">
<th>函数</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>object.size(x)</code></td>
<td>对象所占内存空间的大小 (bytes)</td>
</tr>
<tr class="even">
<td><code>length(x)</code></td>
<td>对象的 size</td>
</tr>
<tr class="odd">
<td><code>is.*(x)</code></td>
<td>判断数据类型。判断向量最好用 <code>is.atomic()</code> 而非
<code>is.vector()</code></td>
</tr>
<tr class="even">
<td><code>as.*(x)</code></td>
<td>强制转换数据类型</td>
</tr>
<tr class="odd">
<td><code>typeof(x)/mode(x)</code></td>
<td>查看对象的数据类型。<br>若对象为homogeneous data
types，则返回元素的数据类型，如 integer, double, character,
logical；若为异质性的列表或数据框，则返回 list</td>
</tr>
<tr class="even">
<td><code>class(x)</code></td>
<td>查看对象所属的类</td>
</tr>
<tr class="odd">
<td><code>str(x)</code></td>
<td>对象的class、结构和概要信息</td>
</tr>
<tr class="even">
<td><code>tibble::glimpse()</code></td>
<td>tibble 版<code>str()</code>，不显示class，只显示数据</td>
</tr>
<tr class="odd">
<td><code>dim(x)</code></td>
<td>返回对象的维度，只适用于矩阵和数据框</td>
</tr>
<tr class="even">
<td><code>summary(x)</code></td>
<td>按列汇总对象的基本信息。对于因子，汇总取每一个水平的行数；对于数值向量，返回重要的分位数；对于其他类型的列，则显示列的长度、类型和模式。</td>
</tr>
<tr class="odd">
<td><code>head(x, n)</code></td>
<td>列出对象的前n个元素，默认n为6</td>
</tr>
<tr class="even">
<td><code>tail(x, n)</code></td>
<td>列出对象的后n个元素</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">=</span> <span class="fu">data.table</span>(<span class="at">id =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="at">lower =</span> letters[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>])</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(df)</span></code></pre></div>
<pre><code>#&gt; [1] &quot;list&quot;</code></pre>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(df)</span></code></pre></div>
<pre><code>#&gt; [1] &quot;data.table&quot; &quot;data.frame&quot;</code></pre>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(df)</span></code></pre></div>
<pre><code>#&gt; Classes &#39;data.table&#39; and &#39;data.frame&#39;:   10 obs. of  2 variables:
#&gt;  $ id   : int  1 2 3 4 5 6 7 8 9 10
#&gt;  $ lower: chr  &quot;a&quot; &quot;b&quot; &quot;c&quot; &quot;d&quot; ...
#&gt;  - attr(*, &quot;.internal.selfref&quot;)=&lt;externalptr&gt;</code></pre>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(df)</span></code></pre></div>
<pre><code>#&gt; Rows: 10
#&gt; Columns: 2
#&gt; $ id    &lt;int&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10
#&gt; $ lower &lt;chr&gt; &quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot;, &quot;f&quot;, &quot;g&quot;, &quot;h&quot;, &quot;i&quot;, &quot;j&quot;</code></pre>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> <span class="fu">summary</span>()</span></code></pre></div>
<pre><code>#&gt;        id           lower          
#&gt;  Min.   : 1.00   Length:10         
#&gt;  1st Qu.: 3.25   Class :character  
#&gt;  Median : 5.50   Mode  :character  
#&gt;  Mean   : 5.50                     
#&gt;  3rd Qu.: 7.75                     
#&gt;  Max.   :10.00</code></pre>
</div>
<div id="变量名" class="section level3">
<h3>变量名</h3>
<div id="指针" class="section level4">
<h4>指针</h4>
<p>对象的变量名是一个常量指针，指向一个对象所在的地址。</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> x</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="co"># x, y 为指向同一个向量的指针</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="fu">obj_addr</span>(x)</span></code></pre></div>
<pre><code>#&gt; [1] &quot;0x24adfe78&quot;</code></pre>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">obj_addr</span>(y)</span></code></pre></div>
<pre><code>#&gt; [1] &quot;0x24adfe78&quot;</code></pre>
</div>
<div id="不规则变量名" class="section level4">
<h4>不规则变量名</h4>
<p>要用反引号括起来</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>c <span class="sc">%&gt;%</span> <span class="fu">class</span>() <span class="co"># c是一个内置函数，所以一般变量不能以&#39;c命名</span></span></code></pre></div>
<pre><code>#&gt; [1] &quot;function&quot;</code></pre>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>c </span></code></pre></div>
<pre><code>#&gt; function (...)  .Primitive(&quot;c&quot;)</code></pre>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="st">`</span><span class="at">x+1</span><span class="st">`</span> <span class="ot">&lt;-</span> <span class="cf">function</span>(n) n <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="st">`</span><span class="at">x+1</span><span class="st">`</span></span></code></pre></div>
<pre><code>#&gt; function(n) n + 1</code></pre>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="st">`</span><span class="at">x+1</span><span class="st">`</span>(<span class="dv">3</span>)</span></code></pre></div>
<pre><code>#&gt; [1] 4</code></pre>
</div>
</div>
<div id="修改时复制-copy-on-modify" class="section level3">
<h3>修改时复制 copy-on-modify</h3>
<p>R 中的对象一般不许被修改（就像 JS
中的<code>const</code>常量），这对数据安全有好处。</p>
<p>赋值时 R 大量使用了拷贝机制，这是 R
速度慢的一个主要原因。如显示循环，每次迭代都会复制对象。</p>
<div id="会复制对象的情形" class="section level4">
<h4>会复制对象的情形</h4>
<div id="数字向量" class="section level5">
<h5>数字向量</h5>
<ol style="list-style-type: decimal">
<li><p>有多个指针指向同一个对象，且通过其中一个指针修改该对象时，会生成该对象的一个副本（一个新对象）。修改作用在这个副本上，然后使被修改的指针指向这个副本。</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="co"># tracemen()跟踪x指针指向的对象，每当这个对象被复制，tracemem()都会打印一条说明</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="fu">tracemem</span>(x), <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>)</span></code></pre></div>
<pre><code>#&gt; &lt;0000000027281F18&gt;</code></pre>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> x</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>y[<span class="dv">3</span>] <span class="ot">&lt;-</span> 4L <span class="co"># 发生拷贝</span></span></code></pre></div>
<pre><code>#&gt; tracemem[0x0000000027281f18 -&gt; 0x00000000257249f8]: eval eval eval_with_user_handlers withVisible withCallingHandlers handle timing_fn evaluate_call &lt;Anonymous&gt; evaluate in_dir in_input_dir eng_r block_exec call_block process_group.block process_group withCallingHandlers process_file &lt;Anonymous&gt; &lt;Anonymous&gt; do.call eval eval eval eval eval.parent local</code></pre>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">obj_addr</span>(x)</span></code></pre></div>
<pre><code>#&gt; [1] &quot;0x27281f18&quot;</code></pre>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">obj_addr</span>(y)</span></code></pre></div>
<pre><code>#&gt; [1] &quot;0x257249f8&quot;</code></pre>
<div class="sourceCode" id="cb32"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">untracemem</span>(x) <span class="co"># 关闭跟踪</span></span></code></pre></div></li>
<li><p>对象作为参数传递给函数，并在函数内部修改对象时，也会创建对象的副本</p>
<ol style="list-style-type: decimal">
<li>函数外部的变量名仍指向未被修改的原对象</li>
<li>但<strong>如果使用运算符
<code>&lt;&lt;-</code>，就可以修改函数外部的变量（如一些随着迭代一轮轮更新的统计变量）</strong>。某些情况下，这个功能非常重要，可以<strong>通过函数修改外部变量</strong>。</li>
</ol>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>modify_first <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>  x[<span class="dv">1</span>] <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>  x</span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>v1 <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)</span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="fu">tracemem</span>(v1), <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>)</span></code></pre></div>
<pre><code>#&gt; &lt;00000000274020B0&gt;</code></pre>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">modify_first</span>(v1)</span></code></pre></div>
<pre><code>#&gt; tracemem[0x00000000274020b0 -&gt; 0x00000000274036c0]: modify_first eval eval eval_with_user_handlers withVisible withCallingHandlers handle timing_fn evaluate_call &lt;Anonymous&gt; evaluate in_dir in_input_dir eng_r block_exec call_block process_group.block process_group withCallingHandlers process_file &lt;Anonymous&gt; &lt;Anonymous&gt; do.call eval eval eval eval eval.parent local</code></pre>
<pre><code>#&gt; [1] 0 2 3</code></pre>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>v1 <span class="co"># 外部的 v1 未被修改</span></span></code></pre></div>
<pre><code>#&gt; [1] 1 2 3</code></pre>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">0</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="fu">tracemem</span>(x), <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>)</span></code></pre></div>
<pre><code>#&gt; &lt;0000000027092658&gt;</code></pre>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>modify_x <span class="ot">&lt;-</span> <span class="cf">function</span>(value) {</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">&lt;&lt;-</span> value</span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a><span class="fu">modify_x</span>(<span class="dv">3</span>)</span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a>x <span class="co"># 外部的 x 被修改了</span></span></code></pre></div>
<pre><code>#&gt; [1] 3</code></pre></li>
</ol>
</div>
<div id="列表" class="section level5">
<h5>列表</h5>
<p>为了节省空间，列表储存的不是对象，而是指针。修改列表时，只有变化的元素会复制。</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>a <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>b <span class="ot">&lt;-</span> <span class="fu">list</span>(a, a)</span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>c <span class="ot">&lt;-</span> <span class="fu">list</span>(b, a, <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)</span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ref</span>(a, b, c)</span></code></pre></div>
<pre><code>#&gt; [1:0x25147420] &lt;int&gt; 
#&gt;  
#&gt; o [2:0x27a7cb88] &lt;list&gt; 
#&gt; +-[1:0x25147420] 
#&gt; \-[1:0x25147420] 
#&gt;  
#&gt; o [3:0x27b8e5a0] &lt;list&gt; 
#&gt; +-[2:0x27a7cb88] 
#&gt; +-[1:0x25147420] 
#&gt; \-[4:0x252557a8] &lt;int&gt;</code></pre>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>l1 <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)</span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>l2 <span class="ot">&lt;-</span> l1</span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a><span class="co"># 拷贝机制启动，但拷贝的是指针，而不是 value，这是浅拷贝</span></span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>l2[[<span class="dv">3</span>]] <span class="ot">&lt;-</span> <span class="dv">4</span> </span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a>lobstr<span class="sc">::</span><span class="fu">ref</span>(l1, l2)</span></code></pre></div>
<pre><code>#&gt; o [1:0x27c27510] &lt;list&gt; 
#&gt; +-[2:0x27a4cee0] &lt;dbl&gt; 
#&gt; +-[3:0x27a4cea8] &lt;dbl&gt; 
#&gt; \-[4:0x27a4ce70] &lt;dbl&gt; 
#&gt;  
#&gt; o [5:0x27c59930] &lt;list&gt; 
#&gt; +-[2:0x27a4cee0] 
#&gt; +-[3:0x27a4cea8] 
#&gt; \-[6:0x27a4cd90] &lt;dbl&gt;</code></pre>
<p><img src="http://humoon-image-hosting-service.oss-cn-beijing.aliyuncs.com/img/typora/JavaScript/l-modify-1.png" alt="img" style="zoom:50%;"/></p>
<p><img src="http://humoon-image-hosting-service.oss-cn-beijing.aliyuncs.com/img/typora/JavaScript/l-modify-2.png" alt="img" style="zoom:50%;"/></p>
</div>
<div id="数据框" class="section level5">
<h5>数据框</h5>
<p>数据框本质上是一个列表，储存的都是指向列向量的指针。</p>
<div class="figure">
<img
src="http://humoon-image-hosting-service.oss-cn-beijing.aliyuncs.com/img/typora/JavaScript/v2-2011de6f14aeeb477c91516ef289b32c_720w.jpg"
alt="" />
<p class="caption">img</p>
</div>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>d1 <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">x =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">6</span>), <span class="at">y =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">3</span>))</span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>d2 <span class="ot">&lt;-</span> d1</span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>d3 <span class="ot">&lt;-</span> d1</span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ref</span>(d1, d2)</span></code></pre></div>
<pre><code>#&gt; o [1:0x245966c8] &lt;df[,2]&gt; 
#&gt; +-x = [2:0x130fd420] &lt;dbl&gt; 
#&gt; \-y = [3:0x130fd330] &lt;dbl&gt; 
#&gt;  
#&gt; [1:0x245966c8]</code></pre>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ref</span>(d1, d3)</span></code></pre></div>
<pre><code>#&gt; o [1:0x245966c8] &lt;df[,2]&gt; 
#&gt; +-x = [2:0x130fd420] &lt;dbl&gt; 
#&gt; \-y = [3:0x130fd330] &lt;dbl&gt; 
#&gt;  
#&gt; [1:0x245966c8]</code></pre>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 修改列，该列复制；其他列扔指向原对象</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>d2[, <span class="dv">2</span>] <span class="ot">&lt;-</span> d2[, <span class="dv">2</span>] <span class="sc">*</span> <span class="dv">2</span></span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ref</span>(d1, d2)</span></code></pre></div>
<pre><code>#&gt; o [1:0x245966c8] &lt;df[,2]&gt; 
#&gt; +-x = [2:0x130fd420] &lt;dbl&gt; 
#&gt; \-y = [3:0x130fd330] &lt;dbl&gt; 
#&gt;  
#&gt; o [4:0x24dcac60] &lt;df[,2]&gt; 
#&gt; +-x = [2:0x130fd420] 
#&gt; \-y = [5:0x141240f8] &lt;dbl&gt;</code></pre>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 修改行，必须复制每一列</span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>d3[<span class="dv">1</span>, ] <span class="ot">&lt;-</span> d3[<span class="dv">1</span>, ] <span class="sc">*</span> <span class="dv">3</span></span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ref</span>(d1, d3)</span></code></pre></div>
<pre><code>#&gt; o [1:0x245966c8] &lt;df[,2]&gt; 
#&gt; +-x = [2:0x130fd420] &lt;dbl&gt; 
#&gt; \-y = [3:0x130fd330] &lt;dbl&gt; 
#&gt;  
#&gt; o [4:0x12dc27a8] &lt;df[,2]&gt; 
#&gt; +-x = [5:0x271a72e8] &lt;dbl&gt; 
#&gt; \-y = [6:0x271a71a8] &lt;dbl&gt;</code></pre>
<div class="figure">
<img
src="http://humoon-image-hosting-service.oss-cn-beijing.aliyuncs.com/img/typora/JavaScript/v2-215964869b3a1831e898cdf97795b94e_720w.jpg"
alt="" />
<p class="caption">img</p>
</div>
<div class="figure">
<img
src="http://humoon-image-hosting-service.oss-cn-beijing.aliyuncs.com/img/typora/JavaScript/v2-eea06589af18217eecda405f7ef0e781_r.jpg"
alt="" />
<p class="caption">img</p>
</div>
</div>
<div id="字符向量" class="section level5">
<h5>字符向量</h5>
<p>也是指针的向量。每个指针指向一个字符串，这个字符串位于全局字符串池中。</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;a&quot;</span>, <span class="st">&quot;abc&quot;</span>, <span class="st">&quot;d&quot;</span>)</span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ref</span>(x, <span class="at">character =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>#&gt; o [1:0x27889690] &lt;chr&gt; 
#&gt; +-[2:0x146d9d70] &lt;string: &quot;a&quot;&gt; 
#&gt; +-[2:0x146d9d70] 
#&gt; +-[3:0x12aa7a80] &lt;string: &quot;abc&quot;&gt; 
#&gt; \-[4:0x148d3cb8] &lt;string: &quot;d&quot;&gt;</code></pre>
<div class="figure">
<img
src="http://humoon-image-hosting-service.oss-cn-beijing.aliyuncs.com/img/typora/JavaScript/v2-be504b8fb9460aecea72cd2cb21c811e_720w.jpg"
alt="" />
<p class="caption">img</p>
</div>
</div>
</div>
<div id="不会复制对象的情形" class="section level4">
<h4>不会复制对象的情形</h4>
<div id="唯一指针" class="section level5">
<h5>唯一指针</h5>
<p>只有一个指针指向对象时，修改对象不会发生复制。</p>
<p>(Rstudio 中与 Console 中不同，Rstudio 中仍要复制)</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>z <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>)</span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="fu">tracemem</span>(z), <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>)</span></code></pre></div>
<pre><code>#&gt; &lt;0000000027730588&gt;</code></pre>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a>z[<span class="dv">3</span>] <span class="ot">&lt;-</span> 4L</span></code></pre></div>
<pre><code>#&gt; tracemem[0x0000000027730588 -&gt; 0x000000002774cef8]: eval eval eval_with_user_handlers withVisible withCallingHandlers handle timing_fn evaluate_call &lt;Anonymous&gt; evaluate in_dir in_input_dir eng_r block_exec call_block process_group.block process_group withCallingHandlers process_file &lt;Anonymous&gt; &lt;Anonymous&gt; do.call eval eval eval eval eval.parent local</code></pre>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>z</span></code></pre></div>
<pre><code>#&gt; [1] 1 2 4 4 5</code></pre>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="fu">obj_addr</span>(z)</span></code></pre></div>
<pre><code>#&gt; [1] &quot;0x2774cef8&quot;</code></pre>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="fu">untracemem</span>(z) <span class="co"># 关闭跟踪</span></span></code></pre></div>
<p>但是，R
对指针数量的判断不够智能。如两个指针指向一个对象，其中一个被删除后，R
却不知道，仍然以为有两个指针。因此会产生很多不必要的对象拷贝。</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="fu">matrix</span>(<span class="fu">runif</span>(<span class="dv">5</span> <span class="sc">*</span> <span class="fl">1e4</span>), <span class="at">ncol =</span> <span class="dv">5</span>))</span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="fu">tracemem</span>(x), <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span>)</span></code></pre></div>
<pre><code>#&gt; &lt;00000000279ADDB8&gt;</code></pre>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>medians <span class="ot">&lt;-</span> <span class="fu">vapply</span>(x, median, <span class="fu">numeric</span>(<span class="dv">1</span>))</span></code></pre></div>
<pre><code>#&gt; tracemem[0x00000000279addb8 -&gt; 0x00000000279df400]: as.list.data.frame as.list vapply eval eval eval_with_user_handlers withVisible withCallingHandlers handle timing_fn evaluate_call &lt;Anonymous&gt; evaluate in_dir in_input_dir eng_r block_exec call_block process_group.block process_group withCallingHandlers process_file &lt;Anonymous&gt; &lt;Anonymous&gt; do.call eval eval eval eval eval.parent local</code></pre>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>) {</span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a>  x[[i]] <span class="ot">&lt;-</span> x[[i]] <span class="sc">-</span> medians[[i]]</span>
<span id="cb71-3"><a href="#cb71-3" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>#&gt; tracemem[0x00000000279addb8 -&gt; 0x0000000027a4eb60]: eval eval eval_with_user_handlers withVisible withCallingHandlers handle timing_fn evaluate_call &lt;Anonymous&gt; evaluate in_dir in_input_dir eng_r block_exec call_block process_group.block process_group withCallingHandlers process_file &lt;Anonymous&gt; &lt;Anonymous&gt; do.call eval eval eval eval eval.parent local 
#&gt; tracemem[0x0000000027a4eb60 -&gt; 0x0000000027a63e38]: [[&lt;-.data.frame [[&lt;- eval eval eval_with_user_handlers withVisible withCallingHandlers handle timing_fn evaluate_call &lt;Anonymous&gt; evaluate in_dir in_input_dir eng_r block_exec call_block process_group.block process_group withCallingHandlers process_file &lt;Anonymous&gt; &lt;Anonymous&gt; do.call eval eval eval eval eval.parent local 
#&gt; tracemem[0x0000000027a63e38 -&gt; 0x0000000027a63dc8]: eval eval eval_with_user_handlers withVisible withCallingHandlers handle timing_fn evaluate_call &lt;Anonymous&gt; evaluate in_dir in_input_dir eng_r block_exec call_block process_group.block process_group withCallingHandlers process_file &lt;Anonymous&gt; &lt;Anonymous&gt; do.call eval eval eval eval eval.parent local 
#&gt; tracemem[0x0000000027a63dc8 -&gt; 0x0000000027a63d58]: [[&lt;-.data.frame [[&lt;- eval eval eval_with_user_handlers withVisible withCallingHandlers handle timing_fn evaluate_call &lt;Anonymous&gt; evaluate in_dir in_input_dir eng_r block_exec call_block process_group.block process_group withCallingHandlers process_file &lt;Anonymous&gt; &lt;Anonymous&gt; do.call eval eval eval eval eval.parent local 
#&gt; tracemem[0x0000000027a63d58 -&gt; 0x0000000027a63ce8]: eval eval eval_with_user_handlers withVisible withCallingHandlers handle timing_fn evaluate_call &lt;Anonymous&gt; evaluate in_dir in_input_dir eng_r block_exec call_block process_group.block process_group withCallingHandlers process_file &lt;Anonymous&gt; &lt;Anonymous&gt; do.call eval eval eval eval eval.parent local 
#&gt; tracemem[0x0000000027a63ce8 -&gt; 0x0000000027a63c08]: [[&lt;-.data.frame [[&lt;- eval eval eval_with_user_handlers withVisible withCallingHandlers handle timing_fn evaluate_call &lt;Anonymous&gt; evaluate in_dir in_input_dir eng_r block_exec call_block process_group.block process_group withCallingHandlers process_file &lt;Anonymous&gt; &lt;Anonymous&gt; do.call eval eval eval eval eval.parent local 
#&gt; tracemem[0x0000000027a63c08 -&gt; 0x0000000027a63738]: eval eval eval_with_user_handlers withVisible withCallingHandlers handle timing_fn evaluate_call &lt;Anonymous&gt; evaluate in_dir in_input_dir eng_r block_exec call_block process_group.block process_group withCallingHandlers process_file &lt;Anonymous&gt; &lt;Anonymous&gt; do.call eval eval eval eval eval.parent local 
#&gt; tracemem[0x0000000027a63738 -&gt; 0x0000000027a81618]: [[&lt;-.data.frame [[&lt;- eval eval eval_with_user_handlers withVisible withCallingHandlers handle timing_fn evaluate_call &lt;Anonymous&gt; evaluate in_dir in_input_dir eng_r block_exec call_block process_group.block process_group withCallingHandlers process_file &lt;Anonymous&gt; &lt;Anonymous&gt; do.call eval eval eval eval eval.parent local 
#&gt; tracemem[0x0000000027a81618 -&gt; 0x0000000027a81538]: eval eval eval_with_user_handlers withVisible withCallingHandlers handle timing_fn evaluate_call &lt;Anonymous&gt; evaluate in_dir in_input_dir eng_r block_exec call_block process_group.block process_group withCallingHandlers process_file &lt;Anonymous&gt; &lt;Anonymous&gt; do.call eval eval eval eval eval.parent local 
#&gt; tracemem[0x0000000027a81538 -&gt; 0x0000000027a814c8]: [[&lt;-.data.frame [[&lt;- eval eval eval_with_user_handlers withVisible withCallingHandlers handle timing_fn evaluate_call &lt;Anonymous&gt; evaluate in_dir in_input_dir eng_r block_exec call_block process_group.block process_group withCallingHandlers process_file &lt;Anonymous&gt; &lt;Anonymous&gt; do.call eval eval eval eval eval.parent local</code></pre>
</div>
<div id="环境对象总是被就地修改" class="section level5">
<h5>环境对象总是被就地修改</h5>
</div>
</div>
</div>
<div id="解构赋值unpacking-assignment" class="section level3">
<h3>解构赋值（Unpacking Assignment）</h3>
<p><strong>zeallot 包提供的 <code>%&lt;-%</code> 和 <code>%&gt;-%</code>
函数</strong></p>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(zeallot)</span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a><span class="co"># unpack vector</span></span>
<span id="cb73-4"><a href="#cb73-4" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(lat, lng) <span class="sc">%&lt;-%</span> <span class="fu">c</span>(<span class="fl">38.061944</span>, <span class="sc">-</span><span class="fl">122.643889</span>)</span>
<span id="cb73-5"><a href="#cb73-5" aria-hidden="true" tabindex="-1"></a>lat</span></code></pre></div>
<pre><code>#&gt; [1] 38.06194</code></pre>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a>lng</span></code></pre></div>
<pre><code>#&gt; [1] -122.6439</code></pre>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="co"># unpack list</span></span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a>coords_list <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span>
<span id="cb77-3"><a href="#cb77-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">list</span>(<span class="fl">38.061944</span>, <span class="sc">-</span><span class="fl">122.643889</span>)</span>
<span id="cb77-4"><a href="#cb77-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb77-5"><a href="#cb77-5" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(lat, lng) <span class="sc">%&lt;-%</span> <span class="fu">coords_list</span>()</span>
<span id="cb77-6"><a href="#cb77-6" aria-hidden="true" tabindex="-1"></a>lat</span></code></pre></div>
<pre><code>#&gt; [1] 38.06194</code></pre>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a>lng</span></code></pre></div>
<pre><code>#&gt; [1] -122.6439</code></pre>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="co"># unpack regression result</span></span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(inter, slope) <span class="sc">%&lt;-%</span> <span class="fu">coef</span>(<span class="fu">lm</span>(mpg <span class="sc">~</span> cyl, <span class="at">data =</span> mtcars))</span>
<span id="cb81-3"><a href="#cb81-3" aria-hidden="true" tabindex="-1"></a>inter</span></code></pre></div>
<pre><code>#&gt; [1] 37.88458</code></pre>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a>slope</span></code></pre></div>
<pre><code>#&gt; [1] -2.87579</code></pre>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="co"># unpack data.frame</span></span>
<span id="cb85-2"><a href="#cb85-2" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(mpg, cyl, disp, hp) <span class="sc">%&lt;-%</span> mtcars[, <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>]</span>
<span id="cb85-3"><a href="#cb85-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(mpg)</span></code></pre></div>
<pre><code>#&gt; [1] 21.0 21.0 22.8 21.4 18.7 18.1</code></pre>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="co"># unpack nested values</span></span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(a, <span class="fu">c</span>(b, d), e) <span class="sc">%&lt;-%</span> <span class="fu">list</span>(<span class="st">&quot;begin&quot;</span>, <span class="fu">list</span>(<span class="st">&quot;middle1&quot;</span>, <span class="st">&quot;middle2&quot;</span>), <span class="st">&quot;end&quot;</span>)</span>
<span id="cb87-3"><a href="#cb87-3" aria-hidden="true" tabindex="-1"></a>a</span></code></pre></div>
<pre><code>#&gt; [1] &quot;begin&quot;</code></pre>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a>b</span></code></pre></div>
<pre><code>#&gt; [1] &quot;middle1&quot;</code></pre>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a>d</span></code></pre></div>
<pre><code>#&gt; [1] &quot;middle2&quot;</code></pre>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a>e</span></code></pre></div>
<pre><code>#&gt; [1] &quot;end&quot;</code></pre>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="co"># unpack character string</span></span>
<span id="cb95-2"><a href="#cb95-2" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(ch1, ch2, ch3) <span class="sc">%&lt;-%</span> <span class="st">&quot;abc&quot;</span></span>
<span id="cb95-3"><a href="#cb95-3" aria-hidden="true" tabindex="-1"></a>ch1</span></code></pre></div>
<pre><code>#&gt; [1] &quot;a&quot;</code></pre>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a>ch2</span></code></pre></div>
<pre><code>#&gt; [1] &quot;b&quot;</code></pre>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a>ch3</span></code></pre></div>
<pre><code>#&gt; [1] &quot;c&quot;</code></pre>
<div class="sourceCode" id="cb101"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a><span class="co"># unpack Date</span></span>
<span id="cb101-2"><a href="#cb101-2" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(y, m, d) <span class="sc">%&lt;-%</span> <span class="fu">Sys.Date</span>()</span>
<span id="cb101-3"><a href="#cb101-3" aria-hidden="true" tabindex="-1"></a>y</span></code></pre></div>
<pre><code>#&gt; [1] 2022</code></pre>
<div class="sourceCode" id="cb103"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a>m</span></code></pre></div>
<pre><code>#&gt; [1] 4</code></pre>
<div class="sourceCode" id="cb105"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a>d</span></code></pre></div>
<pre><code>#&gt; [1] 16</code></pre>
<div class="sourceCode" id="cb107"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ... rest of</span></span>
<span id="cb107-2"><a href="#cb107-2" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(begin, ...middle, end) <span class="sc">%&lt;-%</span> <span class="fu">list</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>)</span>
<span id="cb107-3"><a href="#cb107-3" aria-hidden="true" tabindex="-1"></a>begin</span></code></pre></div>
<pre><code>#&gt; [1] 1</code></pre>
<div class="sourceCode" id="cb109"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a>middle</span></code></pre></div>
<pre><code>#&gt; [[1]]
#&gt; [1] 2
#&gt; 
#&gt; [[2]]
#&gt; [1] 3
#&gt; 
#&gt; [[3]]
#&gt; [1] 4</code></pre>
<div class="sourceCode" id="cb111"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="co"># place holder</span></span>
<span id="cb111-2"><a href="#cb111-2" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(min_wt, ., ., mean_wt, ., max_wt) <span class="sc">%&lt;-%</span> <span class="fu">summary</span>(mtcars<span class="sc">$</span>wt)</span>
<span id="cb111-3"><a href="#cb111-3" aria-hidden="true" tabindex="-1"></a>min_wt</span></code></pre></div>
<pre><code>#&gt; [1] 1.513</code></pre>
<div class="sourceCode" id="cb113"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a>mean_wt</span></code></pre></div>
<pre><code>#&gt; [1] 3.21725</code></pre>
<div class="sourceCode" id="cb115"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb115-1"><a href="#cb115-1" aria-hidden="true" tabindex="-1"></a>max_wt</span></code></pre></div>
<pre><code>#&gt; [1] 5.424</code></pre>
<div class="sourceCode" id="cb117"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb117-1"><a href="#cb117-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 向右的解构赋值符号 %-&gt;%</span></span>
<span id="cb117-2"><a href="#cb117-2" aria-hidden="true" tabindex="-1"></a>mtcars <span class="sc">%&gt;%</span></span>
<span id="cb117-3"><a href="#cb117-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">subset</span>(hp <span class="sc">&gt;</span> <span class="dv">100</span>) <span class="sc">%&gt;%</span></span>
<span id="cb117-4"><a href="#cb117-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aggregate</span>(. <span class="sc">~</span> cyl, <span class="at">data =</span> ., <span class="at">FUN =</span> . <span class="sc">%&gt;%</span> <span class="fu">mean</span>() <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">2</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb117-5"><a href="#cb117-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">transform</span>(<span class="at">kpl =</span> mpg <span class="sc">%&gt;%</span> <span class="fu">multiply_by</span>(<span class="fl">0.4251</span>)) <span class="sc">%-&gt;%</span> </span>
<span id="cb117-6"><a href="#cb117-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(cyl, mpg, ...rest)</span>
<span id="cb117-7"><a href="#cb117-7" aria-hidden="true" tabindex="-1"></a>cyl</span></code></pre></div>
<pre><code>#&gt; [1] 4 6 8</code></pre>
</div>
</div>
<div id="条件语句" class="section level2">
<h2>条件语句</h2>
<div id="if...else-if...else..." class="section level3">
<h3><code>if...else if...else...</code></h3>
<div class="sourceCode" id="cb119"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (condition1) {</span>
<span id="cb119-2"><a href="#cb119-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb119-3"><a href="#cb119-3" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> <span class="cf">if</span> (condition2) { </span>
<span id="cb119-4"><a href="#cb119-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># else if中间有空格，跟 JavaScript 一样</span></span>
<span id="cb119-5"><a href="#cb119-5" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb119-6"><a href="#cb119-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb119-7"><a href="#cb119-7" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
</div>
<div id="ifelse" class="section level3">
<h3><code>ifelse()</code></h3>
<p><code>if...else</code> 的 condition
不能是向量，将自动忽略条件向量中第一个以后的元素。有时，要用<code>any(bool vector)</code>和<code>all(bool vector)</code>将布尔向量转换为一个bool值，再配合<code>if</code>使用。</p>
<p>而三元选择符<code>ifelse(cond, statement1, statement2)</code>可以接收三个向量，按各自分量执行向量化操作</p>
<blockquote>
<p>对应 JS 中的 <code>condition? Statement1: statement2;</code></p>
</blockquote>
</div>
<div id="switchstatement-list" class="section level3">
<h3><code>switch(statement, list)</code></h3>
<p>list 是一组键值对，statement 是一个键，返回 list
中与该键对应的值。</p>
<div class="sourceCode" id="cb120"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb120-1"><a href="#cb120-1" aria-hidden="true" tabindex="-1"></a>result1 <span class="ot">=</span> <span class="cf">switch</span>(<span class="st">&#39;fruit&#39;</span>,</span>
<span id="cb120-2"><a href="#cb120-2" aria-hidden="true" tabindex="-1"></a>                 <span class="at">meat =</span> <span class="st">&quot;chicken&quot;</span>,</span>
<span id="cb120-3"><a href="#cb120-3" aria-hidden="true" tabindex="-1"></a>                 <span class="at">fruit =</span> <span class="st">&quot;apple&quot;</span>,</span>
<span id="cb120-4"><a href="#cb120-4" aria-hidden="true" tabindex="-1"></a>                 <span class="at">vegetable =</span> <span class="st">&quot;cucumber&quot;</span>,</span>
<span id="cb120-5"><a href="#cb120-5" aria-hidden="true" tabindex="-1"></a>                 <span class="st">&#39;soup&#39;</span>)</span>
<span id="cb120-6"><a href="#cb120-6" aria-hidden="true" tabindex="-1"></a>result1</span>
<span id="cb120-7"><a href="#cb120-7" aria-hidden="true" tabindex="-1"></a><span class="co"># [1] &quot;apple&quot;</span></span>
<span id="cb120-8"><a href="#cb120-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-9"><a href="#cb120-9" aria-hidden="true" tabindex="-1"></a>result2 <span class="ot">=</span> <span class="cf">switch</span>(<span class="st">&#39;final&#39;</span>,</span>
<span id="cb120-10"><a href="#cb120-10" aria-hidden="true" tabindex="-1"></a>                 <span class="at">meat =</span> <span class="st">&quot;chicken&quot;</span>,</span>
<span id="cb120-11"><a href="#cb120-11" aria-hidden="true" tabindex="-1"></a>                 <span class="at">fruit =</span> <span class="st">&quot;apple&quot;</span>,</span>
<span id="cb120-12"><a href="#cb120-12" aria-hidden="true" tabindex="-1"></a>                 <span class="at">vegetable =</span> <span class="st">&quot;cucumber&quot;</span>,</span>
<span id="cb120-13"><a href="#cb120-13" aria-hidden="true" tabindex="-1"></a>                 <span class="st">&#39;soup&#39;</span>)</span>
<span id="cb120-14"><a href="#cb120-14" aria-hidden="true" tabindex="-1"></a>result2 <span class="co"># 都不匹配时，返回无key的值</span></span>
<span id="cb120-15"><a href="#cb120-15" aria-hidden="true" tabindex="-1"></a><span class="co"># [1] &quot;soup&quot;</span></span></code></pre></div>
</div>
</div>
<div id="循环语句" class="section level2">
<h2>循环语句</h2>
<div id="repeat" class="section level3">
<h3><code>repeat{}</code></h3>
<p>必须手动指定 break 条件，否则无限循环。这在创建交互式 app
时很有用。</p>
</div>
<div id="while-condition" class="section level3">
<h3><code>while (condition) {}</code></h3>
</div>
<div id="for-iterator-in-sequence" class="section level3">
<h3><code>for( iterator in sequence) {}</code></h3>
<div id="预先分配空间提高传统-for-循环的效率" class="section level4">
<h4>预先分配空间：提高传统 for 循环的效率</h4>
<p>R 中如果对对象的 size
做了改动（如添加一个元素），要把整个数据结构都重新拷贝一份，这非常慢。如果在每次循环中都有这种语句，时间复杂度会是<span
class="math inline">\(\mathrm{O}\left(\mathrm{n}^{2}\right)\)</span>级的。</p>
<p>所以最好在开始循环前，预先声明一个向量，为输出结果分配足够的空间，这对循环效率非常重要。预先分配的空间往往是一个list，在循环结束后需要打散并重组为我们需要的对象：对于向量用<code>unlist()</code>，数据框用<code>dplyr::bind_rows()</code></p>
<p>这其实有点像 JS 里面的:</p>
<div class="sourceCode" id="cb121"><pre
class="sourceCode js"><code class="sourceCode javascript"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> arr <span class="op">=</span> []<span class="op">;</span></span>
<span id="cb121-2"><a href="#cb121-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (<span class="kw">let</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">6</span><span class="op">;</span> i<span class="op">++</span>) {</span>
<span id="cb121-3"><a href="#cb121-3" aria-hidden="true" tabindex="-1"></a>  arr<span class="op">.</span><span class="fu">push</span>(i <span class="op">^</span> <span class="dv">2</span> <span class="op">%</span> <span class="dv">11</span>)<span class="op">;</span></span>
<span id="cb121-4"><a href="#cb121-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb121-5"><a href="#cb121-5" aria-hidden="true" tabindex="-1"></a><span class="bu">console</span><span class="op">.</span><span class="fu">log</span>(arr)<span class="op">;</span></span></code></pre></div>
<script type="text/javascript">
const arr = [];
for (let i = 0; i < 6; i++) {
  arr.push(i ^ 2 % 11);
}
console.log(arr);
</script>
<p>例：</p>
<div class="sourceCode" id="cb122"><pre
class="sourceCode r"><code class="sourceCode r"><span id="cb122-1"><a href="#cb122-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb122-2"><a href="#cb122-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">a =</span> <span class="fu">rnorm</span>(<span class="dv">10</span>),</span>
<span id="cb122-3"><a href="#cb122-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">b =</span> <span class="fu">rnorm</span>(<span class="dv">10</span>),</span>
<span id="cb122-4"><a href="#cb122-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">c =</span> <span class="fu">rnorm</span>(<span class="dv">10</span>),</span>
<span id="cb122-5"><a href="#cb122-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">d =</span> <span class="fu">rnorm</span>(<span class="dv">10</span>)</span>
<span id="cb122-6"><a href="#cb122-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb122-7"><a href="#cb122-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-8"><a href="#cb122-8" aria-hidden="true" tabindex="-1"></a><span class="co"># 要求df各列的中位数，先为输出分配空间，长度为ncol(df)的向量</span></span>
<span id="cb122-9"><a href="#cb122-9" aria-hidden="true" tabindex="-1"></a>output <span class="ot">&lt;-</span>  <span class="fu">double</span>(<span class="fu">ncol</span>(df))</span>
<span id="cb122-10"><a href="#cb122-10" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">ncol</span>(df)) { </span>
<span id="cb122-11"><a href="#cb122-11" aria-hidden="true" tabindex="-1"></a>  output[[i]] <span class="ot">&lt;-</span> <span class="fu">median</span>(df[[i]])</span>
<span id="cb122-12"><a href="#cb122-12" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb122-13"><a href="#cb122-13" aria-hidden="true" tabindex="-1"></a>output</span></code></pre></div>
<pre><code>#&gt; [1]  0.1464552 -0.6036229  0.2464697  0.7352336</code></pre>
</div>
</div>
<div id="break-关键字" class="section level3">
<h3><code>break</code> 关键字</h3>
</div>
<div id="next-关键字" class="section level3">
<h3><code>next</code> 关键字</h3>
</div>
</div>
<div id="debug" class="section level2">
<h2>Debug</h2>
<p><code>stop(string)</code> 终止程序并报错：“Error: string”</p>
</div>

<div id="rmd-source-code">LS0tDQp0aXRsZTogIlIgQmFzaWMgR3JhbW1hciINCnN1YnRpdGxlOiBWYXJpYWJsZSwgQ29uZGl0aW9uLCBMb29wIGFuZCBEZWJ1Zw0KYXV0aG9yOiAiSHVtb29uIg0KZGF0ZTogImByIFN5cy5EYXRlKClgIg0Kb3V0cHV0OiBodG1sX2RvY3VtZW50DQpkb2N1bWVudGNsYXNzOiBjdGV4YXJ0DQpjbGFzc29wdGlvbjogaHlwZXJyZWYsDQotLS0NCg0KYGBge3Igc2V0dXAsIGluY2x1ZGUgPSBGQUxTRX0NCnNvdXJjZSgiLi4vUm1hcmtkb3duLXRlbXBsYXRlL1JtYXJrZG93bl9jb25maWcuUiIpDQoNCiMjIGdsb2JhbCBvcHRpb25zID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09DQprbml0cjo6b3B0c19jaHVuayRzZXQoDQogIHdpZHRoID0gY29uZmlnJHdpZHRoLA0KICBmaWcud2lkdGggPSBjb25maWckZmlnLndpZHRoLA0KICBmaWcuYXNwID0gY29uZmlnJGZpZy5hc3AsDQogIG91dC53aWR0aCA9IGNvbmZpZyRvdXQud2lkdGgsDQogIGZpZy5hbGlnbiA9IGNvbmZpZyRmaWcuYWxpZ24sDQogIGZpZy5wYXRoID0gY29uZmlnJGZpZy5wYXRoLA0KICBmaWcuc2hvdyA9IGNvbmZpZyRmaWcuc2hvdywNCiAgd2FybiA9IGNvbmZpZyR3YXJuLA0KICB3YXJuaW5nID0gY29uZmlnJHdhcm5pbmcsDQogIG1lc3NhZ2UgPSBjb25maWckbWVzc2FnZSwNCiAgZWNobyA9IGNvbmZpZyRlY2hvLCANCiAgZXZhbCA9IGNvbmZpZyRldmFsLCANCiAgdGlkeSA9IGNvbmZpZyR0aWR5LCANCiAgY29tbWVudCA9IGNvbmZpZyRjb21tZW50LCANCiAgY29sbGFwc2UgPSBjb25maWckY29sbGFwc2UsIA0KICBjYWNoZSA9IGNvbmZpZyRjYWNoZSwNCiAgY2FjaGUuY29tbWVudHMgPSBjb25maWckY2FjaGUuY29tbWVudHMsDQogIGF1dG9kZXAgPSBjb25maWckYXV0b2RlcA0KKQ0KDQojIyB1c2UgbmVjZXNzYXJ5IHBhY2thZ2VzID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQ0KbGlicmFyeSh0aWR5dmVyc2UpDQpsaWJyYXJ5KGRhdGEudGFibGUpDQpsaWJyYXJ5KG1hZ3JpdHRyKQ0KbGlicmFyeShwbG90bHkpDQpsaWJyYXJ5KGh0bWx3aWRnZXRzKQ0KYGBgDQoNCmBgYHtyLCBlY2hvPVRSVUV9DQpsaWJyYXJ5KGxvYnN0cikNCmBgYA0KDQoNCjxhIGhyZWY9Ii4uL3BkZi9jaGVhdHNoZWV0LWJhc2Utci5wZGYiPipSIGJhc2UgY2hlYXRzaGVldC5wZGYqPC9hPg0KDQo8b2JqZWN0IGRhdGE9Ii4uL3BkZi9jaGVhdHNoZWV0LWJhc2Utci5wZGYiIHR5cGU9ImFwcGxpY2F0aW9uL3BkZiIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSI+PC9vYmplY3Q+DQoNCg0KIyMgUiDlj5jph48NCg0KIyMjIOafpeeci+WPmOmHj+WxnuaApw0KDQp8IOWHveaVsCAgICAgICAgICAgICAgICB8IOivtOaYjiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwNCnwgLS0tLS0tLS0tLS0tLS0tLS0tLSB8IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSB8DQp8IGBvYmplY3Quc2l6ZSh4KWAgICAgfCDlr7nosaHmiYDljaDlhoXlrZjnqbrpl7TnmoTlpKflsI8gKGJ5dGVzKSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8DQp8IGBsZW5ndGgoeClgICAgICAgICAgfCDlr7nosaHnmoQgc2l6ZSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfA0KfCBgaXMuKih4KWAgICAgICAgICAgIHwg5Yik5pat5pWw5o2u57G75Z6L44CC5Yik5pat5ZCR6YeP5pyA5aW955SoIGBpcy5hdG9taWMoKWAg6ICM6Z2eIGBpcy52ZWN0b3IoKWAgfA0KfCBgYXMuKih4KWAgICAgICAgICAgIHwg5by65Yi26L2s5o2i5pWw5o2u57G75Z6LICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfA0KfCBgdHlwZW9mKHgpL21vZGUoeClgIHwg5p+l55yL5a+56LGh55qE5pWw5o2u57G75Z6L44CCPGJyPuiLpeWvueixoeS4umhvbW9nZW5lb3VzIGRhdGEgdHlwZXPvvIzliJnov5Tlm57lhYPntKDnmoTmlbDmja7nsbvlnovvvIzlpoIgaW50ZWdlciwgIGRvdWJsZSwgY2hhcmFjdGVyLCBsb2dpY2Fs77yb6Iul5Li65byC6LSo5oCn55qE5YiX6KGo5oiW5pWw5o2u5qGG77yM5YiZ6L+U5ZueIGxpc3QgfA0KfCBgY2xhc3MoeClgICAgICAgICAgIHwg5p+l55yL5a+56LGh5omA5bGe55qE57G7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfA0KfCBgc3RyKHgpYCAgICAgICAgICAgIHwg5a+56LGh55qEY2xhc3PjgIHnu5PmnoTlkozmpoLopoHkv6Hmga8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfA0KfCBgdGliYmxlOjpnbGltcHNlKClgIHwgdGliYmxlIOeJiGBzdHIoKWDvvIzkuI3mmL7npLpjbGFzc++8jOWPquaYvuekuuaVsOaNriAgICAgICAgICAgICAgICAgICAgfA0KfCBgZGltKHgpYCAgICAgICAgICAgIHwg6L+U5Zue5a+56LGh55qE57u05bqm77yM5Y+q6YCC55So5LqO55+p6Zi15ZKM5pWw5o2u5qGGICAgICAgICAgICAgICAgICAgICAgICAgIHwNCnwgYHN1bW1hcnkoeClgICAgICAgICB8IOaMieWIl+axh+aAu+WvueixoeeahOWfuuacrOS/oeaBr+OAguWvueS6juWboOWtkO+8jOaxh+aAu+WPluavj+S4gOS4quawtOW5s+eahOihjOaVsO+8m+WvueS6juaVsOWAvOWQkemHj++8jOi/lOWbnumHjeimgeeahOWIhuS9jeaVsO+8m+WvueS6juWFtuS7luexu+Wei+eahOWIl++8jOWImeaYvuekuuWIl+eahOmVv+W6puOAgeexu+Wei+WSjOaooeW8j+OAgiB8DQp8IGBoZWFkKHgsIG4pYCAgICAgICAgfCDliJflh7rlr7nosaHnmoTliY1u5Liq5YWD57Sg77yM6buY6K6kbuS4ujYgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwNCnwgYHRhaWwoeCwgbilgICAgICAgICB8IOWIl+WHuuWvueixoeeahOWQjm7kuKrlhYPntKAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8DQoNCg0KDQpgYGB7cn0NCmRmID0gZGF0YS50YWJsZShpZCA9IDE6MTAsIGxvd2VyID0gbGV0dGVyc1sxOjEwXSkNCg0KdHlwZW9mKGRmKQ0KY2xhc3MoZGYpDQpzdHIoZGYpDQpnbGltcHNlKGRmKQ0KDQpkZiAlPiUgc3VtbWFyeSgpDQpgYGANCg0KIyMjIOWPmOmHj+WQjQ0KDQojIyMjIOaMh+mSiA0KDQrlr7nosaHnmoTlj5jph4/lkI3mmK/kuIDkuKrluLjph4/mjIfpkojvvIzmjIflkJHkuIDkuKrlr7nosaHmiYDlnKjnmoTlnLDlnYDjgIINCg0KYGBge3J9DQp4IDwtIGMoMSwgMiwgMykNCnkgPC0geA0KIyB4LCB5IOS4uuaMh+WQkeWQjOS4gOS4quWQkemHj+eahOaMh+mSiA0Kb2JqX2FkZHIoeCkNCm9ial9hZGRyKHkpDQpgYGANCg0KIyMjIyDkuI3op4TliJnlj5jph4/lkI0NCg0K6KaB55So5Y+N5byV5Y+35ous6LW35p2lDQoNCmBgYHtyfQ0KYyAlPiUgY2xhc3MoKSAjIGPmmK/kuIDkuKrlhoXnva7lh73mlbDvvIzmiYDku6XkuIDoiKzlj5jph4/kuI3og73ku6UnY+WRveWQjQ0KYyANCg0KYHgrMWAgPC0gZnVuY3Rpb24obikgbiArIDENCmB4KzFgDQpgeCsxYCgzKQ0KYGBgDQoNCiMjIyDkv67mlLnml7blpI3liLYgY29weS1vbi1tb2RpZnkNCg0KUiDkuK3nmoTlr7nosaHkuIDoiKzkuI3orrjooqvkv67mlLnvvIjlsLHlg48gSlMg5Lit55qEYGNvbnN0YOW4uOmHj++8ie+8jOi/meWvueaVsOaNruWuieWFqOacieWlveWkhOOAgg0KDQrotYvlgLzml7YgUiDlpKfph4/kvb/nlKjkuobmi7fotJ3mnLrliLbvvIzov5nmmK8gUiDpgJ/luqbmhaLnmoTkuIDkuKrkuLvopoHljp/lm6DjgILlpoLmmL7npLrlvqrnjq/vvIzmr4/mrKHov63ku6Ppg73kvJrlpI3liLblr7nosaHjgIINCg0KIyMjIyDkvJrlpI3liLblr7nosaHnmoTmg4XlvaINCg0KIyMjIyMg5pWw5a2X5ZCR6YePDQoNCjEuICDmnInlpJrkuKrmjIfpkojmjIflkJHlkIzkuIDkuKrlr7nosaHvvIzkuJTpgJrov4flhbbkuK3kuIDkuKrmjIfpkojkv67mlLnor6Xlr7nosaHml7bvvIzkvJrnlJ/miJDor6Xlr7nosaHnmoTkuIDkuKrlia/mnKzvvIjkuIDkuKrmlrDlr7nosaHvvInjgILkv67mlLnkvZznlKjlnKjov5nkuKrlia/mnKzkuIrvvIznhLblkI7kvb/ooqvkv67mlLnnmoTmjIfpkojmjIflkJHov5nkuKrlia/mnKzjgIINCg0KICAgIGBgYHtyfQ0KICAgIHggPC0gYygxLCAyLCAzKQ0KICAgICMgdHJhY2VtZW4oKei3n+i4qnjmjIfpkojmjIflkJHnmoTlr7nosaHvvIzmr4/lvZPov5nkuKrlr7nosaHooqvlpI3liLbvvIx0cmFjZW1lbSgp6YO95Lya5omT5Y2w5LiA5p2h6K+05piODQogICAgY2F0KHRyYWNlbWVtKHgpLCAiXG4iKQ0KICAgIHkgPC0geA0KICAgIHlbM10gPC0gNEwgIyDlj5HnlJ/mi7fotJ0NCiAgICBvYmpfYWRkcih4KQ0KICAgIG9ial9hZGRyKHkpDQogICAgdW50cmFjZW1lbSh4KSAjIOWFs+mXrei3n+i4qg0KICAgIGBgYA0KDQoyLiAg5a+56LGh5L2c5Li65Y+C5pWw5Lyg6YCS57uZ5Ye95pWw77yM5bm25Zyo5Ye95pWw5YaF6YOo5L+u5pS55a+56LGh5pe277yM5Lmf5Lya5Yib5bu65a+56LGh55qE5Ymv5pysDQoNCiAgICAxLiAg5Ye95pWw5aSW6YOo55qE5Y+Y6YeP5ZCN5LuN5oyH5ZCR5pyq6KKr5L+u5pS555qE5Y6f5a+56LGhDQogICAgMi4gIOS9hioq5aaC5p6c5L2/55So6L+Q566X56ymIGA8PC1g77yM5bCx5Y+v5Lul5L+u5pS55Ye95pWw5aSW6YOo55qE5Y+Y6YeP77yI5aaC5LiA5Lqb6ZqP552A6L+t5Luj5LiA6L2u6L2u5pu05paw55qE57uf6K6h5Y+Y6YeP77yJKirjgILmn5Dkupvmg4XlhrXkuIvvvIzov5nkuKrlip/og73pnZ7luLjph43opoHvvIzlj6/ku6UqKumAmui/h+WHveaVsOS/ruaUueWklumDqOWPmOmHjyoq44CCDQoNCiAgICBgYGB7cn0NCiAgICBtb2RpZnlfZmlyc3QgPC0gZnVuY3Rpb24oeCkgew0KICAgICAgeFsxXSA8LSAwDQogICAgICB4DQogICAgfQ0KICAgIHYxIDwtIGMoMSwgMiwgMykNCiAgICBjYXQodHJhY2VtZW0odjEpLCAiXG4iKQ0KICAgIG1vZGlmeV9maXJzdCh2MSkNCiAgICB2MSAjIOWklumDqOeahCB2MSDmnKrooqvkv67mlLkNCiAgICANCiAgICB4IDwtIDANCiAgICBjYXQodHJhY2VtZW0oeCksICJcbiIpDQogICAgbW9kaWZ5X3ggPC0gZnVuY3Rpb24odmFsdWUpIHsNCiAgICAgIHggPDwtIHZhbHVlDQogICAgfQ0KICAgIG1vZGlmeV94KDMpDQogICAgeCAjIOWklumDqOeahCB4IOiiq+S/ruaUueS6hg0KICAgIGBgYA0KDQojIyMjIyDliJfooagNCg0K5Li65LqG6IqC55yB56m66Ze077yM5YiX6KGo5YKo5a2Y55qE5LiN5piv5a+56LGh77yM6ICM5piv5oyH6ZKI44CC5L+u5pS55YiX6KGo5pe277yM5Y+q5pyJ5Y+Y5YyW55qE5YWD57Sg5Lya5aSN5Yi244CCDQoNCmBgYHtyfQ0KYSA8LSAxOjEwDQpiIDwtIGxpc3QoYSwgYSkNCmMgPC0gbGlzdChiLCBhLCAxOjEwKQ0KcmVmKGEsIGIsIGMpDQoNCmwxIDwtIGxpc3QoMSwgMiwgMykNCmwyIDwtIGwxDQojIOaLt+i0neacuuWItuWQr+WKqO+8jOS9huaLt+i0neeahOaYr+aMh+mSiO+8jOiAjOS4jeaYryB2YWx1Ze+8jOi/meaYr+a1heaLt+i0nQ0KbDJbWzNdXSA8LSA0IA0KbG9ic3RyOjpyZWYobDEsIGwyKQ0KYGBgDQoNCjxpbWcgc3JjPSJodHRwOi8vaHVtb29uLWltYWdlLWhvc3Rpbmctc2VydmljZS5vc3MtY24tYmVpamluZy5hbGl5dW5jcy5jb20vaW1nL3R5cG9yYS9KYXZhU2NyaXB0L2wtbW9kaWZ5LTEucG5nIiBhbHQ9ImltZyIgc3R5bGU9Inpvb206NTAlOyIvPg0KDQo8aW1nIHNyYz0iaHR0cDovL2h1bW9vbi1pbWFnZS1ob3N0aW5nLXNlcnZpY2Uub3NzLWNuLWJlaWppbmcuYWxpeXVuY3MuY29tL2ltZy90eXBvcmEvSmF2YVNjcmlwdC9sLW1vZGlmeS0yLnBuZyIgYWx0PSJpbWciIHN0eWxlPSJ6b29tOjUwJTsiLz4NCg0KIyMjIyMg5pWw5o2u5qGGDQoNCuaVsOaNruahhuacrOi0qOS4iuaYr+S4gOS4quWIl+ihqO+8jOWCqOWtmOeahOmDveaYr+aMh+WQkeWIl+WQkemHj+eahOaMh+mSiOOAgg0KDQohW2ltZ10oaHR0cDovL2h1bW9vbi1pbWFnZS1ob3N0aW5nLXNlcnZpY2Uub3NzLWNuLWJlaWppbmcuYWxpeXVuY3MuY29tL2ltZy90eXBvcmEvSmF2YVNjcmlwdC92Mi0yMDExZGU2ZjE0YWVlYjQ3N2M5MTUxNmVmMjg5YjMyY183MjB3LmpwZykNCg0KYGBge3J9DQpkMSA8LSBkYXRhLmZyYW1lKHggPSBjKDEsIDUsIDYpLCB5ID0gYygyLCA0LCAzKSkNCmQyIDwtIGQxDQpkMyA8LSBkMQ0KcmVmKGQxLCBkMikNCnJlZihkMSwgZDMpDQoNCiMg5L+u5pS55YiX77yM6K+l5YiX5aSN5Yi277yb5YW25LuW5YiX5omU5oyH5ZCR5Y6f5a+56LGhDQpkMlssIDJdIDwtIGQyWywgMl0gKiAyDQpyZWYoZDEsIGQyKQ0KDQojIOS/ruaUueihjO+8jOW/hemhu+WkjeWItuavj+S4gOWIlw0KZDNbMSwgXSA8LSBkM1sxLCBdICogMw0KcmVmKGQxLCBkMykNCmBgYA0KDQohW2ltZ10oaHR0cDovL2h1bW9vbi1pbWFnZS1ob3N0aW5nLXNlcnZpY2Uub3NzLWNuLWJlaWppbmcuYWxpeXVuY3MuY29tL2ltZy90eXBvcmEvSmF2YVNjcmlwdC92Mi0yMTU5NjQ4NjliM2ExODMxZTg5OGNkZjk3Nzk1Yjk0ZV83MjB3LmpwZykNCg0KIVtpbWddKGh0dHA6Ly9odW1vb24taW1hZ2UtaG9zdGluZy1zZXJ2aWNlLm9zcy1jbi1iZWlqaW5nLmFsaXl1bmNzLmNvbS9pbWcvdHlwb3JhL0phdmFTY3JpcHQvdjItZWVhMDY1ODlhZjE4MjE3ZWVjZGE0MDVmN2VmMGU3ODFfci5qcGcpDQoNCiMjIyMjIOWtl+espuWQkemHjw0KDQrkuZ/mmK/mjIfpkojnmoTlkJHph4/jgILmr4/kuKrmjIfpkojmjIflkJHkuIDkuKrlrZfnrKbkuLLvvIzov5nkuKrlrZfnrKbkuLLkvY3kuo7lhajlsYDlrZfnrKbkuLLmsaDkuK3jgIINCg0KYGBge3J9DQp4IDwtIGMoImEiLCAiYSIsICJhYmMiLCAiZCIpDQpyZWYoeCwgY2hhcmFjdGVyID0gVFJVRSkNCmBgYA0KDQohW2ltZ10oaHR0cDovL2h1bW9vbi1pbWFnZS1ob3N0aW5nLXNlcnZpY2Uub3NzLWNuLWJlaWppbmcuYWxpeXVuY3MuY29tL2ltZy90eXBvcmEvSmF2YVNjcmlwdC92Mi1iZTUwNGI4ZmI5NDYwYWVjZWE3MmNkMmNiMjFjODExZV83MjB3LmpwZykNCg0KIyMjIyDkuI3kvJrlpI3liLblr7nosaHnmoTmg4XlvaINCg0KIyMjIyMg5ZSv5LiA5oyH6ZKIDQoNCuWPquacieS4gOS4quaMh+mSiOaMh+WQkeWvueixoeaXtu+8jOS/ruaUueWvueixoeS4jeS8muWPkeeUn+WkjeWItuOAgg0KDQooUnN0dWRpbyDkuK3kuI4gQ29uc29sZSDkuK3kuI3lkIzvvIxSc3R1ZGlvIOS4reS7jeimgeWkjeWItikNCg0KYGBge3J9DQp6IDwtIGMoMSwgMiwgMywgNCwgNSkNCmNhdCh0cmFjZW1lbSh6KSwgIlxuIikNCnpbM10gPC0gNEwNCnoNCm9ial9hZGRyKHopDQp1bnRyYWNlbWVtKHopICMg5YWz6Zet6Lef6LiqDQpgYGANCg0K5L2G5piv77yMUiDlr7nmjIfpkojmlbDph4/nmoTliKTmlq3kuI3lpJ/mmbrog73jgILlpoLkuKTkuKrmjIfpkojmjIflkJHkuIDkuKrlr7nosaHvvIzlhbbkuK3kuIDkuKrooqvliKDpmaTlkI7vvIxSIOWNtOS4jeefpemBk++8jOS7jeeEtuS7peS4uuacieS4pOS4quaMh+mSiOOAguWboOatpOS8muS6p+eUn+W+iOWkmuS4jeW/heimgeeahOWvueixoeaLt+i0neOAgg0KDQpgYGB7cn0NCnggPC0gZGF0YS5mcmFtZShtYXRyaXgocnVuaWYoNSAqIDFlNCksIG5jb2wgPSA1KSkNCmNhdCh0cmFjZW1lbSh4KSwgIlxuIikNCm1lZGlhbnMgPC0gdmFwcGx5KHgsIG1lZGlhbiwgbnVtZXJpYygxKSkNCg0KZm9yIChpIGluIDE6NSkgew0KICB4W1tpXV0gPC0geFtbaV1dIC0gbWVkaWFuc1tbaV1dDQp9DQpgYGANCg0KIyMjIyMg546v5aKD5a+56LGh5oC75piv6KKr5bCx5Zyw5L+u5pS5DQoNCg0KIyMjIOino+aehOi1i+WAvO+8iFVucGFja2luZyBBc3NpZ25tZW5077yJDQoNCioqemVhbGxvdCDljIXmj5DkvpvnmoQgYCU8LSVgIOWSjCBgJT4tJWAg5Ye95pWwKioNCg0KYGBge3J9DQpsaWJyYXJ5KHplYWxsb3QpDQoNCiMgdW5wYWNrIHZlY3Rvcg0KYyhsYXQsIGxuZykgJTwtJSBjKDM4LjA2MTk0NCwgLTEyMi42NDM4ODkpDQpsYXQNCmxuZw0KDQojIHVucGFjayBsaXN0DQpjb29yZHNfbGlzdCA8LSBmdW5jdGlvbigpIHsNCiAgbGlzdCgzOC4wNjE5NDQsIC0xMjIuNjQzODg5KQ0KfQ0KYyhsYXQsIGxuZykgJTwtJSBjb29yZHNfbGlzdCgpDQpsYXQNCmxuZw0KDQojIHVucGFjayByZWdyZXNzaW9uIHJlc3VsdA0KYyhpbnRlciwgc2xvcGUpICU8LSUgY29lZihsbShtcGcgfiBjeWwsIGRhdGEgPSBtdGNhcnMpKQ0KaW50ZXINCnNsb3BlDQoNCiMgdW5wYWNrIGRhdGEuZnJhbWUNCmMobXBnLCBjeWwsIGRpc3AsIGhwKSAlPC0lIG10Y2Fyc1ssIDE6NF0NCmhlYWQobXBnKQ0KDQojIHVucGFjayBuZXN0ZWQgdmFsdWVzDQpjKGEsIGMoYiwgZCksIGUpICU8LSUgbGlzdCgiYmVnaW4iLCBsaXN0KCJtaWRkbGUxIiwgIm1pZGRsZTIiKSwgImVuZCIpDQphDQpiDQpkDQplDQoNCiMgdW5wYWNrIGNoYXJhY3RlciBzdHJpbmcNCmMoY2gxLCBjaDIsIGNoMykgJTwtJSAiYWJjIg0KY2gxDQpjaDINCmNoMw0KDQojIHVucGFjayBEYXRlDQpjKHksIG0sIGQpICU8LSUgU3lzLkRhdGUoKQ0KeQ0KbQ0KZA0KDQojIC4uLiByZXN0IG9mDQpjKGJlZ2luLCAuLi5taWRkbGUsIGVuZCkgJTwtJSBsaXN0KDEsIDIsIDMsIDQsIDUpDQpiZWdpbg0KbWlkZGxlDQoNCiMgcGxhY2UgaG9sZGVyDQpjKG1pbl93dCwgLiwgLiwgbWVhbl93dCwgLiwgbWF4X3d0KSAlPC0lIHN1bW1hcnkobXRjYXJzJHd0KQ0KbWluX3d0DQptZWFuX3d0DQptYXhfd3QNCg0KIyDlkJHlj7PnmoTop6PmnoTotYvlgLznrKblj7cgJS0+JQ0KbXRjYXJzICU+JQ0KICBzdWJzZXQoaHAgPiAxMDApICU+JQ0KICBhZ2dyZWdhdGUoLiB+IGN5bCwgZGF0YSA9IC4sIEZVTiA9IC4gJT4lIG1lYW4oKSAlPiUgcm91bmQoMikpICU+JQ0KICB0cmFuc2Zvcm0oa3BsID0gbXBnICU+JSBtdWx0aXBseV9ieSgwLjQyNTEpKSAlLT4lIA0KICBjKGN5bCwgbXBnLCAuLi5yZXN0KQ0KY3lsDQpgYGANCg0KDQojIyDmnaHku7bor63lj6UNCg0KIyMjIGBpZi4uLmVsc2UgaWYuLi5lbHNlLi4uYA0KDQpgYGAgcg0KaWYgKGNvbmRpdGlvbjEpIHsNCiAgDQp9IGVsc2UgaWYgKGNvbmRpdGlvbjIpIHsgDQogICMgZWxzZSBpZuS4remXtOacieepuuagvO+8jOi3nyBKYXZhU2NyaXB0IOS4gOagtw0KfSBlbHNlIHsNCiAgDQp9DQpgYGANCg0KIyMjIGBpZmVsc2UoKWANCg0KYGlmLi4uZWxzZWAg55qEIGNvbmRpdGlvbiDkuI3og73mmK/lkJHph4/vvIzlsIboh6rliqjlv73nlaXmnaHku7blkJHph4/kuK3nrKzkuIDkuKrku6XlkI7nmoTlhYPntKDjgILmnInml7bvvIzopoHnlKhgYW55KGJvb2wgdmVjdG9yKWDlkoxgYWxsKGJvb2wgdmVjdG9yKWDlsIbluIPlsJTlkJHph4/ovazmjaLkuLrkuIDkuKpib29s5YC877yM5YaN6YWN5ZCIYGlmYOS9v+eUqOOAgg0KDQrogIzkuInlhYPpgInmi6nnrKZgaWZlbHNlKGNvbmQsIHN0YXRlbWVudDEsIHN0YXRlbWVudDIpYOWPr+S7peaOpeaUtuS4ieS4quWQkemHj++8jOaMieWQhOiHquWIhumHj+aJp+ihjOWQkemHj+WMluaTjeS9nA0KDQo+IOWvueW6lCBKUyDkuK3nmoQgYGNvbmRpdGlvbj8gU3RhdGVtZW50MTogc3RhdGVtZW50MjtgDQoNCiMjIyBgc3dpdGNoKHN0YXRlbWVudCwgbGlzdClgDQoNCmxpc3Qg5piv5LiA57uE6ZSu5YC85a+577yMc3RhdGVtZW50IOaYr+S4gOS4qumUru+8jOi/lOWbniBsaXN0IOS4reS4juivpemUruWvueW6lOeahOWAvOOAgg0KDQpgYGAgcg0KcmVzdWx0MSA9IHN3aXRjaCgnZnJ1aXQnLA0KICAgICAgICAgICAgICAgICBtZWF0ID0gImNoaWNrZW4iLA0KICAgICAgICAgICAgICAgICBmcnVpdCA9ICJhcHBsZSIsDQogICAgICAgICAgICAgICAgIHZlZ2V0YWJsZSA9ICJjdWN1bWJlciIsDQogICAgICAgICAgICAgICAgICdzb3VwJykNCnJlc3VsdDENCiMgWzFdICJhcHBsZSINCg0KcmVzdWx0MiA9IHN3aXRjaCgnZmluYWwnLA0KICAgICAgICAgICAgICAgICBtZWF0ID0gImNoaWNrZW4iLA0KICAgICAgICAgICAgICAgICBmcnVpdCA9ICJhcHBsZSIsDQogICAgICAgICAgICAgICAgIHZlZ2V0YWJsZSA9ICJjdWN1bWJlciIsDQogICAgICAgICAgICAgICAgICdzb3VwJykNCnJlc3VsdDIgIyDpg73kuI3ljLnphY3ml7bvvIzov5Tlm57ml6BrZXnnmoTlgLwNCiMgWzFdICJzb3VwIg0KYGBgDQoNCiMjIOW+queOr+ivreWPpQ0KDQojIyMgYHJlcGVhdHt9YA0KDQrlv4XpobvmiYvliqjmjIflrpogYnJlYWsg5p2h5Lu277yM5ZCm5YiZ5peg6ZmQ5b6q546v44CC6L+Z5Zyo5Yib5bu65Lqk5LqS5byPIGFwcCDml7blvojmnInnlKjjgIINCg0KIyMjIGB3aGlsZSAoY29uZGl0aW9uKSB7fWANCg0KIyMjIGBmb3IoIGl0ZXJhdG9yIGluIHNlcXVlbmNlKSB7fWANCg0KIyMjIyDpooTlhYjliIbphY3nqbrpl7TvvJrmj5Dpq5jkvKDnu58gZm9yIOW+queOr+eahOaViOeOhw0KDQpSIOS4reWmguaenOWvueWvueixoeeahCBzaXplIOWBmuS6huaUueWKqO+8iOWmgua3u+WKoOS4gOS4quWFg+e0oO+8ie+8jOimgeaKiuaVtOS4quaVsOaNrue7k+aehOmDvemHjeaWsOaLt+i0neS4gOS7ve+8jOi/memdnuW4uOaFouOAguWmguaenOWcqOavj+asoeW+queOr+S4remDveaciei/meenjeivreWPpe+8jOaXtumXtOWkjeadguW6puS8muaYryRcbWF0aHJte099XGxlZnQoXG1hdGhybXtufV57Mn1ccmlnaHQpJOe6p+eahOOAgg0KDQrmiYDku6XmnIDlpb3lnKjlvIDlp4vlvqrnjq/liY3vvIzpooTlhYjlo7DmmI7kuIDkuKrlkJHph4/vvIzkuLrovpPlh7rnu5PmnpzliIbphY3otrPlpJ/nmoTnqbrpl7TvvIzov5nlr7nlvqrnjq/mlYjnjofpnZ7luLjph43opoHjgILpooTlhYjliIbphY3nmoTnqbrpl7TlvoDlvoDmmK/kuIDkuKpsaXN077yM5Zyo5b6q546v57uT5p2f5ZCO6ZyA6KaB5omT5pWj5bm26YeN57uE5Li65oiR5Lus6ZyA6KaB55qE5a+56LGh77ya5a+55LqO5ZCR6YeP55SoYHVubGlzdCgpYO+8jOaVsOaNruahhueUqGBkcGx5cjo6YmluZF9yb3dzKClgDQoNCui/meWFtuWunuacieeCueWDjyBKUyDph4zpnaLnmoQ6DQoNCmBgYHtqc30NCmNvbnN0IGFyciA9IFtdOw0KZm9yIChsZXQgaSA9IDA7IGkgPCA2OyBpKyspIHsNCiAgYXJyLnB1c2goaSBeIDIgJSAxMSk7DQp9DQpjb25zb2xlLmxvZyhhcnIpOw0KYGBgDQoNCuS+i++8mg0KDQpgYGB7cn0NCmRmIDwtIHRpYmJsZSgNCiAgYSA9IHJub3JtKDEwKSwNCiAgYiA9IHJub3JtKDEwKSwNCiAgYyA9IHJub3JtKDEwKSwNCiAgZCA9IHJub3JtKDEwKQ0KKQ0KDQojIOimgeaxgmRm5ZCE5YiX55qE5Lit5L2N5pWw77yM5YWI5Li66L6T5Ye65YiG6YWN56m66Ze077yM6ZW/5bqm5Li6bmNvbChkZinnmoTlkJHph48NCm91dHB1dCA8LSAgZG91YmxlKG5jb2woZGYpKQ0KZm9yIChpIGluIDE6bmNvbChkZikpIHsgDQogIG91dHB1dFtbaV1dIDwtIG1lZGlhbihkZltbaV1dKQ0KfQ0Kb3V0cHV0DQpgYGANCg0KIyMjIGBicmVha2Ag5YWz6ZSu5a2XDQoNCiMjIyBgbmV4dGAg5YWz6ZSu5a2XDQoNCiMjIERlYnVnDQoNCmBzdG9wKHN0cmluZylgCee7iOatoueoi+W6j+W5tuaKpemUme+8miJFcnJvcjogc3RyaW5nIg0K</div>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeSourceEmbed("Basic-Grammar.Rmd");
  window.initializeCodeFolding("show" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3,h4",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
